%%\documentclass{sig-alternate}
\documentclass{sig-alternate-10pt}
%%\documentclass{sig-alternate-2013}
%\newfont{\mycrnotice}{ptmr8t at 7pt}
%\newfont{\myconfname}{ptmri8t at 7pt}
%\let\crnotice\mycrnotice%
%\let\confname\myconfname%

\permission{Permission to make digital or hard copies of all or part of this work for 
personal or classroom use is granted without fee provided that copies are not made or 
distributed for profit or commercial advantage and that copies bear this notice and the 
full citation on the first page. Copyrights for components of this work owned by others 
than ACM must be honored. Abstracting with credit is permitted. To copy otherwise, or 
republish, to post on servers or to redistribute to lists, requires prior specific 
permission and/or a fee. Request permissions from permissions@acm.org.}
%%\conferenceinfo{MM'14,}{August 24--27, 2014, New York, NY, USA.}
\conferenceinfo{Conference'15,}{Date, Year, Place}
\copyrightetc{Copyright 2015 ACM \the\acmcopyr}
\crdata{Blah-blah/numbers/ ...\$15.00.\\
http://dx.doi.org/}

\clubpenalty=10000 
\widowpenalty = 10000

%\usepackage[compress]{cite}
\usepackage{cite}
%\usepackage{fixltx2e}
%\usepackage{hyperref}
%\usepackage{graphicx}
%\usepackage{varwidth}
%\usepackage{subfig}
%\usepackage{epsfig}

%%%% NORMALLY
\usepackage{subfigure}

%\usepackage{booktabs}
\usepackage{color}
%\usepackage[...]{caption}

%\usepackage{jpfigurecommands}
%\include{rendering-preamble}
\usepackage{jpfigurecommands}
%\include{tableread}

%%%%%%%%%%%%%%%%%%%%%
%%NEW
\usepackage{url}


%\newcommand{\textcolorRED}[2]{\textcolor{red}{#2}}
\newcommand{\textcolorRED}[2]{#2}

%\newcommand{\multi}[2]{\textcolor{green}{#1}}
%\newcommand{\multi}[2]{\textcolor{green}{#2}}
%\newcommand{\multi}[2]{#2}



%\DeclareCaptionType{copyrightbox}
\begin{document}


\title{Analysis of HTTPS Adoption and Third-party Tracking: \\A Swedish Perspective}
%%\title{A Swedish Perspective of HTTPS Adoption and Third-party Tracking}

%\numberofauthors{2}
%\author{
%Joel Purra\\
%Link{\"{o}}ping University, Sweden\\
%\email{mig@joelpurra.se}\\
%\and
%Niklas Carlsson\\
%Link{\"{o}}ping University, Sweden\\
%\email{niklas.carlsson@liu.se}\\
%}

\numberofauthors{2} %  in this sample file, there are a *total*
\author{
\alignauthor Joel Purra\\
       \affaddr{Link{\"o}ping University}\\
       \affaddr{Link{\"o}ping, Sweden}\\
       \email{mig@joelpurra.se}
\and
\alignauthor Niklas Carlsson\\
       \affaddr{Link{\"o}ping University}\\
       \affaddr{Link{\"o}ping, Sweden}\\
       \email{niklas.carlsson@liu.se}
}

\maketitle
\begin{abstract}

Both active third-party tracking (e.g., using scripts and plugins embedded within visited websites) and passive tracking 
(e.g., through network monitoring) are extensively used to gather knowledge about users internet activities and interests.  
While HTTPS can be used to protect against some privacy concerns raised by passive monitoring, prior work have not carefully 
characterized the HTTPS adoption and third-party tracking when using HTTP and HTTPS, respectively.  This paper presents a 
measurement analysis of the current HTTPS adoption and third-party tracking usage.  First, we develop and release the 
software of a novel measurement framework for automated, repeatable retrieval, and analysis of websites.  Second, 
we characterize the HTTPS adoption, HTTPS redirection dynamics, and use of secure/non-secure third-party resources 
from both a national (Swedish) and global perspective.  In total, we analyze more than 150,000 websites.  Third, 
we characterize the third-party tracking usage and the companies that may get access to user information when using 
HTTP and HTTPS.  Overall, we have found that users may be given a false sense of privacy when using HTTPS.  
They are often directed to non-secure subdomains, and even when served using HTTPS, the use of third-party 
(external) resources is high among all classes of domains, regardless if HTTP or HTTPS is used.  In fact, 
third-party usage is most prevalent among the most popular website, visited most often.  While Google has 
by far the greatest third-party coverage (more than 90\% for most website categories), we have found that 
there are many other domains serving third-party content that may fly under the radar.



%Both active third-party tracking (e.g., using scripts and plugins embedded within visited websites) and passive tracking (e.g., through network monitoring) are extensively used to collect information and knowledge about users internet activities and interests.  While HTTPS can be used to protect against privacy concerns raised by passive monitoring, prior work have not carefully studied the adoption of HTTPS and how much privacy protection against third-party tracking can be gained from using HTTPS.  This paper presents a measurement analysis of the current HTTPS adoption and third-party tracking usage.  First, we develop and release the software of a novel measurement framework for automated, repeatable retrieval, and analysis of websites and their third-party usage and HTTPS dynamics.  Second, we characterize the HTTPS adoption and use of secure/non-secure third-party resources from both a national (Swedish) and global perspective.  In total, we repeatedly analyze more than 150,000 websites.  Third, we characterize the third-party tracking usage and the companies that may get access to user information when using HTTP and HTTPS.  Overall, we have found that users may be given a false sense of privacy when using HTTPS.  They are often directed to non-secure subdomains, and even when served using HTTPS, the use of third-party (external) resources is high among all classes of domains, regardless if HTTP or HTTPS is used.  This is magnified by third-party usage being most prevalent among the most popular website, which people visit most often.  While Google has by far the greatest third-party coverage (more than 90\% for most website categories) among known tracker companies, we have found that there are many other domains that also server third-party content which may fly under the radar.


\end{abstract}

% A category with the (minimum) three required fields
%\category{C.4}{Information Systems Organization}{Performance of Systems}
%\category{H.4}{Information Systems Applications}{Miscellaneous}
%A category including the fourth, optional field follows...
%\category{D.2.8}{Software Engineering}{Metrics}[complexity measures, performance measures]
\category{C.2.2}{Information Systems Organization}{Network Protocols}[Applications] 
%\category{H.5.1}{Multimedia Information Systems}{Video}


%%\terms{Theory}

\keywords{Blah blah}
%%\keywords{Nonlinear streaming; Multipath streaming; HAS}

\section{Introduction}

We are living in an information society in which organizations constantly track our movements 
on the world-wide web, and use the collected (and stored) information to analyze and gain 
knowledge about us and our interests.  Website owners may use such knowledge to present personalized 
content that may better match user interests, advertisement firms may use the knowledge to sell 
targeted ads based on user interests, media analytics firms may use the data to verify 
advertisement-related statistics, and data brokers may package and sell the user data 
inferred from the user interests.

Web usage is both actively and passively tracked.  With active tracking, third-party 
scripts and plugins embedded within the visited websites, for example, are typically 
used to extract and collect information about a user's every click, the time spent on 
each page (even if inactive), the user environment (including operating system, window size, 
screen resolution, and color depth), mouse movements, scrollbar location, installed fonts, 
plugins, extensions, and any potential error reports, for example.  With passive measurements, 
network traffic can be monitored at any point in the network, allowing user actions and user 
interests to be inferred from the traffic patterns, HTTP-related information (such as URLs of 
visited websites, previously visited websites, the client's browser, operating system, and cookies, for example), 
and any other application specific information (including information sent to third-party trackers).

In parallel with a trend towards increased user tracking, there has also been an increase in the 
number of services that use HTTPS.  Such secure end-to-end connections (between the client and server) 
help limit the amount of information that can be gained from passive data collection along the network path, 
but does not protect against active third-party tracking enabled through embedded tracking code.  
When considering the current state-of-the art, and these trends in particular, 
a number of important question arise:  What is the status of the current HTTPS adoption?  
How much third-party tracking is deployed?  Does third-party tracking usage differ for early 
adapters of HTTPS? And, perhaps most importantly, how much privacy and protection against 
third-party tracking can be gained from conscious use of HTTPS?  As of today, there have 
only been some preliminary works touching upon the first two of these questions~\cite{BuMS11,NFL+14}, 
but no work has carefully addressed all four questions.

To carefully address these important and un-answered questions, this paper presents 
a novel measurement methodology and analysis of the current HTTPS and third-party tracking usage.  
Leveraging Swedish domain knowledge, the study presents results from both a national (Swedish) 
perspective as well as based on a global perspective (using globally popular service, for example).  
The paper makes three main contributions:

First, we develop and release the software of a novel measurement framework for automated, 
repeatable retrieval, and analysis of websites and their third-party usage and 
HTTPS dynamics.~\footnote{Both the open source project and datasets used in the paper 
are made public with this paper.   Code and datasets and can be found here: \url{http://joelpurra.com/projects/masters-thesis/}.}  
The software is built on open source software, uses a non-modified ``standard'' headless browser, 
and stores results into standardized HAR format.  To capture HTTPS adoption and redirections, 
domains are visited using both \texttt{http} and \texttt{https}, with and without the \texttt{www} prefix. 
Third-party resource usage is captured through post processing (including comparison with the tracker 
lists of the popular privacy tool \texttt{disconnect.me}\footnote{ADD FOOTNOTE LINK TO DICONNECT.ME}) 
and public suffix lists are used to identify domains and subdomains.

Second, we characterize the HTTPS adoption and use of secure/non-secure third-party resources from 
both a Swedish and global perspective.  We find that the HTTPS adoption among globally popular 
websites (10-30\%, 50\% for the very top) and lists of both popular and important Swedish 
websites (15-50\%) is much higher than for random domains (less than 1\%). Although it appears 
that popular websites are much further along in their adoption, the low overall values suggest 
that most websites are susceptible to passive eavesdropping anywhere along the network path.  
To make things worse for the privacy conscious user, we have found that many websites redirect 
their users from their secure (\texttt{https}) domain to their insecure (\texttt{http}) domain, 
and most secure \texttt{https} domains relies heavily on both internal and external (third party) 
resources delivered over HTTP (rather than HTTPS).  The use of third-party resources over HTTP 
shows that a secure, encrypted connection to a website often does not ensure privacy neither 
against active and passive tracking.  This may be concerning as users falsely might be lead to 
believe that such “secure connection” (by many browsers labeled using a padlock) provides 
protection against external tracking.

Third, we characterize the third-party tracking usage and the companies that may get access 
to user information when using HTTP and HTTPS.  Overall, the use of third-party (external) 
resources is high among all classes of domains, regardless if HTTP or HTTPS is used.  
For example, less than 7\% of the globally most popular domains use only internal resources.  
These numbers are even lower for the most popular Swedish websites within most websites categories, 
but greater among random domains (10-30\%), suggesting that users activates often can be tracked 
through third-party resource usage.  In fact, most websites also have at least one {\em known} 
tracker present: 53-72\% of random domains, 88-98\% of top websites, and 78-100\% of websites 
in the different Swedish top-categories.  While Google has by far the greatest third-party 
coverage among known tracker companies (e.g., Google has trackers on more than 90\% of the 
websites within the majority of the website categories considered here), we have found that 
there are many other third-party domains that may fly under the radar.  For example, 
Disconnect's blocking list only detects 10\% of external primary domains.  With most 
of these non-blocked third-party entries being third-party content providers, which are 
known to keep track of users across services, we expect that there will be a continued 
battle for the knowledge about our web activities.

The remainder of the paper is organized as follows. Section~\ref{sec:background} gives 
a brief background on online tracking.  Our methodology and measurement framework are 
described in Section~\ref{sec:method}.  Section~\ref{sec:https} presents our 
characterization results for HTTPS adoption and client redirections between 
secure and non-secure resources.  Section~\ref{sec:tracking} characterizes the 
third-party tracking landscape and how it differs between secure and non-secure 
domains. Finally, Section~\ref{sec:related} discusses related works, before 
Section~\ref{sec:conclusions} concludes the paper.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Background}\label{sec:background}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{table*}[t]
\centering
\caption{Summary of domain lists.}
\label{tab:domains}
{\small
\begin{tabular}{|l|c|r|l|r|r|}\hline
\hline %% closing line
Domain list       & Date       & Total size  & Selection & Selection size & Unique\\\hline
.SE health status & 2014-03-27 & 980         & curated   & 915            & 915   \\\hline
.se zone          & 2014-07-10 & 1,318,000   & random    & 100,000        & 100,000 \\\hline
.dk zone          & 2014-07-23 & 1,260,000   & random    & 10,000         & 10,000 \\\hline
.com zone         & 2014-08-27 & 114,178,000 & random    & 10,000         & 10,000 \\\hline
.net zone         & 2014-08-27 & 15,096,000  & random    & 10,000         & 10,000 \\\hline
reach50           & 2014-09-01 & 50          & top       & 50             & 50 \\\hline
Alexa Top 1M      & 2014-09-01 & 1,000,000   & top       & 10,000         & 9,986 \\\hline
                  &            &             & random    & 10,000         & 9,959 \\\hline
                  &            &             & all .se   & 3,364          & 3 364 \\\hline
                  &            &             & all .dk   & 2,637          & 2,637 \\\hline
Total             &            & 132,852,050 &           & 156,907        & 156,045 \\\hline
\end{tabular}}
\vspace{-0pt}
\end{table*}


\section{Methodology}\label{sec:method}

%In this work, 
We perform a large-scale measurement campain in which 
the front page of a large set of domains are visited
using both \texttt{http} and \texttt{https}.
(We also considered both domain variations 
with and without the \texttt{www} prefix.)
%%Based on a list of domains, 
%%At a high level,
With the tool developed in this project,
%%\footnote{The browser does not have a visible window, as it is built for automation.}
%%browser \texttt{phantomjs} downloads
the front page of each domain is downloaded and parsed 
using a headless (without display window) \texttt{phantomjs} browser 
the same way a user's browser would.\footnote{
As part of the validation process,
the tool creates an image of the full website after the download is complete,
but does not display the results to any user.}
The URL of each requested resource is extracted, and associated with
the domain it was loaded from. Each object and domain is classified 
and prepared for post processing and analysis.

{\bf Swedish perspective:}  
First, our meaurements are performed from computers located in Sweden.
Second, we leverage the domain lists from the .SE Health Status report\cite{},
identified by the Internet Infrastructure Foundation (.SE) as the most important domains
to Swedish internet usage and operation.
Combined, these lists include approximately 1,000 domains in the
categories: counties, domain registrars, financial services, government-owned corporations
(GOCS), higher education, ISPs, media, municipalities, and public authorities.
Third, we consider the 50 global websites most visited by Swedish Internet users (reach50),
as well as randomly selected websites within the .se domain zone.

{\bf Global baseline:}  To set our findings in perspective and to broader our
conclusions we also consider globally popular websites (according to Alexa\footnote{
Alexa (official website), \url{www.alexa.com}.}) and randomly selected websites 
from the .com, .net, and .dk (Denmark) domain zones.
Table~\ref{tab:domains} summarizes the domain lists used.
%%and any bias due to geographic personalization by content providers and
%%Content Delivery Networks (CDNs), for example.
%%Client in Sweden and section of websites ...

{\bf Data collection and parallelization:}
HTTP/HTTPS traffic metadata such
as requested URLs and their HTTP request/response headers have been recorded in the HTTP
Archive (HAR) data format.
During our data collection,
multiple domains have been retrieved in parallel, 
with parallelism adjusted to fit each computers' capacity. 
To reduce the risk of intermittent errors,
%% – either in software, on the network or in the remote system – 
each failed access has been retried up to two times.

%%{\bf Website selection:}  Different categories and different popularities ... Also Danish websites for sanity check.

{\bf Data extraction:}
A custom-built tool based on the command line JSON processor \texttt{jq}
is used to covert the HAR data into JSON-based HAR data with information about both requests and responses.
The extracted data includes protocol and hosts (e.g., from URLs), 
HTTP status, mime-type, referer and redirect values – both
for the origin domain's front page and any resources requests by it. 

{\bf Domain identification and classification:}
We classify each requested resource along many dimensions, 
including its mime type, if it is retrieved securely,
and if it is downloaded from a sub-domain or from a known third-party tracker, for example. 
To determine the primary domain and subdomain(s) we use the public suffix list\footnote{REFERENCE/POINTER???} 
(used by browser vendors to implement domain-dependent security measures)
and match domains against it.  This is important to capture the relationships
of second-level domains not open for commercial registration (e.g., \texttt{.com.br}
under \texttt{.br}).  
We refer to resources requested from the main page
that are retrieved from the same domain, a subdomain
or a superdomain as internal requests.
Any other request is deemed as an external request.

{\bf Tracker identification:}
While there are public lists of known trackers, 
%%used by browser privacy tools, they 
these lists are often incomplete and out-of-date~\cite{ref35, ref22}.
In fact,  any external resource can be used for third-party tracking.
For example, even for static (non-script, non-executable) resources with no capabilities to
dynamically survey the user’s browser or OS can track users across domains using
the referer  HTTP header and custimized URI's, for example.
These lists are therefor perhaps best seen as lists of confirmed, recognized third-party trackers.

In our experiments, we do not block are requests.  Instead, URL are matched against known 
trackers during post processing.  For this analysis, we use the tracker list
used by the privacy tool Disconnect.me.  This list contains 2,149 domains,
each belonging to one of 980 organizations and five tracker categories.

ADD: STATS (maybe figure) about skew AND venn diagram of categories.

%Not all domains in the list are treated the same by Disconnect.me; 
%despite being listed as
%known trackers, the content category (A.3.6) is not blocked by default in order to not disturb
%the normal user experience too much. Most organizations are only associated with one domain,
%but some organizations have more than one domain (A.3.3). Figure 3.1 shows the number of
%organizations (out of the 980 organizations) that have a certain number of tracker domains (x
%axis). We see that 47\% (459 of 980) have at least two domains listed by Disconnect.me. Google
%(rightmost point) alone has 271 domains and Yahoo has 71. Some organizations have their
%domains categorized in more than one category, as shown in detail in Table 3.3. Due to the
%relaxed blocking of the content category this can provide a way to track users despite being
%labeled a tracker organization.
%While cookies used for tracking have been a concern for many, they are not necessary in order
%to identify most users upon return, even uniquely on a global level [10]. Cookies have not been
%considered to be an indicator of tracking, as it can be assumed that a combination of other server
%and client side techniques can achieve the same goal as a normal tracking cookie [1].

\begin{figure*}[t]
\centering
\includegraphics[width=0.98\textwidth]{figures-mini-3x1-status-redirects-secure-xbar.pdf}
\begin{tabular}{ccc}
(a) Origin response code &
(b) Origin redirect &
(c) Resource breakdown \\
\end{tabular}
\caption{Example domain categories and their original responses, 
redirects, and HTTPS usage for individual resource transfers.}
\label{fig:httpsDiff}
\vspace{-0pt}
\end{figure*}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{HTTPS Adoption and Redirection}\label{sec:https}

This section highlights some some main differences in the adoption of HTTPS, 
how redirection is used, and the overall use of secure connections of 
a client trying to access each website using either HTTP or HTTPS.
Here, we only show results when accessing the (secure on non-secure) \texttt{www} subdomain.
While the results for the primary domain (without \texttt{www}),
we note that 50\% of top sites always redirecting to the \texttt{www} subdomain
and only 13\% always redirecting to their primary domain.

Figure~\ref{fig:httpsDiff} provides a head-to-head comparison of the 
website downloads of four example categories when using HTTP and HTTPS.
``Top-10K global'' shows results for the top 10,000 webites from Alexa,
``Top .se'' shows results for the .se website among top-1M Alexa sites,
``Rand 100k .se'' shows results for 100,000 random .se domains,
and ``Municipal .se'' shows results for 291 swedish municipals.
%%%
Figure~\ref{fig:httpsDiff}(a) breaks down the initial response status codes.
Here, only 2xx (succesful), 3xx (redirect), and ``null'' (for the case there is no response)
are shown.  The number of 4xx (client errors) and 5xx (server error) responses are negligable. 
We note that many websites do not respond at all (``null'') to HTTPS requests,
whereas other redirect (``3xx'') the request to a different domain or subdomain.
%%ome domains also results in a chain of redirects,
In fact, some redirects results in a chain of redirects,
with on average 1.23 redirects per domain that redirects.
%%In general,
%%the HTTPS usage is lowest among random domains (e.g., less than 0.6\% for ``Rand 100k .se'')
%%and highest for popular domains (e.g., Reach50 - not shown - has 53\% response rate).
Figure~\ref{fig:httpsDiff}(b) breaks down the redirections based on the security
the final website provides, 
and Figure~\ref{fig:httpsDiff}(c) breakdown of the security of the final websites 
(``2xx'' + ``3xx'' codes in Figure~\ref{fig:httpsDiff}(a))
as seen by both direct and redirected websites.
Here, 
%%a site are labelled based on if the redirects  
%%are strictly secure, have mixed HTTP/HTTPS redirects, are strictly insecure or which could not
%%be determined because of recorded URL mismatches.
a site is called ``secure'' if all objects are downloaded over HTTPS,
``insecure'' if no objects are over HTTPS, and mixed otherwise.

Surprisingly, many domains that implements HTTPS do not redirect clients to their secure domain,
but instead redirect to to a preferred variant of their domain name (usually the \texttt{www} subdomain).
In fact, for almost all categories, 
independently wether \texttt{http://www} or \texttt{https://www} was used for the original request,
the redirect results in an insecure connection (Figure~\ref{fig:httpsDiff}(b)).
While the random .se domains have a higher secure redirect ratio,
this category typically do not implement or respond to HTTPS request. 
%(as per 99.4\% ``null'' in Figure~\ref{fig:httpsDiff}(a)).
In general,
the HTTPS usage is lowest among random domains (e.g., less than 0.6\% for ``Rand 100k .se'')
and highest for popular domains (e.g., Reach50 - not shown - has 53\% response rate).


%It seems that Swedish media shun secure connections – not one of them present a fully secured
%domain, serving mixed content in case of responding to secure requests. At the same time, they
%use the highest count of both internal and external resources – with numbers several times higher
%than other domain lists – and more than 20\% of requests go to known trackers

\begin{figure*}[t]
(Figure removes; it's the same as the next figure with both HTTPS and HTTP rows.)
\caption{Secure connections for succesful connections when trying to use HTTPS.
(Note that the majority of websites (as per Figure~\ref{fig:httpsDiff}) do not respond.)}
\label{fig:https}
\vspace{-0pt}
\end{figure*}

We next take a closer look at the number of domains in the different categories 
that allow the user to connect securely with the use of HTTPS.  Figure~\ref{fig:https} 
summarizes the security achieved either directly (``2xx'')
or through different forms of redirects (``3xx'').  The left-hand figure
shows different categories of national domains, and the righ-hand figure
shows results for global domain categories.

\begin{figure*}[t]
\includegraphics[width=0.98\textwidth]{figures-mini-2x2-secure-response-redirect-ybar.pdf}
\caption{Secure connections for succesful HTTPS attempts (top row)
and HTTP attempts (bottom row).
(Note that the majority of websites does not respnd to HTTPS (as per Figure~\ref{fig:httpsDiff}).)}
\label{fig:https2}
\vspace{-0pt}
\end{figure*}

DISCUSS FIGURE

We have also analyzed the fraction of domains that takes a 
more pro-active approach and redirect their users from a non-secure \texttt{http} subdomain
to a secure domain (using HTTPS).   
******
DISCUSS (but and maybe show figure) FOR WHEN USING HTTP FOR INITIAL REQUSET
(and compare againts the ones for when HTTPS was used ...)


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Third-party Tracking}\label{sec:tracking}

%%INSERT FIGURE 4.3(a) and 4(b) FROM THE THESIS

\begin{figure}[t]
\includegraphics[width=0.47\textwidth]{figures-mini-1x1-internal-resources-cdf.pdf}
\caption{External third-party resource usage.}
\label{fig:external}
\vspace{-0pt}
\end{figure}

\subsection{External third-party resource usage}

Most sites relies heavily on third-party resources for their services.
For example, only 7\% of top sites (e.g., ``Top-10K global'') servces 
all their objects from internal domains.
The remaining 93\% are composed using at least
a portion of external resources, allowing these third-party domains to potentially track
users across these domains.
%%With each request classified as either internal or external to the originating domain, it is easy to
%%see how sites divide their resources (C.4). Less than 10\% of top sites (for example alexa.top.10khw)
%%use strictly internal resources, meaning up to 93\% of top sites are composed using at least
%%a portion of external resources. See the percentage of domains (x axis) using strictly internal,
%%mixed and strictly external resources in Figure 4.2(a) for a selection of datasets, and Figure C.2
%%for all datasets. This means external resources – in this thesis seen as trackers – have actively
%%been installed, be it as a commercial choice or for technical reasons (2.1). 
Figure~\ref{fig:external}(a) shows the the cumulative distribution function (CDF) 
of the ratio of external resources used by each domain, with 0\% and 99\% internal resources marked. 
In particular, we show the ratio of domains (y axis) as a function of the ratio 
of internal resources seen by each domain (x axis).
Interestingly, 
with the exception of random websites (e.g., ``Rand-100K .se''),
the difference between HTTP and HTTPS datasets is generally small, 
suggesting that users can be as tracked secure sites as on insecure sites.
The high (40\%) usage of entirely external resources seen for the
random domains are primarily due to parked domains,
which often loads all their resources from an external domain.
(These domains typically do not implement HTTPS and are therefore not
included in the CDF of responding HTTPS sites.)

%this seems to be connected with the fact that many domains are parked1 and load all
%their resources from an external domain which serves the domain name retailer’s resources for all
%parked domains. The same domains seem to not have HTTPS enabled, as can be seen in 4.1(a),
%and the remaining HTTPS domains show the same internal resource ratio characteristics as top
%domains. There is a wide variety of parked page styles, as well as other front pages without
%actual content, but they have not yet been fully investigated and separately analyzed (7.5.4).


%%The difference between
%%HTTP and HTTPS datasets is generally small, showing that users are as tracked on insecure as
%%on secure sites.
%Figure 4.3(a) shows the cumulative distribution function (CDF) of the ratio of external resources
%used by each domain, with 0\% and 99\% internal resources marked. In particular, we
%show the ratio of domains (y axis) as a function of the ratio of internal resources seen by each
%domain (x axis). This maps to the bar graph in Figure 4.2(a); 0\% is all external, over 99\% is all
%internal – in between means mixed security.
%Figure~\ref{fig:external}(b) shows the CDF of the secure resource usage across
%the same set of sites.

%%INSERT FIGURES (a) and (b) FROM THIS MORNINGS FIGURES ...
\begin{figure*}[t]
\includegraphics[width=0.98\textwidth]{figures-mini-2x2-categories-organizations-http-ybar.pdf}
\caption{Domain covererage of different categories of known tracker services (top row)
and companies (bottom row), as per Disconnect's blocking list.}
\label{fig:categories-companies}
\vspace{-0pt}
\end{figure*}


\subsection{Known trackers}

While the third-party resource usage provides insights to the maximum
amount of external reources that may be used for third-party tracking,
it does not give insights to who does the tracking and what type of 
tracking is being done.
To glean some insights into these two aspects,
we leverage Disconnect's tracker list,
which categorize known trackers into categories as well as 
a mapping of the organizations that owns these third-party tracking services.
%%We next take a cloer look at these two aspects.  For the purpose of 
%%our analysis we use the services (and organizations owning these services)
%%included in Disconnect's tracker list.

Figure~\ref{fig:categories-companies} (top-row) breaks down the observed 
tracker usage for each website categories,
across the five tracker categories.
The gray bars shows the coverage of the union of all known trackers (regardless of type).  
Due to page constraints, 
only results for HTTP are shown.
With the exception of the parked domains,
the results for HTTPS are generally very similar.
%and are therefore omitted.
(For example, the Pearson corralation of the total number of
trackers are XX.  NOTE: Could also show Figure 4.3(c), if room ...)

%%We note that 
%%as well the grey “any” bar showing the union of known tracker coverage (x axis). 
Note that the  special Disconnect category is predominant in most datasets, 
showing coverage almost as large as the union of all categories. 
This suggest that the big players (Google, Faecbook, and Twitter) included
in this category have very large coverage on their own.
The second largest category is content.
This category is not blocked by default by Disconnect.me,
suggesting that users running Disconnect's software would still be tracked
on roughly 60-70\% of websites.
%%, as these requests have been deemed desirable 
%%even to privacy-aware users. 
%%This means that even when running Disconnect.me’s software, users are still tracked on
%%60-70\% of websites (C.11.3).

DISCUSS DIFFERENCES BETWEEN WEBSITE TYPES ...

Finally, we take a break down the coverage of the three third-party players
with the greatest coverage in our dataset: Google, Facebook, and Twitter.
Figure~\ref{fig:categories-companies} (bottom-row) shows the coverage for these organizations 
as observed across both national and international domain classes.


\begin{figure}[t]
\centering
\includegraphics[width=0.48\textwidth]{figures-ng-mini-2x1-categories-scatter.pdf}
\begin{tabular}{cc}
(a) Sweden &
(b) Global \\
\end{tabular}
\caption{Correlation of tracker coverage seen with HTTP and HTTPS.}
\label{fig:scatter}
\vspace{-0pt}
\end{figure}

MAYBE SOME MORE TEXT (based on text from 4.3.2 and foward ...):






%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Related Work}\label{sec:related}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Discussion and Conclusion}\label{sec:conclusions}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newpage

%{\small
\bibliographystyle{abbrv}
%\bibliographystyle{acm}
\vspace{8pt}
\bibliography{references}
%}
%%\bibliographystyle{plain}

\end{document}
