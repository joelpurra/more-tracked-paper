\pgfplotstableread[
		format=file,
		col sep=tab,
	]{disconnect.domains-per-organization.tsv}\tableDisconnectDomainsPerOrganization

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.request-status.coverage.origin.sorted.tsv}\tableDatasetsRequestStatusCoverageOriginSorted

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.classification.domain-scope.coverage.sorted.tsv}\tableDatasetsNonFailedClassificationDomainScopeCoverageSorted

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.classification.secure.coverage.sorted.tsv}\tableDatasetsNonFailedClassificationSecureCoverageSorted

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.origin-redirects.coverage.sorted.tsv}\tableDatasetsNonFailedClassificationOriginRedirectsCoverageSorted

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.disconnect.categories.coverage.external.sorted.tsv}\tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSorted

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.disconnect.organizations.coverage.external.sorted.tsv}\tableDatasetsNonFailedDisconnectOrganizationsCoverageExternalSorted

\pgfplotstabletranspose[
	colnames from=Dataset
	]\tableTransposedDatasetsNonFailedRatioBucketsIsDisconnectMatchNormalizedCumulativeSorted{datasets.non-failed.ratio-buckets.is-disconnect-match.normalized.cumulative.sorted.tsv}

\pgfplotstabletranspose[
	colnames from=Dataset
	]\tableTransposedDatasetsNonFailedRatioBucketsDisconnectOrganizationsNormalizedCumulativeSorted{datasets.non-failed.ratio-buckets.disconnect-organizations.normalized.cumulative.sorted.tsv}

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.domains.ratios.sorted.tsv}\tableDatasetsNonFailedDomainsRatiosSorted

% Summaries
% TODO: see if it's possible to filter rows from tables loaded above
\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.request-status.coverage.origin.sorted.summary.tsv}\tableDatasetsRequestStatusCoverageOriginSortedSummary

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.classification.domain-scope.coverage.sorted.summary.tsv}\tableDatasetsNonFailedClassificationDomainScopeCoverageSortedSummary

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.origin-redirects.coverage.sorted.summary.tsv}\tableDatasetsNonFailedClassificationOriginRedirectsCoverageSortedSummary

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.classification.secure.coverage.sorted.summary.tsv}\tableDatasetsNonFailedClassificationSecureCoverageSortedSummary

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.disconnect.organizations.coverage.external.sorted.summary.tsv}\tableDatasetsNonFailedDisconnectOrganizationsCoverageExternalSortedSummary

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.disconnect.categories.coverage.external.sorted.summary.tsv}\tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSortedSummary


%%% Sweden https-www

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.classification.domain-scope.coverage.sorted.sweden-https-www.tsv}\tableDatasetsNonFailedClassificationDomainScopeCoverageSortedSwedenHttpsWww

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.disconnect.organizations.coverage.external.sorted.sweden-https-www.tsv}\tableDatasetsNonFailedDisconnectOrganizationsCoverageExternalSortedSwedenHttpsWww

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.disconnect.categories.coverage.external.sorted.sweden-https-www.tsv}\tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSortedSwedenHttpsWww

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.request-status.coverage.origin.sorted.sweden-https-www.tsv}\tableDatasetsRequestStatusCoverageOriginSortedSwedenHttpsWww

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.origin-redirects.coverage.sorted.sweden-https-www.tsv}\tableDatasetsNonFailedClassificationOriginRedirectsCoverageSortedSwedenHttpsWww

%%% Global https-www

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.classification.domain-scope.coverage.sorted.global-https-www.tsv}\tableDatasetsNonFailedClassificationDomainScopeCoverageSortedGlobalHttpsWww

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.disconnect.organizations.coverage.external.sorted.global-https-www.tsv}\tableDatasetsNonFailedDisconnectOrganizationsCoverageExternalSortedGlobalHttpsWww

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.disconnect.categories.coverage.external.sorted.global-https-www.tsv}\tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSortedGlobalHttpsWww

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.request-status.coverage.origin.sorted.global-https-www.tsv}\tableDatasetsRequestStatusCoverageOriginSortedGlobalHttpsWww

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.origin-redirects.coverage.sorted.global-https-www.tsv}\tableDatasetsNonFailedClassificationOriginRedirectsCoverageSortedGlobalHttpsWww

%%% Sweden http-www

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.classification.domain-scope.coverage.sorted.sweden-http-www.tsv}\tableDatasetsNonFailedClassificationDomainScopeCoverageSortedSwedenHttpWww

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.disconnect.organizations.coverage.external.sorted.sweden-http-www.tsv}\tableDatasetsNonFailedDisconnectOrganizationsCoverageExternalSortedSwedenHttpWww

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.disconnect.categories.coverage.external.sorted.sweden-http-www.tsv}\tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSortedSwedenHttpWww

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.request-status.coverage.origin.sorted.sweden-http-www.tsv}\tableDatasetsRequestStatusCoverageOriginSortedSwedenHttpWww

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.origin-redirects.coverage.sorted.sweden-http-www.tsv}\tableDatasetsNonFailedClassificationOriginRedirectsCoverageSortedSwedenHttpWww

%%% Global http-www

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.classification.domain-scope.coverage.sorted.global-http-www.tsv}\tableDatasetsNonFailedClassificationDomainScopeCoverageSortedGlobalHttpWww

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.disconnect.organizations.coverage.external.sorted.global-http-www.tsv}\tableDatasetsNonFailedDisconnectOrganizationsCoverageExternalSortedGlobalHttpWww

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.disconnect.categories.coverage.external.sorted.global-http-www.tsv}\tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSortedGlobalHttpWww

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.request-status.coverage.origin.sorted.global-http-www.tsv}\tableDatasetsRequestStatusCoverageOriginSortedGlobalHttpWww

\pgfplotstableread[
		format=file,
		col sep=tab,
	]{datasets.non-failed.origin-redirects.coverage.sorted.global-http-www.tsv}\tableDatasetsNonFailedClassificationOriginRedirectsCoverageSortedGlobalHttpWww


%%% Create tables on the fly

\newcommand{\scatterTableDatasetsNonFailedDisconnectCategoriesCoverageExternalSortedHttpHttpsWww}[4]{
	\pgfplotstableset{
		create on use/Dataset/.style={create col/copy column from table={#3}{Dataset}},%
		create on use/Category/.style={create col/set={#1}},%
		create on use/http-www/.style={create col/copy column from table={#3}{#1}},%
		create on use/https-www/.style={create col/copy column from table={#4}{#1}},%
	}

	\pgfplotstablenew[
		columns={
			Dataset,%
			Category,%
			http-www,%
			https-www%
		}
	]{\pgfplotstablegetrowsof{#3}}#2%
}

\newcommand{\createAdjustedTableDatasetsRequestStatusCoverageOriginRedirectSecuritySortedHttpsWww}[3]{
	\pgfplotstableset{
		create on use/Dataset/.style={create col/copy column from table={#2}{Dataset}},%
		create on use/2xx Raw/.style={create col/copy column from table={#2}{2xx}},%
		create on use/3xx Raw/.style={create col/copy column from table={#2}{3xx}},%
		create on use/3xx Sec Raw/.style={create col/copy column from table={#3}{Sec}},%
		create on use/3xx Mix sec Raw/.style={create col/copy column from table={#3}{Mix sec}},%
		create on use/3xx Insec Raw/.style={create col/copy column from table={#3}{Insec}},%
		create on use/3xx Mism Raw/.style={create col/copy column from table={#3}{Mism}},%
		create on use/3xx Final sec Raw/.style={create col/copy column from table={#3}{Final sec}},%
	}

	\pgfplotstablenew[
		columns={
			Dataset,%
			2xx Raw,%
			3xx Raw,%
			3xx Sec Raw,%
			3xx Mix sec Raw,%
			3xx Insec Raw,%
			3xx Mism Raw,%
			3xx Final sec Raw,%
			Total Scale,%
			2xx,%
			3xx Sec,%
			3xx Mix sec,%
			3xx Insec,%
			3xx Mism,%
			3xx Final sec%
		},
		create on use/Total Scale/.style={create col/expr={1/(\thisrow{2xx Raw}+\thisrow{3xx Raw})}},%
		create on use/2xx/.style={create col/expr={\thisrow{2xx Raw}*\thisrow{Total Scale}}},%
		create on use/3xx Sec/.style={create col/expr={\thisrow{3xx Raw}*\thisrow{3xx Sec Raw}*\thisrow{Total Scale}}},%
		create on use/3xx Mix sec/.style={create col/expr={\thisrow{3xx Raw}*\thisrow{3xx Mix sec Raw}*\thisrow{Total Scale}}},%
		create on use/3xx Insec/.style={create col/expr={\thisrow{3xx Raw}*\thisrow{3xx Insec Raw}*\thisrow{Total Scale}}},%
		create on use/3xx Mism/.style={create col/expr={\thisrow{3xx Raw}*\thisrow{3xx Mism Raw}*\thisrow{Total Scale}}},%
		create on use/3xx Final sec/.style={create col/expr={(\thisrow{2xx Raw}+\thisrow{3xx Raw}*\thisrow{3xx Final sec Raw})*\thisrow{Total Scale}}},%
	]{\pgfplotstablegetrowsof{#2}}#1%
}

\newcommand{\createAdjustedTableDatasetsRequestStatusCoverageOriginRedirectSecuritySortedHttpWww}[3]{
	\pgfplotstableset{
		create on use/Dataset/.style={create col/copy column from table={#2}{Dataset}},%
		create on use/3xx Raw/.style={create col/copy column from table={#2}{3xx}},%
		create on use/3xx Sec Raw/.style={create col/copy column from table={#3}{Sec}},%
		create on use/3xx Mix sec Raw/.style={create col/copy column from table={#3}{Mix sec}},%
		create on use/3xx Insec Raw/.style={create col/copy column from table={#3}{Insec}},%
		create on use/3xx Mism Raw/.style={create col/copy column from table={#3}{Mism}},%
		create on use/3xx Final sec Raw/.style={create col/copy column from table={#3}{Final sec}},%
	}

	\pgfplotstablenew[
		columns={
			Dataset,%
			3xx Raw,%
			3xx Sec Raw,%
			3xx Mix sec Raw,%
			3xx Insec Raw,%
			3xx Mism Raw,%
			3xx Final sec Raw,%
			Total Scale,%
			3xx Sec,%
			3xx Mix sec,%
			3xx Insec,%
			3xx Mism,%
			3xx Final sec%
		},
		create on use/Total Scale/.style={create col/expr={1/\thisrow{3xx Raw}}},%
		create on use/3xx Sec/.style={create col/expr={\thisrow{3xx Raw}*\thisrow{3xx Sec Raw}*\thisrow{Total Scale}}},%
		create on use/3xx Mix sec/.style={create col/expr={\thisrow{3xx Raw}*\thisrow{3xx Mix sec Raw}*\thisrow{Total Scale}}},%
		create on use/3xx Insec/.style={create col/expr={\thisrow{3xx Raw}*\thisrow{3xx Insec Raw}*\thisrow{Total Scale}}},%
		create on use/3xx Mism/.style={create col/expr={\thisrow{3xx Raw}*\thisrow{3xx Mism Raw}*\thisrow{Total Scale}}},%
		create on use/3xx Final sec/.style={create col/expr={\thisrow{3xx Raw}*\thisrow{3xx Final sec Raw}*\thisrow{Total Scale}}},%
	]{\pgfplotstablegetrowsof{#2}}#1%
}
