#LyX 2.1 created this file. For more info see http://www.lyx.org/
\lyxformat 474
\begin_document
\begin_header
\textclass report
\begin_preamble
\include{preamble}
\include{tableread}
\end_preamble
\use_default_options true
\begin_modules
logicalmkup
customHeadersFooters
\end_modules
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman default
\font_sans default
\font_typewriter default
\font_math auto
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100
\graphics default
\default_output_format pdf2
\output_sync 1
\bibtex_command default
\index_command default
\float_placement p
\paperfontsize default
\spacing single
\use_hyperref true
\pdf_title "Swedes Online: You Are More Tracked Than You Think"
\pdf_author "Joel Purra"
\pdf_subject "Master's Thesis measuring internet user tracking using third party web page resources"
\pdf_keywords "measurement, security, privacy, internet, web, http, https, tracking, domains, web browser, website retrieval, redirects, privacy enhancing technologies, online advertising, web analytics, content blocking, google, facebook, twitter, adblock, disconnect.me, pjantomjs, alexa, sweden"
\pdf_bookmarks true
\pdf_bookmarksnumbered true
\pdf_bookmarksopen true
\pdf_bookmarksopenlevel 1
\pdf_breaklinks true
\pdf_pdfborder true
\pdf_colorlinks false
\pdf_backref false
\pdf_pdfusetitle false
\papersize a4paper
\use_geometry false
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 1
\notefontcolor #808080
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 2
\tocdepth 1
\paragraph_separation indent
\paragraph_indentation default
\quotes_language english
\papercolumns 1
\papersides 2
\paperpagestyle fancy
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Title
Swedes Online: You Are More Tracked Than You Think
\end_layout

\begin_layout Author
Joel Purra
\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "mig@joelpurra.se"
type "mailto:"

\end_inset

, joepu444
\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "http://joelpurra.com/"

\end_inset


\begin_inset Newline newline
\end_inset

+46 70 352 1212
\begin_inset Newline newline
\end_inset


\begin_inset Newline newline
\end_inset

Niklas Carlsson
\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "nikca@ida.liu.se"
type "mailto:"

\end_inset


\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "https://www.ida.liu.se/~nikca/"

\end_inset


\end_layout

\begin_layout Date
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
versionandtoday
\end_layout

\end_inset


\end_layout

\begin_layout Right Header
Paper draft
\begin_inset Argument 1
status open

\begin_layout Plain Layout
Swedes Online: You Are More Tracked Than You Think
\end_layout

\end_inset


\end_layout

\begin_layout Left Header
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
slshape
\backslash
nouppercase{
\backslash
leftmark}
\end_layout

\end_inset


\begin_inset Argument 1
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
slshape
\backslash
nouppercase{
\backslash
leftmark}
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Abstract
When you are browsing websites, third-party resources record your online
 habits; such 
\emph on
tracking
\emph default
 can be considered an invasion of privacy.
 It was previously unknown how many third-party resources, trackers and
 tracker companies are present in the different classes of websites chosen:
 globally popular websites, random samples of .se/.dk/.com/.net domains and
 curated lists of websites of public interest in Sweden.
 The in-browser HTTP/HTTPS traffic was recorded while downloading over 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{150000}
\end_layout

\end_inset

 websites, allowing comparison of HTTPS adoption and third-party tracking
 within and across the different classes of websites.
\end_layout

\begin_layout Abstract
The data shows that known third-party resources including known trackers
 are present on 
\emph on
over 90%
\emph default
 of most classes, that third-party hosted 
\emph on
content
\emph default
 such as video, scripts and fonts make up a large portion of the known trackers
 seen on a typical website and that tracking is just as prevalent on 
\emph on
secure
\emph default
 as insecure sites.
\end_layout

\begin_layout Abstract
Observations include that Google is the most widespread tracker organization
 
\emph on
by far
\emph default
, that content is being served by known trackers may suggest that trackers
 are moving to providing services to the end user to 
\emph on
avoid being blocked
\emph default
 by privacy tools and ad blockers, and that the small difference in tracking
 between using HTTP and HTTPS connections may suggest that users are given
 a 
\emph on
false sense of privacy
\emph default
 when using HTTPS.
\end_layout

\begin_layout Chapter*
Acknowledgments
\end_layout

\begin_layout Section*
The Internet Infrastructure Foundation
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.iis.se/"

\end_inset


\end_layout

\end_inset

 (.SE)
\end_layout

\begin_layout Standard
.SE is also known as Stiftelsen för internetinfrastruktur (IIS).
\end_layout

\begin_layout Standard
The thesis this paper was based on was written in the office of -- and in
 collaboration with -- .SE, who graciously supported me with domain data
 and internet knowledge.
 Part of .SE’s research efforts include continuously analyzing internet infrastru
cture and usage in Sweden.
 .SE is an independent organization, responsible for the Swedish top level
 domain, and working for the benefit of the public that promotes the positive
 development of the internet in Sweden.
\end_layout

\begin_layout Section*
Domains, data and software
\end_layout

\begin_layout Standard
.SE (Patrik
\begin_inset space ~
\end_inset

Wallström, Staffan
\begin_inset space ~
\end_inset

Hagnell, Richard Isberg, Tobbe Carlsson, Anne-Marie Eklund-Löwinder, Erika
 Lund), DK Hostmaster A/S (Steen Vincentz Jensen, Lise Fuhr), Reach50/Webmie
 (Mika Wenell, Jyry Suvilehto), Alexa, Verisign.
 Disconnect.me, Mozilla.
 PhantomJS, jq, GNU Parallel, LyX.
 Thank you!
\end_layout

\begin_layout Section*
Tips, feedback, inspiration and help
\end_layout

\begin_layout Standard
Anton
\begin_inset space ~
\end_inset

Nilsson, Dwight Hunter, Peter Forsman, Linus Nordberg, Pamela Davidsson,
 Lennart Bonnevier, Isabelle Edlund, Amar Andersson, Per-Ola Mjömark, Elisabeth
 Nilsson, Mats Dufberg, Ana Rodriguez Garcia, Stanley Greenstein, Markus
 Bylund.
 Thank you!
\end_layout

\begin_layout Standard
And of course everyone I forgot to mention -- sorry and thank you!
\end_layout

\begin_layout Standard
\begin_inset CommandInset toc
LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Standard
\begin_inset FloatList table

\end_inset


\end_layout

\begin_layout Standard
\begin_inset FloatList figure

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
markboth{Nomenclature}{}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset nomencl_print
LatexCommand printnomenclature
set_width "custom"
width "20text%"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Content"
description "Information and data that is presented to the user. Includes text, images, video and sound."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Resource"
description "An entity external to the HTML page that requested it. Types of resources include images, video, audio, CSS, javascript and flash animations."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "External resource"
description "A resource downloaded from a domain other than the page that requested it was served from."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "External service"
description "A third party service that delives some kind of resource to the user's browser. The service itself can vary from showing additional information and content, to ads and hidden trackers.\\\\\\\\External services include file hosting services, CDNs, advertisting networks, statistics and analytics collectors, and third party content."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Tracker"
description "A resource external to the visited page, which upon access receives information about the user's system and the page that requested it.\\\\\\\\Basic information in the HTTP request to the resource URL includes user agent (browser vendor, type and version down to the patch level, operating system, sometimes hardware type) referer (the full URL of page that requested the resource), an etag (unique string identifying the data from a previous request to the same resource URL) and cookies (previously set by the same tracker)."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "CDN"
description "Content delivery network"

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Content delivery network"
description "(CDN) The speed at which data can be delivered is dependant on distance between the user and the server. To reduce latency and download times, a content delivery network places multiple servers with the same content in strategic locations, both geographic and network toplolgy wise, closer to groups of users.\\\\\\\\For example, a CDN could deploy servers in Europe, the US and Australia, and reduce loading speed by setting up the system to automatically use the closest location."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Domain name"
description "A human-readable way to navigate to a service on the internet: example.com. Often implicitly meaning FQDN. Domains are also used, for example, as logical entities in regards to security and privacy scopes on the web, often implemented as same-origin policies. As an example, HTTP cookies are bound to domain that set them."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Third-party content"
description "Content served by another organization than the organization serving the explicitly requested web page. Also see external resource."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Third-party service"
description "A service provided by an organization other than the explicitly requested service. Also see external service."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Web site"
description "A collection of web pages under the same organization or topic. Often all web pages on a domain is considered a site, but a single domain can also contain multiple sites."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Web service"
description "A function performed on the internet, and in this document specifically web sites with a specific purpose directed towards human users. This includes search engines, social networks, online messaging and email as well as content sites such as news sites and blogs."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Web browser"
description "Or browser. Software a user utilizes to retrieve, present and traverse information from the web."

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "URL"
description "Uniform Resource Locator"

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Uniform Resource Locator"
description "(URL) A standard to define the address to resources, mostly on the internet, for example http://joelpurra.com/projects/masters-thesis/"

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "HTTP"
description "Hypertext Transfer Protocol"

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "HTTPS"
description "Secure HTTP, where data is transfered encrypted."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Hypertext Transfer Protocol"
description "(HTTP) A protocol to transfer HTML and other web page resources across the internet."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Do Not Track"
description "(DNT) A HTTP header used to indicate that the server should not record and track the client's traffic and other data."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "DNT"
description "Do Not Track"

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "P3P"
description "Platform for Privacy Preferences (P3P) Project"

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Platform for Privacy Preferences Project"
description "(P3P) A W3C standard for HTTP where server responses are annotated with an encoded privacy policy, so the client can display it to the user. Work has been discontinued since 2006."

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol ".SE"
description "The Internet Infrastructure Foundation. An independent organization for the benefit of the public that promotes the positive development of the internet in Sweden. .SE is responsible for the .se country code top level domain."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol ".se"
description "The country code top level domain name for Sweden."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol ".dk"
description "The country code top level domain name for Denmark."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol ".com"
description "A generic top level domain. It has the greatest number of registered domain of all TLDs."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol ".net"
description "A generic top level domain."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "FQDN"
description "Fully qualified domain name"

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Fully qualified domain name"
description "(FQDN) A domain name specific enough to be used on the internet. Has at least a TLD and a second-level domain name - but oftentimes more depending on TLD rules and organizational units."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Top level domain"
description "(TLD) The last part of a domain name, such as .se or .com. Registration of TLDs is handled by ICANN."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "TLD"
description "Top level domain."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "gTLD"
description "Generic top level domain such as .com or .net."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "ccTLD"
description "A top level domain based on a country code, such as .se or .dk."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Primary domain"
description "For the thesis, the first non-public suffix part of a domain name has been labeled the primary domain. For example example.com.br has been labeled the primary domain for www.company-abc.com.br, as .com.br is a public suffix."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Subdomain"
description "A domain name that belongs to another domain name zone. For example service.example.net is a subdomain to example.net."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Superdomain"
description "For the thesis, domains in parent zones have been labeled superdomains to their subdomains, such as such as example.se being a superdomain to www.example.se."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Public suffix"
description "The part of a domain name that is unavilable for registrations, used for grouping. All TLDs are public suffixes, but some have one or more levels of public suffixes, such as .com.br for commercial domains in Brazil or .pp.se for privately owned personal domains (a public suffix which has been deprecated, but still exists)."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Zone"
description "A technical as well as administrative part of DNS. Each dot in a domain name represents another zone, from the implicit root zone to TLDs and privately owned zones -- which in turn can contain more privately controlled zones."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "SLD"
description "Second-level domain"

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "ccSLD"
description "Country-code second-level domain. A SLD that belongs to a country code TLD. A ccSLD is not for public use, which are required to register their domains on the third domain level."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Second-level domain"
description "(SLD) A domain that is directly below a TLD. Can be a domain registerable to the public, or a ccSLD."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Parked domain"
description "A domain that has been purchased from a domain name retailer, but only shows a placeholder message – usually an advertisement for the domain name retailer itself."

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Alexa"
description "A web traffic statistic service, owned by Amazon."

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "jq"
description "A tool and domain specific programming language to read and transform JSON data. See the software chapter."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "phantomjs"
description "Browser software used for automated web site browsing. See the software chapter."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "HAR"
description "HTTP Archive (HAR) format, used to store recorded HTTP metadata from a web page visit. See the software chapter."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "JavaScript Object Notation"
description "(JSON) A data format based on Javascript objects. Often used on the internet for data transfer. Used in this thesis as the basis for all data transformation."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "JSON"
description "JavaScript Object Notation"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "GOCS"
description "Government-owned corporations"

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Government-owned corporations"
description "(GOCS) State-owned corporations."

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "CDF"
description "Cumulative distribution function."

\end_inset


\begin_inset CommandInset nomenclature
LatexCommand nomenclature
symbol "Cumulative distribution function"
description "(CDF) In this thesis usually a graph which shows the ratio of a property as seen per domain on the x axis, with the cumulative ratio of domains which show this property on the y axis. The steeper the curve is above an x value range, the higher the ratio of domains which fall within the range."

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage cleardoublepage
\end_inset


\end_layout

\begin_layout Chapter
Introduction
\end_layout

\begin_layout Standard
How many companies are recording your online trail, and how much information
 does the average Swede leak while using popular .se websites? Many, and
 a lot -- more than you may think.
 Large organizations like Google, Facebook and Amazon are able to connect
 the dots you leave behind during everyday usage, and construct a 
\emph on
persona
\emph default
 that reflects you from their perspective.
 Have you told your family, friends or colleagues about your gambling addiction,
 your sex toy purchases, or your alcoholism? Even if you did not tell anyone
 your deepest secrets, these companies might conclude that they can put
 labels on you by looking at everything you do online.
 And now they are selling it as hard facts behind the scenes.
\end_layout

\begin_layout Standard
While browsing the web users are both actively and passively being 
\emph on
tracked
\emph default
 by multiple companies, for the purpose of building a persona for targeted
 advertising.
 Sometimes the data collection is visible, as in social network sites and
 questionnaires, but it is most common in the form of different kinds of
 external resources which may or may not serve a purpose other than keeping
 track of your every click.
 Secure connections between server and client help against passive data
 collection along the network path, but not against site owners allowing
 in-page trackers.
 Tracking code is installed on web pages that have adverts as well as those
 that do not -- the spread and reach of tracking across web pages and domains
 of different kinds increases the quality of the user data collected and
 inferred, making it more valuable for advertising purposes.
 With the extent of the use of trackers and other external resources largely
 unknown and ever evolving, what is already known raises privacy concerns
 -- data considered personal leak without the user's knowledge or explicit
 permission and end up in privately owned databases for further distribution.
 Data collection is the new wild west, and you are the new cattle.
\end_layout

\begin_layout Standard
This thesis uses large-scale measurements to characterize how different
 kinds of domains in Sweden and internationally use website resources.
 Front pages of approximately 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{150000}
\end_layout

\end_inset

 random .se, .dk, .com, .net domains and Swedish, Danish and Alexa's top domains
 were visited and their resources, including those dynamically loaded, recorded.
 Each domain was accessed both with insecure HTTP and secure HTTPS connections
 to provide a comparison.
 Resources were grouped by mime type, URL protocol, domain, if it matches
 the domain the request originated from and compared to lists of known trackers
 and organizations.
 The thesis makes three primary contributions:
\end_layout

\begin_layout Enumerate
Software for automated, repeatable retrieval and analysis of large amounts
 of websites has been developed, and released as open source (see Appendix
 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:Software"

\end_inset

).
 Datasets based on publicly available domain lists have been released for
 scientific scrutinization
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://joelpurra.com/projects/masters-thesis/"

\end_inset


\end_layout

\end_inset

.
 The data allows analysis of websites' HTTP/HTTPS requests including the
 use of resources internal versus external to the entry domain, which the
 most common confirmed tracker organizations are, what spread they have
 and how much the average internet user can expect to be tracked by visiting
 some of the most important and popular sites in Sweden, Denmark and worldwide.
 Downloading and analyzing additional/custom datasets is very easy.
\end_layout

\begin_layout Enumerate
HTTPS usage for different domains has been characterized from a Swedish
 perspective; adoption rates are compared between classes of domains within
 Sweden as well as against popular international domains (see Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Results-HTTP,-HTTPS-and-redirects"

\end_inset

).
 HTTPS adoption among globally popular websites (10-30%, 50% for the very
 top) and curated lists of Swedish websites (15-50%) is much higher than
 for random domains (less than 1%).
 This means that most websites in the world are susceptible to passive eavesdrop
ping anywhere along the network path between the client and the server.
 But even with HTTPS enabled, traffic data and personally identifiable informati
on is leaked through external resources and third-party trackers, which
 are just as prevalent on insecure HTTP as secure HTTPS enabled websites
 (see Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Results-Internal-and-external-requests"

\end_inset

 and 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Results-Tracker-detection"

\end_inset

).
 This means that a secure, encrypted connection protecting against eavesdropping
 doesn't automatically lead to 
\emph on
privacy
\emph default
 -- something which users might be lead to believe when it is called a 
\begin_inset Quotes eld
\end_inset

secure connection
\begin_inset Quotes erd
\end_inset

 as well as through the use of 
\begin_inset Quotes eld
\end_inset

security symbols
\begin_inset Quotes erd
\end_inset

 such as padlocks.
\end_layout

\begin_layout Enumerate
The use of 
\emph on
known
\emph default
 or 
\emph on
recognized
\emph default
 third-party trackers and other third-party (external) services for different
 classes of domains, has been analyzed.
 Using public lists of 
\emph on
recognized
\emph default
 tracker domains, we analyzed and compared the widespread adoption of these
 services across domains within Sweden, as well as internationally.
 The use of external resources is high among all classes of domains (see
 Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Results-Internal-and-external-requests"

\end_inset

).
 Websites using strictly internal resources are relatively few; less than
 7% of top sites, even less in most categories of curated lists of Swedish
 websites, but more common among random domains at 10-30%.
 This means most websites around the world have made an active choice to
 install external resources from third-party services, which means that
 users' traffic data and personal information is leaked (see Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Results-Tracker-detection"

\end_inset

).
 Most websites also have at least one 
\emph on
known
\emph default
 tracker present; 53-72% of random domains, 88-98% of top websites and 78-100%
 of websites in the Swedish curated lists.
\begin_inset Newline newline
\end_inset

The number of known tracker organizations present is interesting to look
 at, as a higher number means users have less control over where leaked
 data ends up 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Organizations-per-domain"

\end_inset

.
 Around 55% of random Swedish domains have 1-3 trackers, and about 5% have
 more than 3.
 Nearly 50% of global top sites load resources from 3 or more tracker organizati
ons, while about 5% load from more than 20 organizations.
 Half of the Swedish media websites load more than 6 known trackers; a single
 visit to the front page of each of the 27 investigated sites would leak
 information in over 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{3800}
\end_layout

\end_inset

 external requests 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Domain-and-request-counts"

\end_inset

 to at least 57 organizations 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Domain-and-organization-counts"

\end_inset

.
 This means that any guesswork in what types of articles individuals read
 would read in a printed newspaper is gone -- and with that probably the
 guesswork in exactly what kind of 
\emph on
personal opinions
\emph default
 these individuals hold.
\begin_inset Newline newline
\end_inset

It is clear that Google has the widest coverage by far -- Google trackers
 alone are present on 
\emph on
over 90%
\emph default
 of websites in over half of the datasets 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Google's-coverage-is-impressive"

\end_inset

.
 That being said, it is also hard to tell how many trackers are missed --
 Disconnect's blocking list 
\emph on
only detects 10%
\emph default
 of external primary domains as trackers for top website datasets 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Tracker-detection-effectiveness"

\end_inset

.
\end_layout

\begin_layout Chapter
Background
\end_layout

\begin_layout Standard
In everyday web browsing, browsers routinely access a lot of material from
 other domains or services than the one visited 
\begin_inset CommandInset citation
LatexCommand cite
key "Feldmann:2004:MEI:1028788.1028833"

\end_inset

.
 These external resources vary from content that the user explicitly want
 to obtain, to implicitly loaded third-party services, ads, and non-visible
 resources with the sole purpose of collecting user data and statistical
 material 
\begin_inset CommandInset citation
LatexCommand cite
key "Krishnamurthy:2006:CMC:1135777.1135829"

\end_inset

.
 All are downloaded on behalf of the user with no or few limitations, and
 oftentimes without the user's need, understanding and explicit consent.
 These external resources can all be seen as browsing habit trackers, whose
 knowledge and power increase with any additional visits to other domains
 or services loading the same resources 
\begin_inset CommandInset citation
LatexCommand cite
key "Malandrino:2013:PAI:2517840.2517868"

\end_inset

.
 While privacy is both hard to define as well as relative to perspective
 and context, there is a correlation between trackers and online privacy;
 more trackers means it becomes harder to control the flow of personal informati
on and get an overview of where data ends up 
\begin_inset CommandInset citation
LatexCommand cite
key "Smith:2011aa,Bylund:2013:978-91-87379-12-3:integritet"

\end_inset

.
\end_layout

\begin_layout Section
Trackers are a commercial choice
\begin_inset CommandInset label
LatexCommand label
name "sec:Trackers-are-a-commercial-choice"

\end_inset


\end_layout

\begin_layout Standard
While online privacy has been in the spotlight due to recently uncovered
 mass surveillance operations, the focus has been on national government
 intelligence agencies collecting information around the globe.
 Public worry regarding surveillance in Sweden is low.
 Only 9% of adult Swedish internet users say they worry to some degree about
 government surveillance, but at 20% twice as many worry about companies'
 surveillance -- a number that has been steadily rising from 11% in 2011
 
\begin_inset CommandInset citation
LatexCommand cite
key "Ahlgren:2014aa,Findahl:2014aa"

\end_inset

.
 Governments are able to intercept traffic data and metadata by, among several
 techniques, 
\emph on
covertly
\emph default
 hooking into the internet infrastructure and passively listening.
 Basic connection metadata can always be collected, but without secure connectio
ns between client and server, any detail in the contents of each request
 can be extracted.
\end_layout

\begin_layout Standard
In contrast, external resources are approved by and actively installed by
 site and service owners, and presented openly to users with basic technical
 skills and tools.
 Reasons can be technical, for example because distributing resources among
 systems improves performance 
\begin_inset CommandInset citation
LatexCommand cite
key "Krishnamurthy:2006:CMC:1135777.1135829,Krishnamurthy:2000:AFI:347319.346248"

\end_inset

.
 Other times it is because there are positive network effects in using a
 third-party online social network (OSN) to promote content and products.
 Ads are installed as a source of income.
 More and more commonly, allowing a non-visible tracker to be installed
 can also become a source of income -- data aggregation companies pay for
 access to users' data on the right site with the right quantity and quality
 of visitors.
 Because these external resources are used on behalf of the service, they
 are also loaded when end-to-end encryption with HTTPS is enabled for enhanced
 privacy and security.
 This encryption bypass gives these private trackers more information than
 possible with large-scale passive traffic interception, even when there
 is a security nullifying mixture of encrypted and unencrypted connections.
\end_layout

\begin_layout Section
What is known by trackers?
\end_layout

\begin_layout Standard
Depending on what activities a user performs online, different things can
 be inferred by trackers on sites where they are installed.
 For example, a tracker on a news site can draw conclusions about interests
 from content a user reads (or choses 
\emph on
not
\emph default
 to) by tagging articles with refined keywords and creating an interest
 graph 
\begin_inset CommandInset citation
LatexCommand cite
key "Kumar:2013:GBT:2522548.2523129"

\end_inset

.
 The range of taggable interests of course depend on the content of the
 news site.
 Private and sensitive information leaked to third-party sites during typical
 interaction with some of the most popular sites in the world include personal
 identification (full name, date of birth, email, ip address, geolocation)
 and sensitive information (sexual orientation, religious beliefs, health
 issues) 
\begin_inset CommandInset citation
LatexCommand cite
key "Malandrino:2013:PAI:2517840.2517868"

\end_inset

.
\end_layout

\begin_layout Standard
Social buttons, allowing users to share links with a simple click, are tracking
 users whether they are registered or not, logged in or not 
\begin_inset CommandInset citation
LatexCommand cite
key "Roosendaal:2010:likethis"

\end_inset

.
 They are especially powerful when the user is registered and logged in,
 combining the full self-provided details of the user with their browsing
 habits -- all within the bounds of the services' privacy policies agreed
 to by the user.
 Once a user has provided their personal information, it is no longer just
 the individual browser or device being tracked, but the actual 
\emph on
person
\emph default
 using it -- even after logging out 
\begin_inset CommandInset citation
LatexCommand cite
key "Kontaxis:2012:PSP:2362793.2362823,Krishnamurthy:2008:CPO:1397735.1397744"

\end_inset

.
 This direct association, as opposed to inferred, to the person also allows
 for tracking across devices where there is an overlap of services used.
\end_layout

\begin_layout Section
What is the information used for?
\begin_inset CommandInset label
LatexCommand label
name "sec:What-is-the-information-used-for"

\end_inset


\end_layout

\begin_layout Standard
Publishers reserve areas of their web pages for displaying different kinds
 and sizes of advertisements alongside content.
 Ads chosen for the site may be aligned with the content but it is more
 valuable the more is known about the visitors.
 Combining and aggregating information from past visitors means that more
 information can be assumed about future visitors, on a statistical basis,
 which will define the general audience of the site.
 To generate even more revenue per displayed ad, individual users are 
\emph on
targeted
\emph default
 with 
\emph on
personalized
\emph default
 ads depending on their specific personal data and browsing history 
\begin_inset CommandInset citation
LatexCommand cite
key "Gill:2013:BPF:2504730.2504768"

\end_inset

.
\end_layout

\begin_layout Standard
Indicators such as geographic location, hardware platform/browser combinations
 have been shown to result in 
\emph on
price steering
\emph default
 and 
\emph on
price discrimination
\emph default
 on some e-commerce websites 
\begin_inset CommandInset citation
LatexCommand cite
key "Hannak:2014:MPD:2663716.2663744,Mikians:2013:CSP:2535372.2535415"

\end_inset

.
 While the effects of a web-wide user tracking have not been broadly measured
 with regards to pricing in e-commerce, using a larger and broader portion
 of a user's internet history and contributions would be a logical step
 for online shopping, as it has been used to personalize web search results
 and social network update feeds 
\begin_inset CommandInset citation
LatexCommand cite
key "Dou:2007:LEA:1242572.1242651,Pariser:2011:filterbubble"

\end_inset

.
\end_layout

\begin_layout Standard
Social networks can use website tracking data about their users' to increase
 per-user advertising incomes by personalization, but they will try to keep
 most of the information to themselves 
\begin_inset CommandInset citation
LatexCommand cite
key "Saez-Trumper:2014:BCC:2660460.2660477,Aimeur:2013:SIP:2545118.2545186,Yuan:2013:WKY:2512938.2512945"

\end_inset

.
 There are also companies that only collect information for resale -- 
\emph on
data brokers
\emph default
 or 
\emph on
data aggregators
\emph default
 -- which thrive on combining data sources and package them as targeted
 information for other companies to consume
\begin_inset Foot
status open

\begin_layout Plain Layout
CBS 60 Minutes -- 
\emph on
The Data Brokers: Selling your personal information
\emph default
 
\begin_inset CommandInset href
LatexCommand href
target "http://www.cbsnews.com/news/the-data-brokers-selling-your-personal-information/"

\end_inset


\end_layout

\end_inset

.
 The market for tracking data resale is expected to grow, as the amount
 of data increases and quality improves.
 The Wall Street Journal investigated some of these companies and their
 offerings:
\end_layout

\begin_layout Quote
Some brokers categorize consumers as "Getting By," "Compulsive Online Gamblers"
 and "Zero Mobility" and advertise the lists as ideal leads for banks, credit-ca
rd issuers and payday and subprime lenders, according to a review of data
 brokers' websites.
 One company offers lists of "Underbanked Prime Prospects" broken down by
 race.
 Others include "Kaching! Let it Ride Compulsive Online Gamblers" and "Speedy
 Dinero," described as Hispanics in need of fast cash receptive to subprime
 credit offers.
\begin_inset Foot
status open

\begin_layout Plain Layout
Wall Street Journal -- 
\emph on
Data Brokers Come Under Fresh Scrutiny; Consumer Profiles Marketed to Lenders
\emph default
 
\begin_inset CommandInset href
LatexCommand href
target "http://online.wsj.com/news/articles/SB10001424052702303874504579377164099831516"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
How much does the average user know about external resources being trackers?
\end_layout

\end_inset


\end_layout

\begin_layout Chapter
Methodology
\end_layout

\begin_layout Standard
Emphasis for the thesis is on a technical analysis, producing aggregate
 numbers regarding domains and external resources.
 Social aspects and privacy concerns are considered out of scope.
\end_layout

\begin_layout Section
High level overview
\end_layout

\begin_layout Standard
Based on a list of domains, the front page of each domain is downloaded
 and parsed the way a user's browser would.
 The URL of each requested resource is extracted, and associated with the
 domain it was loaded from.
 This data is then classified in a number of ways, before being boiled down
 to statistics about the entire dataset.
 Lastly, these aggregates are compared between datasets.
 In the following sections we describe each of these steps in more detail.
 For yet more details of the methodology, we refer to Appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:Methodology-details"

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
To help the reader, explicit references of the form 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Domains"

\end_inset

 is used to refer to Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Domains"

\end_inset

 of Appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:Methodology-details"

\end_inset

.
\end_layout

\end_inset

.
 The software developed is described in Appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:Software"

\end_inset

 and the details of the results are presented in Appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:Detailed-Results"

\end_inset

.
\end_layout

\begin_layout Standard
The thesis is primarily written from a Swedish perspective.
 This is in part because .SE
\begin_inset Foot
status open

\begin_layout Plain Layout
This thesis was written in the office of The Internet Infrastructure Foundation
 (.SE), the .se TLD registry.
\end_layout

\end_inset

 has access to the full list of Swedish .se domains, and in part because
 of their previous work with the 
\emph on
.SE Health Status
\emph default
 reports 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:.SE-Health-Status"

\end_inset

.
 The reports focus on analyzing government, media, financial institutions
 and other nation-wide publicly relevant organization groups' domains, as
 they have been deemed important to Sweden and Swedes.
 This thesis incorporates those lists, but focus on only the associated
 websites.
\end_layout

\begin_layout Section
Domain categories
\begin_inset CommandInset label
LatexCommand label
name "sec:Domain-categories"

\end_inset


\end_layout

\begin_layout Description
Curated
\begin_inset space ~
\end_inset

lists The 
\emph on
.SE Health Status
\emph default
 reports use lists of approximately 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{1000}
\end_layout

\end_inset

 domains in the categories counties, domain registrars, financial services,
 government-owned corporations (GOCS), higher education, ISPs, media, municipali
ties, and public authorities 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:.SE-Health-Status-domains"

\end_inset

.
 The domains are deemed important to Swedes and internet operations/usage
 in Sweden.
\end_layout

\begin_layout Description
Top
\begin_inset space ~
\end_inset

lists Alexa's Top 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{1000000}
\end_layout

\end_inset

 sites 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Alexa-Top-1000000-sites"

\end_inset

 and Reach50 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Reach50-domains"

\end_inset

 are compiled from internet usage, internationally and in Sweden respectively.
 The Alexa top list is freely available and used in other research; four
 selections of the 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{1000000}
\end_layout

\end_inset

 domains were used -- top 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{10000}
\end_layout

\end_inset

, random 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{10000}
\end_layout

\end_inset

, all .se and all .dk domains.
\end_layout

\begin_layout Description
Random
\begin_inset space ~
\end_inset

zone
\begin_inset space ~
\end_inset

lists To get snapshot of the status of general sites on the web, random
 selections directly from the .se 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Random-.se-domains"

\end_inset

, .dk 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Random-.dk-domains"

\end_inset

, .com and .net 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Random-.com,-.net-domains"

\end_inset

 TLD zones were used.
 The largest set was 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{100000}
\end_layout

\end_inset

 .se domains; 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{10000}
\end_layout

\end_inset

 domains each from .dk, .com and .net were also used.
\end_layout

\begin_layout Standard
Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Domain-lists-in-use"

\end_inset

 summarizes the domain lists and samples from each of theses lists used
 in the thesis.
 More details on each sublist is provided in Appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:Methodology-details"

\end_inset

.
 However, at a high level we categorize the lists in three main categories.
 In total there are more than 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{156000}
\end_layout

\end_inset

 domains considered.
\end_layout

\begin_layout Standard
\begin_inset Float table
placement p
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtable{domains.datasets.tsv}{}{display columns/0/.style={string type, column
 type=l}, display columns/1/.style={string type, column type=l}, display
 columns/3/.style={string type, column type=l}}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:Domain-lists-in-use"

\end_inset

Domain lists in use
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
We note that it is incorrect to assume that domain ownership is always based
 on second-level domains, such as iis.se or joelpurra.com.
 Not all TLDs' second-level domains are open for registration to the public;
 examples include the Brazilian top level domain 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
.br
\end_layout

\end_inset

, which only allows commercial registrations under 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
.com.br
\end_layout

\end_inset

.
 There is a set of such 
\emph on
public suffixes
\emph default
 used by browser vendors to implement domain-dependent security measures,
 such as preventing super-cookies 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Public-suffix-list"

\end_inset

.
 The list has been incorporated into this thesis as a way to classify 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Public-Suffix-List-classification"

\end_inset

 and group domains such as 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
company-abc.com.br
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
def-company.com.br
\end_layout

\end_inset

 as separate entities, instead of incorrectly seeing them as simple subdomains
 of the public suffix 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
.com.br
\end_layout

\end_inset

 -- technically a second-level domain.
\end_layout

\begin_layout Standard
For the thesis, the shortest non-public suffix part of a domain has been
 labeled the primary domain.
 The domain 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
example.com.br
\end_layout

\end_inset

 is the primary domain for 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
machine100.services.example.com.br
\end_layout

\end_inset

, as 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
.com.br
\end_layout

\end_inset

 is a public suffix.
 The term superdomain has also been used for the opposite of subdomain;
 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
example.org
\end_layout

\end_inset

 is a superdomain of 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
www.example.org
\end_layout

\end_inset

.
\end_layout

\begin_layout Section
Capturing tracker requests
\begin_inset CommandInset label
LatexCommand label
name "sec:Capturing-tracker-requests"

\end_inset


\end_layout

\begin_layout Standard
One assumption is that all resources external to the initially requested
 (origin) domain can act as trackers, even for static (non-script, non-executabl
e) resources with no capabilities to dynamically survey the user's browser,
 collecting data and tracking users across domains using for example the
 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
referer
\end_layout

\end_inset

 (sic) HTTP header 
\begin_inset CommandInset citation
LatexCommand cite
key "Krishnamurthy:2006:CMC:1135777.1135829"

\end_inset

.
 While there are lists of known trackers, used by browser privacy tools,
 they are not 100% effective 
\begin_inset CommandInset citation
LatexCommand cite
key "Malandrino:2013:PAI:2517840.2517868,Krishnamurthy:2006:CMC:1135777.1135829"

\end_inset

 due to not being complete, always up to date or accurate.
 Lists are instead used to emphasize those external resources as 
\emph on
confirmed
\emph default
 and 
\emph on
recognized
\emph default
 trackers.
\end_layout

\begin_layout Standard
Resources have not been blocked in the browser during website retrieval,
 but have been matched by URL against a third-party list in the classification
 step 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect.me-classification"

\end_inset

 of the data analysis.
 This way trackers dynamically triggering additional requests have also
 been recored, which can make a difference if they access another domain
 or another organization's trackers in the process.
\end_layout

\begin_layout Standard
The tracker list of choice is the one used in the privacy tool Disconnect.me,
 where it is used to block external requests to (most) known tracker domains
 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect's-blocking-list"

\end_inset

.
 It consists of 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{2149}
\end_layout

\end_inset

 domains, each belonging to one of 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{980}
\end_layout

\end_inset

 organizations and five categories -- see Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Disconnect's-categories"

\end_inset

 for the number of domains and organizations per category.
 The domain level blocking fits well with the thesis' internal versus external
 resource reasoning.
 Because domains are linked to organizations as well as broadly categorized,
 blocking aggregate counts and coverage can form a bigger picture.
\end_layout

\begin_layout Standard
\begin_inset Float table
placement p
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtable{disconnect.categories.tsv}{}{display columns/0/.style={string type,
 column type=l}}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:Disconnect's-categories"

\end_inset

Disconnect's categories
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Not all domains in the list are treated the same by Disconnect.me; despite
 being listed as known trackers, the content category 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-Content"

\end_inset

 is not blocked by default in order to not disturb the normal user experience
 too much.
 Most organizations are only associated with one domain, but some organizations
 have more than one domain 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-Organizations-in-more-than-one-category"

\end_inset

.
 Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Domains-per-organization"

\end_inset

 shows the number of organizations (out of the 980 organizations) that have
 a certain number of tracker domains (x axis).
 We see that 47% (459 of 980) have at least two domains listed by Disconnect.me.
 Google (rightmost point) alone has 271 domains and Yahoo has 71.
 Some organizations have their domains categorized in more than one category,
 as shown in detail in Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Organizations-in-more-than-one-category"

\end_inset

.
 Due to the relaxed blocking of the content category this can provide a
 way to track users despite being labeled a tracker organization.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement p
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{tikzpicture}
\end_layout

\begin_layout Plain Layout


\backslash
begin{loglogaxis}[
\end_layout

\begin_layout Plain Layout

	xlabel=Domains,
\end_layout

\begin_layout Plain Layout

	ylabel=Organizations,
\end_layout

\begin_layout Plain Layout

	width=
\backslash
textwidth,
\end_layout

\begin_layout Plain Layout

	height=0.5*
\backslash
textwidth,
\end_layout

\begin_layout Plain Layout

	log ticks with fixed point,
\end_layout

\begin_layout Plain Layout

	xmin=0.7,
\end_layout

\begin_layout Plain Layout

	ymin=0.7,
\end_layout

\begin_layout Plain Layout

	enlarge x limits=upper,
\end_layout

\begin_layout Plain Layout

	enlarge y limits=upper,
\end_layout

\begin_layout Plain Layout

	xtick={1,2,3,4,10,32,40,71,271},
\end_layout

\begin_layout Plain Layout

	ytick=data,
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout


\backslash
addplot[
\end_layout

\begin_layout Plain Layout

		ybar,
\end_layout

\begin_layout Plain Layout

		bar width=3pt,
\end_layout

\begin_layout Plain Layout

		thick,
\end_layout

\begin_layout Plain Layout

		fill=black,
\end_layout

\begin_layout Plain Layout

	]
\end_layout

\begin_layout Plain Layout

	table[x=Domains per organization,y=Organizations]
\end_layout

\begin_layout Plain Layout

	
\backslash
tableDisconnectDomainsPerOrganization;
\end_layout

\begin_layout Plain Layout


\backslash
end{loglogaxis}
\end_layout

\begin_layout Plain Layout


\backslash
end{tikzpicture}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Domains-per-organization"

\end_inset

Domains per organization
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
placement p
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtable{disconnect.organizations-in-more-than-one-category.tsv}{}{string
 replace*={true}{x}, string replace*={false}{}, display columns/0/.style={string
 type, column type=l}, display columns/2/.style={string type, column type=c},
 display columns/3/.style={string type, column type=c}, display columns/4/.style={
string type, column type=c}, display columns/5/.style={string type, column
 type=c}, display columns/6/.style={string type, column type=c}}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:Organizations-in-more-than-one-category"

\end_inset

Organizations in more than one category
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
While cookies used for tracking have been a concern for many, they are not
 necessary in order to identify most users upon return, even uniquely on
 a global level 
\begin_inset CommandInset citation
LatexCommand cite
key "Eckersley2009unique"

\end_inset

.
 Cookies have not been considered to be an indicator of tracking, as it
 can be assumed that a combination of other server and client side techniques
 can achieve the same goal as a normal tracking cookie 
\begin_inset CommandInset citation
LatexCommand cite
key "Acar:2014:WNF:2660267.2660347"

\end_inset

.
\end_layout

\begin_layout Section
Data collection
\end_layout

\begin_layout Standard
The lists of domains have been used as input to har-heedless, a tool specificall
y written for this thesis 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:har-heedless"

\end_inset

.
 Using the headless
\begin_inset Foot
status open

\begin_layout Plain Layout
The browser does not have a visible window, as it is built for automation.
\end_layout

\end_inset

 browser phantomjs, the front page of each domain has been accessed and
 processed the way a normal browser would 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Software-considerations"

\end_inset

.
 HTTP/HTTPS traffic metadata such as requested URLs and their HTTP request/respo
nse headers have been recorded in the HTTP Archive (HAR) data format 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:HTTP-Archive-(HAR)-format"

\end_inset

.
\end_layout

\begin_layout Standard
In order to make comparisons between insecure HTTP and secure HTTPS, domains
 have been accessed using both protocols.
 As websites traditionally have been hosted on the www subdomain, not all
 domains have been configured to respond to HTTP requests to the primary
 domain -- thus both the added www prefix and no added prefix have been
 accessed.
 This means four variations for each domain in the domain lists, quadrupling
 the number of accesses 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Dataset-variations"

\end_inset

 to over 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{600000}
\end_layout

\end_inset

.
 List variations have been kept separate; downloaded and analyzed as different
 datasets 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:High-level-summary"

\end_inset

.
\end_layout

\begin_layout Standard
Multiple domains have been retrieved in parallel 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Parallelizing-downloads"

\end_inset

, with adjustable parallelism to fit the computer machine's capacity 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:System-load-during-downloads"

\end_inset

.
 To reduce the risk of intermittent errors -- either in software, on the
 network or in the remote system -- each failed access has been retried
 up to two times 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Failed-domains"

\end_inset

.
\end_layout

\begin_layout Standard
Details about website and resource retrieval can be found in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Retrieving-websites-and-resources"

\end_inset

.
\end_layout

\begin_layout Section
Data analysis and validation
\end_layout

\begin_layout Standard
With HAR data in place, each domain list variation is analyzed as a single
 dataset by the purpose-built har-dulcify 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:har-dulcify"

\end_inset

.
 It uses the command line JSON processor jq 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:jq"

\end_inset

 to transform the JSON-based HAR data to formats tailored to analyze specific
 parts of each domain and their HTTP requests/responses.
\end_layout

\begin_layout Standard
Data extracted includes URL, HTTP status, mime-type, referer and redirect
 values -- both for the origin domain's front page and any resources requests
 by it 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Extracting-HAR-format-parts"

\end_inset

.
 Each piece of data is then expanded, to simplify further classification
 and extraction of individual bits of information; URLs are split into component
s such as scheme (protocol) and host (domain), the status is labeled by
 status group and the mime-type split into type and encoding 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Expanding-parts"

\end_inset

.
\end_layout

\begin_layout Standard
Once data has been extracted and expanded, there are three classification
 steps.
 The first loads the public suffix list and matches domains against it,
 in order to separate the FQDN into public suffixes, private prefixes and
 extract the primary domain 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Public-Suffix-List-classification"

\end_inset

.
 The primary domain, which is the first non-public suffix match, or the
 shortest private suffix, is used as one of the basic classifications; is
 an HTTP request made to a domain with the same primary domain as the origin
 domain's primary domain? Other basic classifications 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Basic-classification"

\end_inset

 compare the origin domain with each requested resource's URL, to see if
 they are made to the same domain, a subdomain or a superdomain.
 Same domain, subdomain, superdomain and same primary domain requests often
 overlap in their classification -- collectively they are called internal
 requests.
 Any request not considered an internal request is an external request --
 which is one of the fundamental ideas behind the thesis' result grouping
 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Internal-versus-external"

\end_inset

.
 Mime-types are counted and grouped, to show differences in resource usage
 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Content-type-group-coverage"

\end_inset

.
 To get an overview of domain groups, their primary domains and public suffixes
 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Public-suffix-coverage"

\end_inset

 are also kept.
 Another fundamental distinction is also wether a request is secure -- using
 the HTTPS protocol -- or insecure.
 Finally, Disconnect's blocking list 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Capturing-tracker-requests"

\end_inset

 is mixed in, to be able to potentially classify each requests' domain as
 a known tracker 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect.me-classification"

\end_inset

, which includes a mapping to categories and organizations 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Disconnect's-blocking-list-matches"

\end_inset

.
\end_layout

\begin_layout Standard
After classification has completed, numbers are collected across the dataset's
 domains 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Analysis"

\end_inset

.
 Counts are summed up per domain 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Domain-and-request-counts"

\end_inset

, but also reduced to boolean values indicating if a request matches a certain
 classification property or primary/tracker domain, so that a single domain
 making an excessive number of requests would not skew numbers aggregated
 across domains.
 This allows domain coverage calculations, meaning on what proportion of
 domains a certain value is present.
\end_layout

\begin_layout Standard
Most of the results presented in the thesis report are based on non-failed
 origin domains.
 Non-failed means that the initial HTTP request to the domain's front page
 returned a proper HTTP status code, even if it was not indicative of a
 complete success 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Failed-versus-non-failed"

\end_inset

.
 Subsequent requests made while loading the front pages were grouped into
 unfiltered, only internal and only external requests 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Internal-versus-external"

\end_inset

.
 The analysis is therefore split into six versions 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:aggregate/analysis.sh"

\end_inset

, although not all of them are interesting for the end results.
\end_layout

\begin_layout Standard
Apart from these general aggregates, har-dulcify allows specific questions/queri
es to be executed against any of the steps from HAR data to the complete
 aggregates.
 This way very specific questions 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Questions"

\end_inset

, including Google Tag Manager implications 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Google-Tag-Manager"

\end_inset

 and redirect chain statistics 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:HTTP,-HTTPS-and-redirects"

\end_inset

, can be answered based using the input which fits best.
 There are also multiset scripts, collecting values from several or all
 72 datasets at once.
 Their output is the basis for most of the detailed results' tables and
 graphs; see Appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:Detailed-Results"

\end_inset

.
\end_layout

\begin_layout Standard
See also analysis methodology details in Appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Analyzing-resources"

\end_inset

.
\end_layout

\begin_layout Section
High level summary of datasets
\begin_inset CommandInset label
LatexCommand label
name "sec:High-level-summary"

\end_inset


\end_layout

\begin_layout Standard
Domains lists chosen for this thesis come in three major categories -- top
 lists, curated lists and random selection from zone files (Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Domain-categories"

\end_inset

 and Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Domain-lists-in-use"

\end_inset

, Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Domains"

\end_inset

).
 While the top lists and curated lists are assumed to primarily contain
 sites with staff or enthusiasts to take care of them and make sure they
 are available and functioning, the domain lists randomly extracted from
 TLD zones might not.
 Results (Chapter 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:Results"

\end_inset

, Appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:Detailed-Results"

\end_inset

) seem to fall into groups of non-random and randomly selected domains --
 and result discussions often group them as such.
\end_layout

\begin_layout Standard
Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:TLDs-in-dataset-in-use"

\end_inset

 shows the top TLDs in the list of unique domains; while random TLD samples
 of course come from a single TLD, top lists are mixed.
 Looking at the complete dataset selection, the gTLD .org, ccTLDs .ru and
 .de are about the same size.
 This list can be compared to the per-TLD (or technically public suffix)
 results in Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Public-suffix-coverage"

\end_inset

, which shows the coverage of TLDs for external requests per dataset.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtable{domains.tlds.tsv}{}{display columns/2/.style={string type, column
 type=l}}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:TLDs-in-dataset-in-use"

\end_inset

TLDs in dataset in use
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
The curated 
\emph on
.SE Health Status
\emph default
 domain categories in Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:.SE-Health-Status-categories"

\end_inset

 show that the number of domains per category is significantly lower than
 the top lists and random domains.
 This puts a limit on the certainty with which conclusions can be drawn,
 but still serves a purpose in that the categories often show different
 characteristics.
\end_layout

\begin_layout Standard
The most interesting category is the media category, as it is the most extreme
 example in terms of requests per domain and tracking 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Requests-per-domain-and-ratios"

\end_inset

.
 While the thesis is limited to the front pages of each domain 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Limitations"

\end_inset

, it would be interesting to see if users are still tracked after logging
 in to financial websites 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Internal-versus-external"

\end_inset

.
 It is also interesting to see how public authorities, government, county
 and municipality websites include trackers from foreign countries 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Domain-and-organization-counts"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtable{domains.se-health-status.tsv}{}{display columns/0/.style={string type,
 column type=l}, display columns/3/.style={string type, column type=l}}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout

\emph on
\begin_inset CommandInset label
LatexCommand label
name "tab:.SE-Health-Status-categories"

\end_inset

.SE Health Status
\emph default
 domain categories
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Limitations
\begin_inset CommandInset label
LatexCommand label
name "sec:Limitations"

\end_inset


\end_layout

\begin_layout Standard
With lists of domains as input, this thesis only looks at the front page
 of domains.
 While others have spidered entire websites from the root to find, for example,
 a specific group of external services 
\begin_inset CommandInset citation
LatexCommand cite
key "Vapen:2014aa"

\end_inset

, this is an overview of all resources.
 The front page is assumed to contain many, if not most, of the different
 types used on a domain.
 Analysis has mostly been performed on each predefined domain list as a
 whole, but dynamic -- and perhaps iterative -- re-grouping of domain based
 on results could improve accuracy, understanding and crystallize details.
 It would also be of interest to build a graph of domains and interconnected
 services, to visualize potential information sharing between them 
\begin_inset CommandInset citation
LatexCommand cite
key "Acar:2014:WNF:2660267.2660347"

\end_inset

.
\end_layout

\begin_layout Chapter
Results
\begin_inset CommandInset label
LatexCommand label
name "chap:Results"

\end_inset


\end_layout

\begin_layout Standard
This chapter presents the main results, exemplified primarily by four datasets
 in their HTTP-www and HTTPS-www variations; Alexa's top 10k websites, Alexa's
 top .se websites, .se 100k random domains and Swedish municipalities.
 Some result highlights from Swedish top/curated datasets, random .se domains
 and findings from other domains in different categories are presented in
 the table below.
 Supplementary results and additional details are provided in Appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:Detailed-Results"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtablewide{results-summary.tsv}{Results summary}{}{every nth row={1}{before
 row/.add={
\backslash
addlinespace[0pt]
\backslash
midrule
\backslash
addlinespace[0pt]}{}}, display columns/0/.style={string type, column type=t},
 display columns/1/.style={string type, column type=|t|}, display columns/2/.style
={string type, column type=t}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{tikzpicture}
\end_layout

\begin_layout Plain Layout


\backslash
begin{groupplot}[
\end_layout

\begin_layout Plain Layout

	group style={
\end_layout

\begin_layout Plain Layout

		group size=3 by 1,
\end_layout

\begin_layout Plain Layout

		horizontal sep=8pt,
\end_layout

\begin_layout Plain Layout

	},
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
nextgroupplot[
\end_layout

\begin_layout Plain Layout

	title=(a) Origin HTTP response codes,
\end_layout

\begin_layout Plain Layout

	allDatasetsStackedXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbarMiniResults,
\end_layout

\begin_layout Plain Layout

	yticklabels={},
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsRequestStatusCoverageOriginSortedSummary}{2xx}{2xx}{green}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsRequestStatusCoverageOriginSortedSummary}{3xx}{3xx}{yellow}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsRequestStatusCoverageOriginSortedSummary}{(null)}{(null)}{red}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
nextgroupplot[
\end_layout

\begin_layout Plain Layout

	title=(b) Origin redirects,
\end_layout

\begin_layout Plain Layout

	allDatasetsStackedXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbarMiniResults,
\end_layout

\begin_layout Plain Layout

	yticklabels={},
\end_layout

\begin_layout Plain Layout

	legend columns=2,
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationOriginRedirectsCoverageSortedSummary}{Sec}{S
ecure}{green}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationOriginRedirectsCoverageSortedSummary}{Mix
 sec}{Mixed}{yellow}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationOriginRedirectsCoverageSortedSummary}{Insec}
{Insecure}{orange}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationOriginRedirectsCoverageSortedSummary}{Mism}{
Mismatch}{lightgray}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
nextgroupplot[
\end_layout

\begin_layout Plain Layout

	title=(c) Resource security,
\end_layout

\begin_layout Plain Layout

	allDatasetsStackedXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbarMiniResults,
\end_layout

\begin_layout Plain Layout

	yticklabels={alexa.top.10k-hw,alexa.top.10k-sw,alexa.top.se-hw,alexa.top.se-sw,se.r.100k-
hw,se.r.100k-sw,se.hs.municip-hw,se.hs.municip-sw},
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationSecureCoverageSortedSummary}{All sec}{Secure
}{green}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationSecureCoverageSortedSummary}{Mix sec}{Mixed}
{yellow}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationSecureCoverageSortedSummary}{All insec}{Inse
cure}{orange}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
end{groupplot}
\end_layout

\begin_layout Plain Layout


\backslash
end{tikzpicture}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Result-selection-http-codes-redirects-secure"

\end_inset


\begin_inset Argument 1
status open

\begin_layout Plain Layout
HTTP status, redirects, resource security
\end_layout

\end_inset

Selection of HTTP-www and HTTPS-www variations from Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:HTTP-status-codes"

\end_inset

, 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:secure-mixed-insecure-redirects"

\end_inset

 and 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:secure-mixed-insecure-resources"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{tikzpicture}
\end_layout

\begin_layout Plain Layout


\backslash
begin{groupplot}[
\end_layout

\begin_layout Plain Layout

	group style={
\end_layout

\begin_layout Plain Layout

		group size=3 by 1,
\end_layout

\begin_layout Plain Layout

		horizontal sep=8pt,
\end_layout

\begin_layout Plain Layout

	},
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
nextgroupplot[
\end_layout

\begin_layout Plain Layout

	title=(a) Resource distribution,
\end_layout

\begin_layout Plain Layout

	allDatasetsStackedXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbarMiniResults,
\end_layout

\begin_layout Plain Layout

	yticklabels={},
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationDomainScopeCoverageSortedSummary}{Internal}{
Internal}{green}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationDomainScopeCoverageSortedSummary}{Mixed}{Mix
ed}{yellow}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationDomainScopeCoverageSortedSummary}{External}{
External}{orange}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
nextgroupplot[
\end_layout

\begin_layout Plain Layout

	title=(b) Tracker categories,
\end_layout

\begin_layout Plain Layout

	allDatasetsMultiXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbarMiniResults,
\end_layout

\begin_layout Plain Layout

	allDatasetsMultiXbarPart2,
\end_layout

\begin_layout Plain Layout

	bar width=2.5pt,
\end_layout

\begin_layout Plain Layout

	yticklabels={},
\end_layout

\begin_layout Plain Layout

	legend columns=3,
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSortedSummary}{Any}{An
y}{black!20!white}{bar shift=0pt, bar width=8.5pt}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSortedSummary}{Disconn
ect}{Disconnect}{orange!80!white}{ultra thin, bar shift=3pt,}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSortedSummary}{Content
}{Content}{olive!80!white}{ultra thin, bar shift=1.5pt,}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSortedSummary}{Adverti
sing}{Advertising}{teal!80!white}{ultra thin, bar shift=0pt,}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSortedSummary}{Analyti
cs}{Analytics}{purple!80!white}{ultra thin, bar shift=-1.5pt,}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSortedSummary}{Social}
{Social}{brown!80!white}{ultra thin, bar shift=-3pt,}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
nextgroupplot[
\end_layout

\begin_layout Plain Layout

	title=(c) Top organizations,
\end_layout

\begin_layout Plain Layout

	allDatasetsMultiXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbarMiniResults,
\end_layout

\begin_layout Plain Layout

	allDatasetsMultiXbarPart2,
\end_layout

\begin_layout Plain Layout

	bar width=2.5pt,
\end_layout

\begin_layout Plain Layout

	yticklabels={alexa.top.10k-hw,alexa.top.10k-sw,alexa.top.se-hw,alexa.top.se-sw,se.r.100k-
hw,se.r.100k-sw,se.hs.municip-hw,se.hs.municip-sw},
\end_layout

\begin_layout Plain Layout

	legend columns=3,
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSortedSummary}{Any}{An
y}{black!20!white}{bar shift=0pt, bar width=8.5pt}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectOrganizationsCoverageExternalSortedSummary}{Goog
le}{Google}{red!90!white}{ultra thin, bar shift=2pt,}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectOrganizationsCoverageExternalSortedSummary}{Face
book}{Facebook}{blue!90!white}{ultra thin, bar shift=0pt,}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectOrganizationsCoverageExternalSortedSummary}{Twit
ter}{Twitter}{cyan!70!white}{ultra thin, bar shift=-2pt,}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
addplot+[
\end_layout

\begin_layout Plain Layout

		stack plots=false,
\end_layout

\begin_layout Plain Layout

		only marks,
\end_layout

\begin_layout Plain Layout

		mark=x,
\end_layout

\begin_layout Plain Layout

		mark size=3pt,
\end_layout

\begin_layout Plain Layout

		fill=white,
\end_layout

\begin_layout Plain Layout

		draw=black,
\end_layout

\begin_layout Plain Layout

		semithick,
\end_layout

\begin_layout Plain Layout

		fill opacity=1,
\end_layout

\begin_layout Plain Layout

		update limits=false,
\end_layout

\begin_layout Plain Layout

		line legend,
\end_layout

\begin_layout Plain Layout

	]
\end_layout

\begin_layout Plain Layout

	table[y=Dataset,x=Disconnect]
\end_layout

\begin_layout Plain Layout

	
\backslash
tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSortedSummary;
\end_layout

\begin_layout Plain Layout


\backslash
addlegendentry{Disconnect}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
end{groupplot}
\end_layout

\begin_layout Plain Layout


\backslash
end{tikzpicture}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Result-selection-internal-external-insecure-tracker-categories-top-organizations"

\end_inset


\begin_inset Argument 1
status open

\begin_layout Plain Layout
Internal/external resources, tracker categories and top tracker organizations
\end_layout

\end_inset

Selection of HTTP-www and HTTPS-www variations from Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:internal-mixed-external-resources"

\end_inset

, 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:top-categories"

\end_inset

 and 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:google-facebook-twitter-coverage"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{tikzpicture}
\end_layout

\begin_layout Plain Layout


\backslash
begin{groupplot}[
\end_layout

\begin_layout Plain Layout

	group style={
\end_layout

\begin_layout Plain Layout

		group size=3 by 1,
\end_layout

\begin_layout Plain Layout

		horizontal sep=8pt,
\end_layout

\begin_layout Plain Layout

	},
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
nextgroupplot[
\end_layout

\begin_layout Plain Layout

	title=(a) Internal resources,
\end_layout

\begin_layout Plain Layout

	datasetsCDF,
\end_layout

\begin_layout Plain Layout

	datasetsCDFMiniResults,
\end_layout

\begin_layout Plain Layout

	xlabel=Ratio of internal resources,
\end_layout

\begin_layout Plain Layout

	ylabel=Ratio of domains,
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

	
\backslash
CDFPlotFromDefaultDatasetsFile{datasets.non-failed.ratio-buckets.is-internal-domain.
normalized.cumulative.sorted.tsv}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
legend{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
nextgroupplot[
\end_layout

\begin_layout Plain Layout

	title=(b) Secure resources,
\end_layout

\begin_layout Plain Layout

	datasetsCDF,
\end_layout

\begin_layout Plain Layout

	datasetsCDFMiniResults,
\end_layout

\begin_layout Plain Layout

	xlabel=Ratio of secure resources,
\end_layout

\begin_layout Plain Layout

	%ylabel=Ratio of domains,
\end_layout

\begin_layout Plain Layout

	yticklabels={},
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

	
\backslash
CDFPlotFromDefaultDatasetsFile{datasets.non-failed.ratio-buckets.is-secure.normalize
d.cumulative.sorted.tsv}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
legend{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
nextgroupplot[
\end_layout

\begin_layout Plain Layout

	title=(c) Disconnect's organizations,
\end_layout

\begin_layout Plain Layout

	datasetsCDF,
\end_layout

\begin_layout Plain Layout

	datasetsOccurances,
\end_layout

\begin_layout Plain Layout

	datasetsOccurancesMiniResults,
\end_layout

\begin_layout Plain Layout

	xlabel=Number of organizations,
\end_layout

\begin_layout Plain Layout

	%ylabel=Ratio of domains,
\end_layout

\begin_layout Plain Layout

	yticklabels={},
\end_layout

\begin_layout Plain Layout

	legend columns=1,
\end_layout

\begin_layout Plain Layout

	legend style={at={(1.025,.5)}, anchor=west},
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

	
\backslash
CDFPlotFromDefaultDatasets{
\backslash
tableTransposedDatasetsNonFailedRatioBucketsDisconnectOrganizationsNormalizedCum
ulativeSorted}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
legend{alexa.top.10k-hw,alexa.top.10k-sw,alexa.top.se-hw,alexa.top.se-sw,se.r.100k-hw,se.r.1
00k-sw,se.hs.municip-hw,se.hs.municip-sw}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
end{groupplot}
\end_layout

\begin_layout Plain Layout


\backslash
end{tikzpicture}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Result-selection-internal-secure-organizations"

\end_inset


\begin_inset Argument 1
status open

\begin_layout Plain Layout
Internal resources, secure resources, Disconnect's organizations
\end_layout

\end_inset

Small versions of Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Cumulative-distribution-ratio-internal-resources"

\end_inset

, 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Cumulative-distribution-ratio-secure-resources"

\end_inset

 and 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Organizations-per-domain"

\end_inset

 showing a selection of HTTP-www and HTTPS-www variations
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
HTTP, HTTPS and redirects
\begin_inset CommandInset label
LatexCommand label
name "sec:Results-HTTP,-HTTPS-and-redirects"

\end_inset


\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Result-selection-http-codes-redirects-secure"

\end_inset

(a) shows the ratio of domains' HTTP response status code on the x axis
 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:HTTP-status-codes"

\end_inset

.
 There were few 1xx, 4xx and 5xx responses; the figure focuses on 2xx and
 3xx; no response is shown as 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
null
\end_layout

\end_inset

.
 In general, HTTPS usage is very low at less than 0.6% among random domains
 -- see random .se 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
(null)
\end_layout

\end_inset

 responses for the se.r.100k-sw dataset.
 Reach50 top sites are leading the way with a 53% response rate 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Failed-versus-non-failed"

\end_inset

.
\end_layout

\begin_layout Standard
Sites which implement HTTPS sometimes take advantage of redirects to direct
 the user from an insecure to a secure connection, for example when the
 user didn't type in 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
https://
\end_layout

\end_inset

 into the browser's address bar.
 Surprisingly, this is not very common -- while many redirect to a preferred
 variant of their domain name, usually the www subdomain, only a few percent
 elect to redirect to a secure URL 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:HTTP,-HTTPS-and-redirects"

\end_inset

.
 The average number of redirects for domains with redirects is 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{1.23}
\end_layout

\end_inset

, but some domains have multiple, chained redirects; a few even to a 
\emph on
mixture
\emph default
 of HTTP and HTTPS URLs.
\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Result-selection-http-codes-redirects-secure"

\end_inset

(a) shows the ratio of domains responding with redirects (x axis' 3xx responses)
, and the effect of these redirects are detailed in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Result-selection-http-codes-redirects-secure"

\end_inset

(b) as ratio of domains (x axis) which are strictly secure, have mixed HTTP/HTTP
S redirects, are strictly insecure or which could not be determined because
 of recorded URL mismatches.
 It is surprising to see that redirects more often point to 
\emph on
insecure
\emph default
 than secure URLs -- even if the origin request was made to a secure URL.
 The secure random .se domains (se.r.100k-sw) have a higher secure redirect
 ratio, but due to the very low response rate of 0.3% when using HTTPS --
 and even fewer which use redirects -- it is hard to draw solid conclusions.
\end_layout

\begin_layout Standard
It seems that Swedish media shun secure connections -- 
\emph on
not one
\emph default
 of them present a fully secured domain, serving mixed content in case of
 responding to secure requests.
 At the same time, they use the highest count of both internal and external
 resources -- with numbers several times higher than other domain lists
 -- and more than 20% of requests go to known trackers.
\end_layout

\begin_layout Section
Internal and external requests
\begin_inset CommandInset label
LatexCommand label
name "sec:Results-Internal-and-external-requests"

\end_inset


\end_layout

\begin_layout Standard
With each request classified as either internal or external to the originating
 domain, it is easy to see how sites divide their resources 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Internal-versus-external"

\end_inset

.
 Less than 10% of top sites (for example alexa.top.10k-hw) use strictly internal
 resources, meaning up to 93% of top sites are composed using at least a
 portion of external resources.
 See the percentage of domains (x axis) using strictly internal, mixed and
 strictly external resources in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Result-selection-internal-external-insecure-tracker-categories-top-organizations"

\end_inset

(a) for a selection of datasets, and Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:internal-mixed-external-resources"

\end_inset

 for all datasets.
 This means external resources -- in this thesis seen as trackers -- have
 actively been installed, be it as a commercial choice or for technical
 reasons 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Trackers-are-a-commercial-choice"

\end_inset

.
 The difference between HTTP and HTTPS datasets is generally small, showing
 that users are 
\emph on
as tracked
\emph default
 on secure as on insecure sites.
\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Result-selection-internal-secure-organizations"

\end_inset

(a) shows the cumulative distribution function (CDF) of the ratio of external
 resources used by each domain, with 0% and 99% internal resources marked.
 In particular, we show the ratio of domains (y axis) as a function of the
 ratio of internal resources seen by each domain (x axis).
 This maps to the bar graph in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Result-selection-internal-external-insecure-tracker-categories-top-organizations"

\end_inset

(a); 0% is all external, over 99% is all internal -- in between means mixed
 security.
\end_layout

\begin_layout Standard
Similar to the HTTPS adoption, we observe significant differences between
 randomly selected domains and the most popular (top ranked) domains.
 See how dataset HTTP/HTTPS variation lines follow each other for most datasets,
 again pointing towards 
\begin_inset Quotes eld
\end_inset

secure
\begin_inset Quotes erd
\end_inset

 HTTPS serving 
\emph on
as many trackers
\emph default
 as insecure HTTP.
 This means that a secure, encrypted connection protecting against eavesdropping
 doesn't automatically lead to 
\emph on
privacy
\emph default
 -- something which users might be lead to believe when it is called a 
\begin_inset Quotes eld
\end_inset

secure connection
\begin_inset Quotes erd
\end_inset

 as well as through the use of 
\begin_inset Quotes eld
\end_inset

security symbols
\begin_inset Quotes erd
\end_inset

 such as padlocks.
\end_layout

\begin_layout Standard
For the HTTP variation of random .se domains (se.r.100k-hw) 40% use strictly
 external resources; this seems to be connected with the fact that many
 domains are 
\emph on
parked
\emph default

\begin_inset Foot
status open

\begin_layout Plain Layout
A parked domain is one that has been purchased from a domain name retailer,
 but only shows a placeholder message -- usually an advertisement for the
 domain name retailer itself.
\end_layout

\end_inset

 and load all their resources from an external domain which serves the domain
 name retailer's resources for all parked domains.
 The same domains seem to not have HTTPS enabled, as can be seen in 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Result-selection-http-codes-redirects-secure"

\end_inset

(a), and the remaining HTTPS domains show the same internal resource ratio
 characteristics as top domains.
 There is a wide variety of parked page styles, as well as other front pages
 without actual content, but they have not yet been fully investigated and
 separately analyzed 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Ignore-domains-without-content"

\end_inset

.
\end_layout

\begin_layout Section
Tracker detection
\begin_inset CommandInset label
LatexCommand label
name "sec:Results-Tracker-detection"

\end_inset


\end_layout

\begin_layout Standard
While looking at the number of requests made to trackers can give a hint
 towards how much tracking is installed on a website, it can be argued that
 one or two carefully composed requests can contain the same information
 as several request.
 The difference is merely technical, as not all types of resources can be
 efficiently bundled and transferred in a single requests, but require more
 than one -- therefore it's more interesting to look at the number of organizati
ons which resources are loaded from 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Domain-and-organization-counts"

\end_inset

.
 Looking at categories can also be interesting -- especially for the content
 category, which isn't blocked by default by Disconnect.me.
\end_layout

\begin_layout Subsection
Categories
\begin_inset CommandInset label
LatexCommand label
name "sub:Results-Tracker-detection-Categories"

\end_inset


\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Result-selection-internal-external-insecure-tracker-categories-top-organizations"

\end_inset

(b) shows coverage of the five categories in Disconnect.me's blocking list
 (
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Capturing-tracker-requests"

\end_inset

, 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Disconnect-Categories"

\end_inset

), as well the grey 
\begin_inset Quotes eld
\end_inset

any
\begin_inset Quotes erd
\end_inset

 bar showing the union of known tracker coverage (x axis).
 The special Disconnect category 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-category"

\end_inset

 is predominant in most datasets, showing coverage almost as large as the
 union of all categories.
 The second largest category is content -- which is 
\emph on
not blocked by default
\emph default
 by Disconnect.me, as these requests have been 
\emph on
deemed desirable
\emph default
 even to privacy-aware users.
 This means that even when running Disconnect.me's software, users are 
\emph on
still tracked
\emph default
 on 60-70% of websites 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-categories-coverage"

\end_inset

.
\end_layout

\begin_layout Subsection
Organizations per domain
\begin_inset CommandInset label
LatexCommand label
name "sub:Organizations-per-domain"

\end_inset


\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Result-selection-internal-secure-organizations"

\end_inset

(c) shows the CDF of the ratio of domains (y axis) with the number of organizati
ons detected per domain (x axis) for a selection of datasets.
 The random .se domain HTTP variation (se.r.100k-hw) has a different characteristic
 than others, with 40% of domains having no detected third party organizations;
 it can be due to domain registrars who serve parked domain page not being
 listed as trackers.
 Around 55% of random Swedish HTTP domains (se.r.100k-hw) have 1-3 trackers,
 and about 5% have more than 3.
\end_layout

\begin_layout Standard
Once again it can be seen that the amount of tracking is the same in other
 HTTP-www variations as in their respective HTTPS-www variation -- as the
 figure shows, the lines follow each other.
 Most websites also have at least one known tracker present; 53-72% of random
 domains have at least one tracker installed, while 88-98% of top websites
 have trackers and 78-100% of websites in the Swedish curated lists.
 In the larger Alexa global top 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{10000}
\end_layout

\end_inset

 dataset (alexa.top.10k-hw and alexa.top.10k-sw), 70% of sites allow more than
 one external organization, 10% allow 13 or more and 1% even allow more
 than 48 trackers -- and that is looking only on the front page of the domain.
\end_layout

\begin_layout Standard
Out of the Swedish media domains, 50% share information with more than seven
 tracker organizations -- and one of them is sharing information with 38
 organizations.
 Half of the Swedish media websites load more than 6 known trackers; a single
 visit to the front page of each of the 27 investigated sites would leak
 information in over 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{3800}
\end_layout

\end_inset

 external requests 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Domain-and-request-counts"

\end_inset

 to at least 57 organizations 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Domain-and-organization-counts"

\end_inset

.
 This means that any guesswork in what types of articles individuals read
 would read in a printed newspaper is gone -- and with that probably the
 guesswork in exactly what kind of 
\emph on
personal opinions
\emph default
 these individuals hold.
 While it is already known that commercial media outlets makes their money
 through advertising, this level of tracking might be surprising -- it seems
 to indicate that what news users read online is very well known.
\end_layout

\begin_layout Subsection
Google's coverage is impressive
\begin_inset CommandInset label
LatexCommand label
name "sub:Google's-coverage-is-impressive"

\end_inset


\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Result-selection-internal-external-insecure-tracker-categories-top-organizations"

\end_inset

(c) shows Google, Facebook and Twitter's coverage.
 It also shows the grey 
\begin_inset Quotes eld
\end_inset

any
\begin_inset Quotes erd
\end_inset

 bar showing the union of known tracker coverage and an 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
x
\end_layout

\end_inset

 marking the coverage of the entire Disconnect category of Disconnect.me's
 blocking list, which they are part of 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-category"

\end_inset

.
 The organization with the most spread, 
\emph on
by far
\emph default
, is Google.
 Google alone has higher coverage than the Disconnect category, meaning
 that a portion of websites use resources from Google domains in the content
 category 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-Content"

\end_inset

.
\end_layout

\begin_layout Standard
The runner ups with broad domain class coverage are Facebook and Twitter,
 but in terms of domain coverage they are still far behind -- see Section
 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Top-organizations"

\end_inset

.
 Google is very popular with all top domains and most Swedish curated datasets
 have a coverage above 80% -- and many closer to 90%.
 Random domains have a lower reliance on Google at 47-62% -- still about
 half of all domains.
 Apart from the .SE Health Status list of Swedish media domains, Facebook
 doesn't reach 40% in top or curated domains.
 Facebook coverage on random zone domains is 6-10%, which is also much lower
 than Google's numbers.
 Twitter has even lower coverage, at about half of that of Facebook on average.
 As can be seen in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Result-selection-internal-external-insecure-tracker-categories-top-organizations"

\end_inset

(c), Google alone oftentimes has a coverage 
\emph on
higher
\emph default
 than the domains in the Disconnect category -- it shows that Google's content
 domains are in use 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-Organizations-in-more-than-one-category"

\end_inset

.
 While Disconnect's blocking list contains very many Google domains 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-Domains-per-organization"

\end_inset

, the coverage is not explained by the number of domains they own, but by
 the popularity of their services 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Top-domains-Google"

\end_inset

.
 In fact, at around 90% of the 
\emph on
total
\emph default
 tracker coverage, Google's coverage approaches that of the union of 
\emph on
all
\emph default
 known trackers.
\end_layout

\begin_layout Subsection
Tracker detection effectiveness
\begin_inset CommandInset label
LatexCommand label
name "sub:Tracker-detection-effectiveness"

\end_inset


\end_layout

\begin_layout Standard
While all external resources are considered trackers, parts of this thesis
 has concentrated on using Disconnect.me's blocking list for tracker verification.
 But how effective is that list of 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{2149}
\end_layout

\end_inset

 
\emph on
known
\emph default
 and 
\emph on
recognized
\emph default
 tracker domains across the datasets? See Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Undetected-external-domains"

\end_inset

 and Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Undetected-external-domains"

\end_inset

 for the ratio of detected/undetected domains.
 While some of the domains which have not been matched by Disconnect are
 private/internal CDNs, the fact that less than 10% of external domains
 are blocked in top website HTTP datasets (such as alexa.top.10k-hw) is notable.
 The blocking results are also around 10% or lower for random domain HTTP
 datasets, but it seems it might be connected to the number of domains in
 the dataset.
 Only 3% of the 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{15746}
\end_layout

\end_inset

 external primary domains in .se 100k random domain HTTP dataset (se.r.100k-hw)
 were detected.
 Smaller datasets, including HTTPS datasets with few reachable websites,
 have a higher detection rate at 30% and more.
\end_layout

\begin_layout Chapter
Discussion
\end_layout

\begin_layout Standard
Two previously investigated pieces of data this thesis' subject was based
 upon were .SE's statistics regarding the use of Google Analytics and the
 adoption rates for HTTPS on Swedish websites.
 Both have been thoroughly investigated and expanded upon.
 Below is a comparison to the 
\emph on
.SE Health Status
\emph default
 reports as well as a few other reports, in terms of results and methodology.
 After that, a summary of the software developed and open source contributions
 follow.
\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Write about 
\emph on
Third-party Identity Management Usage on the Web
\emph default
 report findings.
\end_layout

\end_inset


\end_layout

\begin_layout Section

\emph on
.SE Health Status
\emph default
 comparison
\begin_inset CommandInset label
LatexCommand label
name "sec:.SE-Health-Status-comparison"

\end_inset


\end_layout

\begin_layout Subsection
Google Analytics
\end_layout

\begin_layout Standard
One of the reasons this thesis subject was chosen was the inclusion of a
 Google Analytics coverage analysis in previous reports.
 The reports shows overall Google Analytics usage in the curated dataset
 of 44% 2010, 58% in 2011 and 62% in 2012 
\begin_inset CommandInset citation
LatexCommand cite
key "Lowinder:2010:healthstatus,Lowinder:2011:healthstatus,Lowinder:2012:healthstatus"

\end_inset

.
\end_layout

\begin_layout Standard
Thesis data from filtered HTTP-www 
\emph on
.SE Health Status
\emph default
 domain lists shows usage in the category with the least coverage (financial
 services) is 59% while the rest are above 74% 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Top-domains-Google"

\end_inset

; the average is 81%.
 The highest coverage category (government owned corporations) is even above
 94%.
 Since Google Analytics can now be used from the DoubleClick domain as well
 as Google offering several other services, looking only at the Google Analytics
 domain makes little sense -- instead it might make more sense to look at
 the organization Google as a whole.
 The coverage jumps quite a bit, with most categories landing above 90%
 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Top-organizations"

\end_inset

, which is also the 
\emph on
.SE Health Status
\emph default
 average.
\end_layout

\begin_layout Standard
This means that traffic data from at least 90% of web pages considered important
 to the Swedish general public end up in Google's hands.
 In a broader scope considering all known trackers, 95% of websites have
 them installed.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
It is possible to extract the exact coverage for both Google Analytics and
 DoubleClick from the current dataset.
 Google Analytics already uses a domain of its own, and by writing a custom
 question differentiating DoubleClick's ad specific resource URLs from analytics
 specific resource URLs, analytics on doubleclick.net can be analyzed separately
 as well.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Reachability
\end_layout

\begin_layout Standard
The random zone domain lists (.se, .dk, .com, .net) have download failures for
 22-28% of all domains when it comes to HTTP without www and HTTP-www variations
, where www has fewer failures 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Failed-versus-non-failed"

\end_inset

.
 The HTTP result for .se is consistent with results from the 
\emph on
.SE Health Status
\emph default
 reports, according to Patrik Wallström, where they only download www variations.
 
\begin_inset Note Note
status open

\begin_layout Plain Layout
Ask .SE about hard numbers?
\end_layout

\end_inset

 Curated 
\emph on
.SE Health Status
\emph default
 lists have fewer failures for both HTTP, generally below 10% for the 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
http://www.
\end_layout

\end_inset

 variation -- perhaps explained by the thesis software and network setup
 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Failed-domains"

\end_inset

.
 Several prominent media sites with the same parent company respond as expected
 when accessed with a normal desktop browser -- but not automated requests,
 suggesting that they detect and block some types of traffic.
\end_layout

\begin_layout Subsection
HTTPS usage
\end_layout

\begin_layout Standard
.SE have measured HTTPS coverage among curated health status domains since
 at least 2007 
\begin_inset CommandInset citation
LatexCommand cite
key "Lowinder:2008:healthstatus,Lowinder:2009:healthstatus,Lowinder:2010:healthstatus,Lowinder:2011:healthstatus,Lowinder:2012:healthstatus,Lowinder:2013:healthstatus"

\end_inset

.
 The reports are a bit unclear about some numbers as measurement methodology
 and focus has shifted over the years, but the general results seem to line
 up with the results in this thesis.
 Quality of the HTTPS certificate is also considered by looking at for example
 expiry date, deeming them correct or not.
 Data comparable to this thesis wasn't published in the report from 2007
 and HTTPS measurements were not performed in 2012.
 Also, measurements changed in 2009 so they might not be fully comparable
 with earlier reports.
\end_layout

\begin_layout Standard
Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:SE-Health-Status-HTTPS-coverage-2008-2013"

\end_inset

 shows values extracted from reports 2008-2013 as well as numbers from this
 thesis.
 Thesis results show a 24% HTTPS response rate 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Failed-versus-non-failed"

\end_inset

 while the report shows 28%.
 The 2013 report also finds that 24% of HTTPS sites redirect from HTTPS
 back to HTTP.
 In this thesis it is shown that 22% of 
\emph on
.SE Health Status
\emph default
 HTTPS domains have non-secure redirects 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:HTTP,-HTTPS-and-redirects"

\end_inset

 -- meaning insecure or mixed security redirects -- which is close to the
 report findings.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtable{se.health-status.https.tsv}{}{fixed, display columns/0/.style={string
 type, column type=l}, display columns/1/.style={string type, column type=i},
 display columns/2/.style={clear infinite, string type, column type=i}, display
 columns/3/.style={clear infinite, string type, column type=i}, display columns/4
/.style={clear infinite}, display columns/5/.style={clear infinite}, display
 columns/6/.style={clear infinite}}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:SE-Health-Status-HTTPS-coverage-2008-2013"

\end_inset


\emph on
.SE Health Status
\emph default
 HTTPS coverage 2008-2013
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section

\emph on
Cat and Mouse
\emph default

\begin_inset CommandInset label
LatexCommand label
name "sec:Cat-and-Mouse"

\end_inset


\end_layout

\begin_layout Standard
Similar to the methodology used in this thesis, the 
\emph on
Cat and mouse
\emph default
 paper by Krishnamurthy and Wills 
\begin_inset CommandInset citation
LatexCommand cite
key "Krishnamurthy:2006:CMC:1135777.1135829"

\end_inset

 use the Firefox browser plugin AdBlock to detecting third-party resources
 -- or in their case advertisements.
 The ad blocking list Filterset.G from 2005-10-10 contains 108 domains as
 well as 55 regular expressions.
 Matching was done after collecting requested URLs using a local proxy server,
 which means that HTTPS requests were lost.
\end_layout

\begin_layout Standard
As this thesis uses in-browser URL capturing, HTTPS requests have been captured
 -- a definite improvement and increase in the reliability of result.
 On the other hand, not performing URL path matching 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Ad-and-privacy-blocking-lists"

\end_inset

 and instead only using domains (the way Disconnect does it) might lead
 to fewer detected trackers, as the paper shows that only 38% of their ad
 matches were domain matches, plus 10% which matched both domain and path
 rules.
 Their matching found 872 unique servers from 108 domain rules -- the 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{2149}
\end_layout

\end_inset

 domains (
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{1326}
\end_layout

\end_inset

 in the advertisement category) in the currently used Disconnect dataset
 might be enough, as subdomains are matched as well.
\end_layout

\begin_layout Standard
The paper also discusses serving content alongside advertisements as a way
 to avoid blocking of trackers 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-categories-coverage"

\end_inset

, as well as obfuscating tracker URLs by changing domains or paths, perhaps
 by using CDNs 
\begin_inset CommandInset ref
LatexCommand eqref
reference "note:cloudfront.net-cdn-subdomains"

\end_inset

.
 While this thesis has not confirmed that this is the case, it seems likely
 that some easily blockable tracking is being replaced with a less fragile
 business model where the tracker also adds value to the end user.
 There are two ways to look at this behavior -- do service providers add
 tracking to an existing service, or do they build a service to support
 tracking? For Google, the most prevalent tracker organization, it might
 be a mixture of both.
 In the case of AddThis, a wide-spread 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Top-domains-General"

\end_inset

 social sharing service 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Social"

\end_inset

, it seems the service is provided as a way to track users.
 The company is operated as a marketing firm selling audience information
 to online advertisers, targeting social influencers
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://en.wikipedia.org/wiki/AddThis"

\end_inset


\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
The report looks the top 100 English language sites from 12 categories in
 Alexa's top list, plus another 100 sites from a political list.
 These sites come from 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{1116}
\end_layout

\end_inset

 domains.
 A total of 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{1113}
\end_layout

\end_inset

 pages were downloaded from that set, plus 457 pages from Alexa's top 500
 in a secondary list.
 The overlap was 180 pages.
 See Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Cat-and-Mouse-ad-coverage"

\end_inset

 for ad coverage per dataset and Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Cat-and-Mouse-adserver-match-distribution"

\end_inset

 for ad domain match percentage.
\end_layout

\begin_layout Standard
The paper's top ad server (determined by counting URLs) was doubleclick.net
 at 8.8%.
 While thesis data hasn't been determined in the same way, it seems that
 Doubleclick has strengthened their position since then: comparing the coverage
 of doubleclick.net 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Top-domains-Google"

\end_inset

 to other advertisement domains, organizations or even the category seems
 to point to that Doubleclick alone has more coverage than the other advertisers
 together for several datasets.
 Advertisement coverage was 58% for Alexa's top 500, while this thesis detects
 54% advertisement coverage 
\emph on
plus
\emph default
 an additional 52% doubleclick.net coverage -- the union has unfortunately
 not been calculated.
\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Does a new dataset need to be downloaded?
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtable{krishnamurthy-2006-cmc-1135777.1135829_ad_coverage.tsv}{}{fixed,
 display columns/0/.style={string type, column type=l}, display columns/1/.style={
string type, column type=i}, display columns/2/.style={string type, column
 type=i}, display columns/3/.style={string type, column type=i}}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout

\emph on
\begin_inset CommandInset label
LatexCommand label
name "tab:Cat-and-Mouse-ad-coverage"

\end_inset

Cat and Mouse
\emph default
 ad coverage
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtable{krishnamurthy-2006-cmc-1135777.1135829_adserver_match_distribution.tsv}{}
{fixed, precision=1, display columns/0/.style={string type, column type=l}}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout

\emph on
\begin_inset CommandInset label
LatexCommand label
name "tab:Cat-and-Mouse-adserver-match-distribution"

\end_inset

Cat and Mouse
\emph default
 ad server match distribution
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section

\emph on
Follow the Money
\emph default

\begin_inset CommandInset label
LatexCommand label
name "sec:Follow-the-Money"

\end_inset


\end_layout

\begin_layout Standard
Gill and Erramilli 
\emph on
et al.

\emph default
 
\begin_inset CommandInset citation
LatexCommand cite
key "Gill:2013:BPF:2504730.2504768"

\end_inset

 have explored some of the economical motivations behind tracking users
 across the web.
 Using HTTP traffic recorded from different networks, the paper looks at
 the presence of different 
\emph on
aggregators
\emph default
 (trackers) on sites which are 
\emph on
publishers
\emph default
 of content.
 To distinguish publishers from aggregators, the domains in each session
 are grouped with regards to the originating request's domain's IP-address'
 network autonomous system (AS) number -- requests to another AS number
 are counted as third parties/aggregators.
 In some cases looking at AS numbers leads to confusion, for example when
 multiple publishers are hosted on CDN service; separating publishers and
 aggregators by domain names is then used.
\end_layout

\begin_layout Standard
The largest dataset, a mobile network with 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{3000000}
\end_layout

\end_inset

 users and 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{1500000000}
\end_layout

\end_inset

 sessions presumably excludes HTTPS traffic, as it would be unavailable
 to public network operators.
 The paper's Figure 3 shows that aggregator coverage is higher for the very
 top publishers; over 70% for the top 10.
\end_layout

\begin_layout Standard
The coverage of top aggregators on top publishers are shown in Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Follow-the-Money-aggregators"

\end_inset

, alongside numbers from this thesis.
 This thesis doesn't use recorded HTTP traffic in the same way, and download
 each domain only once per dataset, but looking at publisher coverage should
 allow a comparison.
\end_layout

\begin_layout Standard
Google again shows a significantly greater coverage at 80%, compared to
 Facebook's 23% in second place.
 It looks like the paper has grouped AdMob under Global Crossing, which
 was a large network provider connecting 70 countries before being acquired
 in 2011.
 AdMob was acquired by Google already in 2009, so it's unclear why it's
 listed separately; one reason might be because the dataset is mobile-centric
 and that AS number is still labeled Global Crossing.
 Thesis results show even higher numbers for Disconnect's matching of Google
 and Facebook -- 4 and 14 percentage points -- even when looking at the
 Alexa's top 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{10000}
\end_layout

\end_inset

 sites.
 Microsoft doesn't seem to have as much coverage in the top 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{100000}
\end_layout

\end_inset

, but the other organizations show about the same coverage.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtable{gill-2013-bpf-2504730.2504768_aggregators.tsv}{}{fixed, precision=2,
 display columns/0/.style={string type, column type=l}, display columns/4/.style={
clear infinite, column type=|r}}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout

\emph on
\begin_inset CommandInset label
LatexCommand label
name "tab:Follow-the-Money-aggregators"

\end_inset


\emph default

\begin_inset Argument 1
status open

\begin_layout Plain Layout

\emph on
Follow the Money
\emph default
 aggregators
\end_layout

\end_inset


\emph on
Follow the Money
\emph default
 aggregators' revenue, users and publisher coverage fractions plus this
 thesis' Disconnect organization coverage
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Trackers which deliver content
\begin_inset CommandInset label
LatexCommand label
name "sec:Trackers-which-deliver-content"

\end_inset


\end_layout

\begin_layout Standard
In Disconnect's blocking list, there is a category called content 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-Content"

\end_inset

.
 While all other categories are blocked by default, this one is not as it
 represents external resources deemed 
\emph on
desirable
\emph default
 to Disconnect's users.
 So while they are known tracker domains, they are allowed to pass 
\begin_inset Quotes eld
\end_inset

by popular demand
\begin_inset Quotes erd
\end_inset

 -- similar to CDNs (
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Public-suffix-list"

\end_inset

, 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Cat-and-Mouse"

\end_inset

).
 This brings an advantage to companies that can deliver content, as they
 can just as well use content usage data as pure web bug/tracker usage data
 when analyzing patterns.
\end_layout

\begin_layout Standard
Google has several popular embeddable services in the content category (coverage
 from large datasets in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Top-domains-Google"

\end_inset

 in parentheses), including Google Maps
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://developers.google.com/maps/documentation/embed/"

\end_inset


\end_layout

\end_inset

 (2-5%), Google Translate
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://translate.google.com/manager/website/"

\end_inset


\end_layout

\end_inset

 and least but not least YouTube
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://developers.google.com/youtube/player_parameters"

\end_inset


\end_layout

\end_inset

 (3-7%).
 Lesser known examples include Recaptcha
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://developers.google.com/recaptcha/"

\end_inset


\end_layout

\end_inset

 which is an embeddable service to block/disallow web crawlers/bots access
 to web page features.
 Those are visible examples, which users interact with; Google Fonts
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.google.com/fonts"

\end_inset


\end_layout

\end_inset

 which serves modern web fonts for easy embedding, is still visible but
 not branded.
 Google Hosted Libraries
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://developers.google.com/speed/libraries/"

\end_inset


\end_layout

\end_inset

 is another very popular service yet unbranded service.
 It hosts popular javascript libraries from Google's extensive CDN network
 instead of the local server for site speed/performance gains, and is not
 visible as components -- but they cannot be removed without affecting functiona
lity.
 Especially the two latter, served from the googleapis.com (30-56%) domain,
 are prevalent in several of the datasets -- and they are usually loaded
 on every single page on a website, and thus gain full insight on users'
 click paths and web history.
 The content tracking is passive and on the HTTP level, as opposed to scripts
 executing and collecting data such as Google Analytics (30-80%) and Doubleclick
 (11-53%).
\end_layout

\begin_layout Standard
As Disconnect's blocking blacklist is shown to cover only a fraction of
 the external domains in use, a whitelist could be an alternative.
 As Disconnect already has whitelisted the content category, it can be considere
d a preview of what shared whitelisting might look like.
 It is already the second largest category, in terms of coverage, with over
 50% of domains in most datasets having matches 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-categories-coverage"

\end_inset

.
 While the number of organizations being able to track users might be reduced
 by whitelisting, it seems the problem needs more research 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Ad-and-privacy-blocking-lists"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Extract a data table with popular content domains.
\end_layout

\end_inset


\end_layout

\begin_layout Section
\begin_inset Argument 1
status open

\begin_layout Plain Layout
Automated data collection and analysis
\end_layout

\end_inset

Automated, scalable data collection and repeatable analysis
\end_layout

\begin_layout Standard
One of the prerequisites for the type of analysis performed in this thesis
 was that all collection should be automated, repeatable and be able to
 handle tens of thousands of domains at a time.
 This goal has been achieved, and a specialized framework for analyzing
 web pages's HTTP requests has been built.
 While most of the code has been tailored to answer questions posed in this
 thesis, it is also built to be extendable, both in and between all data
 processing steps.
 More data can be included, additional datasets can be mixed in, separate
 questions can be written to query data from any stage in the data preparation
 or analysis.
 Tools have been written to easily download and compare separate lists of
 domains, and by default data is kept in its original downloaded form so
 that historical analysis can be performed.
\end_layout

\begin_layout Standard
It might be hard to convince other researchers to use code, as it might
 not fulfill all of their wishes at once on top of any 
\begin_inset Quotes eld
\end_inset

not invented here
\begin_inset Quotes erd
\end_inset

 mentality.
 Fortunately, the code is easy to run, and with proper documentation other
 groups should be able to at least test simple theories regarding websites.
 Some of the lists of domains used as input are publicly available, and
 thus results can also be shared.
 This should encourage other groups, as looking at example data might spark
 interest.
\end_layout

\begin_layout Section
Tracking and the media
\end_layout

\begin_layout Standard
Swedish media websites have been shown to have the highest amount of trackers
 per site among the datasets -- both in general and for advertisement and
 analytics categories.
 Media and press are trying to be independent from and uninfluenced by their
 advertiser, despite being a source of income.
 
\end_layout

\begin_layout Standard
Advertisement choices are historically based on audience size and demographic,
 determined by readership questionnaires.
 Even publishers themselves couldn't know what pages and articles readers
 
\emph on
actually
\emph default
 read, once the paper had left the press.
 Current tracker technology allow both publishers and advertisers to see
 
\emph on
exactly
\emph default
 what users are reading online -- down to time spent per paragraph if they
 wanted.
 It could also mean that this type of intimate knowledge of what news is
 popular, connected with the kind of click traffic advertisers are seeing,
 means that they have financial incentive to control exactly what the media
 
\emph on
should
\emph default
 write -- as opposed to should not write.
 Does bad news bring more 
\emph on
advertisement clicks
\emph default
 (or other measurable targets such as product purchases, as opposed to newspaper
 readers) than good? -- spend more money advertising on articles about bad
 news 
\begin_inset CommandInset citation
LatexCommand cite
key "Weber:2012:MWQ:2380718.2380761"

\end_inset

.
 This will eventually affect the publisher's advertisement income.
 Advertisers could also separately investigate 
\begin_inset Quotes eld
\end_inset

relatedness
\begin_inset Quotes erd
\end_inset

 
\begin_inset CommandInset citation
LatexCommand cite
key "Lv:2011:LMR:1963405.1963417"

\end_inset

 but use it to value advertisement and provide their own expanded article
 categorization with fine-grained details for further refinement.
\end_layout

\begin_layout Section
Privacy tool reliability
\end_layout

\begin_layout Standard
Can a privacy tool using a 
\emph on
fixed blacklist
\emph default
 of domains to block be 
\emph on
trusted
\emph default
 -- or can it only be trusted to be 10% effective 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Undetected-external-domains"

\end_inset

? Regular expression based blocking, such as EasyList used by AdBlock, might
 be more effective, as it can block resources by URL path separate from
 the URL domain name 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Ad-and-privacy-blocking-lists"

\end_inset

 -- but it's no cure-all.
 It does seem as if the blacklist model needs to be improved -- perhaps
 by using whitelisting instead of blacklisting.
 The question then becomes an issue of weighing a game of 
\emph on
cat and mouse
\emph default
 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Cat-and-Mouse"

\end_inset

 -- if the whitelist is shared by many users -- against 
\emph on
convenience
\emph default
 -- if each user maintains their own whitelist.
 At the moment it seems convenience and blacklists are winning, at the cost
 of playing cat and mouse with third parties who end up being blocked.
\end_layout

\begin_layout Section
Open source contributions
\end_layout

\begin_layout Standard
During the development of code for this thesis, other projects have been
 utilized.
 In good open source manners, those projects should be improved when possible.
\end_layout

\begin_layout Subsection
The HAR specification
\begin_inset CommandInset label
LatexCommand label
name "sub:The-HAR-specification"

\end_inset


\end_layout

\begin_layout Standard
After looking at further processing of the data, some improvements might
 be suggested.
\end_layout

\begin_layout Standard
One such suggestion might be to add an absolute/resolved version of 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
response.redirectURL
\end_layout

\end_inset

, as specification 1.2 seems to be unclear wether or not it should be kept
 as-is from the HTTP 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
Location
\end_layout

\end_inset

 header or browser's 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
redirectURL
\end_layout

\end_inset

 values -- both of which possibly is relative.
 As subsequent HTTP requests are hard to refer to without relying either
 on exact request ordering (the executed redirect always coming exactly
 as the next entry) or at least having the URL resolved (preferably by the
 browser) before writing it to the HAR data.
 Current efforts in 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
netsniff.js
\end_layout

\end_inset

 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:get/netsniff.js"

\end_inset

 to resolve relative URLs using a separate javascript library have proven
 inexact when it comes to matching against the browser's executed URL, differing
 for example in wether trailing slashes are kept for domain root requests
 or not.
 What would be even better, is a way to refer to the reason for the HTTP
 request, be it an HTML tag, a script call or an HTTP redirect -- but that
 could to be highly implementation dependent per browser.
\end_layout

\begin_layout Subsection
phantomjs
\end_layout

\begin_layout Standard
While 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
netsniff.js
\end_layout

\end_inset

 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:get/netsniff.js"

\end_inset

 from the phantomjs example library has been improved in several ways, patches
 have not yet been submitted.
 Since it is only an example from their side, a more developed version might
 no longer serve the same purpose -- educating new users on the possibilities
 of phantomjs.
 An attempt to break the code down and separate pure bug fixes from other
 improvements might help.
 The version written for this thesis is released under the same license
 as the original, so reuse should not be a problem for those interested.
\end_layout

\begin_layout Subsection
jq
\end_layout

\begin_layout Standard
Using jq as the main program for data transformation and aggregation has
 given me a fair amount of knowledge of real world usage of the jq domain-specif
ic language (DSL).
 Bugs and inconsistencies have been reported, and input regarding for example
 code sharing through a package management system and (semantic) versioning
 has been given.
 Some of the reusable jq code and helper scripts written for the thesis
 has been packaged for easy reuse, and more is on the way.
\end_layout

\begin_layout Subsection
Disconnect
\end_layout

\begin_layout Standard
Disconnect relies heavily on their blocking list 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect's-blocking-list"

\end_inset

, as it is the base for both the service of blocking external resources
 and presenting statistics to the user.
 While preparing 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:classification/disconnect/prepare-service-list.sh"

\end_inset

 and analyzing 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:classification/disconnect/analysis.sh"

\end_inset

 the blocking list, a number of errors and inconsistencies were found.
 Unfortunately, the maintainers do not seem very active in the project,
 and even trivial data encoding errors were not patched over a month after
 submission.
 According to Disconnect's Eason Goodale in an email conversation 2014-08-13,
 the team has been concentrating on a second version of Disconnect as well
 as other projects.
 While patches can be submitted through Disconnect's Github project pages,
 Goodale's reply seems to indicate they will not be accepted in a timely
 fashion and perhaps irrelevant by the time the next generation is released
 to the public.
\end_layout

\begin_layout Subsection
Public Suffix
\end_layout

\begin_layout Standard
A tool that parses the public suffix list from its original format to a
 JSON lookup object format has been written.
 Using that tool an inconsistency in the data was detected -- the TLD .engineerin
g being included twice instead of .engineer and .engineering separately.
 This had already been detected and reported by others, but it can be used
 to detect future inconsistencies in an automated manner.
\end_layout

\begin_layout Section
\begin_inset Argument 1
status open

\begin_layout Plain Layout
Platform for Privacy Preferences (P3P) analysis
\end_layout

\end_inset

Platform for Privacy Preferences (P3P) Project
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.w3.org/P3P/"

\end_inset


\end_layout

\end_inset

 HTTP header analysis
\begin_inset CommandInset label
LatexCommand label
name "sub:Platform-for-Privacy-(P3P)-Project"

\end_inset


\end_layout

\begin_layout Standard
P3P is a way for websites to declare their policies and intentions for data
 collected from web users.
 It is declared in a machine-readable format, as an XML file and in a compact
 encoding as an HTTP header.
 W3C's work started in 1997 and P3P 1.0 became a W3C recommendation in 2002.
 It never gained enough momentum and the work with P3P 1.1 was suspended
 in 2006.
 P3P is still implemented by many websites, even though it may not follow
 the originally intended usage.
\end_layout

\begin_layout Standard
In conversations with Dwight Hunter, privacy policy researcher, he mentioned
 that P3P policies are seen as a good technical solution to policy problems
 in research he had read.
 
\begin_inset Note Note
status open

\begin_layout Plain Layout
Add references to Dwight's claims?
\end_layout

\end_inset

 Thesis data shows that this is not always true; there are policy-wise useless
 P3P headers being sent from some webpages, most probably to bypass Internet
 Explorer's (not all versions) strict cookie rules for third-party site
 without a P3P HTTP header.
 This has been highlighted by Microsoft in 2012, pointing at Google's P3P
 use.
\end_layout

\begin_layout Quotation
By default, IE blocks third-party cookies unless the site presents a P3P
 Compact Policy Statement indicating how the site will use the cookie and
 that the site’s use does not include tracking the user.
 Google’s P3P policy causes Internet Explorer to accept Google’s cookies
 even though the policy does not state Google’s intent.
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://blogs.msdn.com/b/ie/archive/2012/02/20/google-bypassing-user-privacy-settings.aspx"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Looking at collected HAR data there are many examples of P3P headers.
 In the dataset 
\begin_inset Quotes eld
\end_inset

se.2014-07-10.random.100000-http
\begin_inset Quotes erd
\end_inset

 from 2014-09-01 with about 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{1944000}
\end_layout

\end_inset

 recorded requests, about 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{90000}
\end_layout

\end_inset

 present a P3P policy.
 There are about 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{550}
\end_layout

\end_inset

 unique values, including example values shown in Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Top-P3P-values"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtable{p3p.counts.tsv}{}{display columns/1/.style={string type, column type=T}}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:Top-P3P-values"

\end_inset

Top P3P values
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Quotes eld
\end_inset

Potato
\begin_inset Quotes erd
\end_inset

 comes from an example in a discussion regarding Internet Explorer and cookie
 blocking.
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none

\begin_inset Foot
status open

\begin_layout Plain Layout

\size normal
\emph on
Cookie blocked/not saved in IFRAME in Internet Explorer
\family roman
\series medium
\shape up
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
 
\begin_inset CommandInset href
LatexCommand href
target "http://stackoverflow.com/a/16475093"

\end_inset


\end_layout

\end_inset


\family default
\series default
\shape default
\size default
\emph default
\bar default
\strikeout default
\uuline default
\uwave default
\noun default
\color inherit
 Other examples include 
\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none

\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
CP="This is not a P3P policy! It is used to bypass IEs problematic handling
 of cookies"
\end_layout

\end_inset

, 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
CP="This is not a P3P policy.
 Work on P3P has been suspended since 2006: 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
url{http://www.w3.org/P3P/}
\end_layout

\end_inset

"
\end_layout

\end_inset

, 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
CP="This is not a P3P policy.
 P3P is outdated."
\end_layout

\end_inset

, 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
CP=
\backslash
"Thanks IE8
\backslash

\end_layout

\end_inset

 (which is a malformed value), 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
CP="No P3P policy because it has been deprecated"
\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
This is but one example of where quantitive analysis of real-world web pages
 shows differences between technical, intended or perceived usage.
 While P3P may be an outdated example that has been researched 
\begin_inset CommandInset citation
LatexCommand cite
key "Leon:2010:TAM:1866919.1866932"

\end_inset

, it shows how automated, generic tooling can help researchers a lot in
 their understanding of usage in the wild.
\end_layout

\begin_layout Chapter
Related work
\end_layout

\begin_layout Standard
Privacy research, tracker research and internet measurement can be challenging,
 as has been shown by others.
 As .SE have in-house experts, their information was very valuable at an
 early stage -- several pitfalls may have been avoided.
 This chapter discusses results in comparison to others' experience, methodology
 limitations and puts the work in a context.
\end_layout

\begin_layout Section

\emph on
.SE Health Status
\emph default

\begin_inset CommandInset label
LatexCommand label
name "sub:.SE-Health-Status"

\end_inset


\end_layout

\begin_layout Standard
While .SE themselves have written reports analyzing the technical state of
 services connected to .se domains, 
\emph on
.SE Health Status
\emph default
 
\begin_inset CommandInset citation
LatexCommand cite
key "Lowinder:2008:healthstatus,Lowinder:2009:healthstatus,Lowinder:2010:healthstatus,Lowinder:2011:healthstatus,Lowinder:2012:healthstatus,Lowinder:2013:healthstatus"

\end_inset

, the focus has not been on exploring the web services connected to these
 domains.
 The research is focused on statistics about usage and security in DNS,
 IP, web and e-mail; the target audience is IT strategists, executives and
 directors.
 Data for the reports is analyzed and summarized by Anne-Marie Eklund Löwinder,
 a world-renown DNS and security expert
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.iis.se/bloggare/anne-marie/"

\end_inset


\end_layout

\end_inset

, while the technical aspects and tools are under the supervision of Patrik
 Wallström, a well known DNSSEC expert and free and open source software
 advocate
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.iis.se/bloggare/pawal/"

\end_inset


\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
The thesis subject has been selected to be in line with the .SE reports,
 but focusing on web issues; code may be reused and results may be included
 in future reports.
 The 
\emph on
.SE Health Status
\emph default
 reports do offer some groundwork in terms of selecting and grouping Swedish
 domains, HTTPS usage and Google Analytics coverage 
\begin_inset CommandInset citation
LatexCommand cite
key "Lowinder:2010:healthstatus,Lowinder:2011:healthstatus,Lowinder:2012:healthstatus"

\end_inset

 which have been discussed in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:.SE-Health-Status-comparison"

\end_inset

.
 The report
\emph on
 
\emph default
is based on data collected from around 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{900}
\end_layout

\end_inset

 .se domain names deemed of importance to the Swedish society as a whole,
 as well as random selection of 1% of the registered .se domain names.
\end_layout

\begin_layout Standard
Results for the .se zone and curated lists have during meetings with Wallström
 and Eklund Löwinder been reported to be reasonable regarding comparable
 results, such as reachability, HTTPS adaptation and Google Analytics coverage.
\end_layout

\begin_layout Standard
Thesis input (domain lists) preparation was automated based on .SE:s internally
 used data formats.
 As the thesis is more detailed in analyzing web content than previous reports,
 there is not yet enough historic data to show a change over time.
\end_layout

\begin_layout Section

\emph on
Characterizing Organizational use of Web-based Services
\end_layout

\begin_layout Standard
Gill and Arlitt 
\emph on
et al.

\emph default
 
\begin_inset CommandInset citation
LatexCommand cite
key "Gill:2011:COU:2019643.2019646"

\end_inset

 analyze several HTTP datasets collected in HTTP proxies at different times
 and in different organizations.
 Two datasets are from 2008; one enterprise and one university.
 They are contrasted with a dataset collected at a residential cable modem
 ISP in 1997.
\end_layout

\begin_layout Standard
The paper introduces methods to identify and categorize the collected traffic
 to 
\emph on
services providers
\emph default
 (organizations) and 
\emph on
service instances
\emph default
 (a service with a specific use, possibly accessed through different domains
 names) by looking at over 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{2000000}
\end_layout

\end_inset

 unique HTTP 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
Host
\end_layout

\end_inset

 header values in total.
 First domain components are grouped in different ways, such as 
\emph on
brands
\emph default
 (first part after the public suffix), then top results are manually consolidate
d to service providers.
 Further consolidation is done by looking at domain name system (DNS) and
 organization identifiers from Regional Internet Registry (RIR) entries.
 Services are then grouped to 
\emph on
service classes
\emph default
; some automated grouping is also possible by looking at HTML metadata.
 
\begin_inset Note Note
status open

\begin_layout Plain Layout
\begin_inset Quotes eld
\end_inset

using the Centroid method
\begin_inset Quotes erd
\end_inset

; insert reference to Han, E.
 and Karypis, G.
 2000.
 Centroid-based document classification: Analysis and experimental results.
 In Proc.
 PKDD.
 Lyons, France.
\end_layout

\end_inset

 This thesis chose to use the public suffix list for automatic domain part
 identification, down to the brand (primary domain) level 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Public-suffix-list"

\end_inset

.
 In combination with Disconnect's blocking list, organizations and a simple
 categorization is obtained 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect's-blocking-list"

\end_inset

.
 It is a less generic way and possibly not fully effective on historical
 data, but accurate for the amount of work put in, as manual grouping and
 classification work is avoided -- and possibly improved -- by using crowdsourci
ng.
\end_layout

\begin_layout Standard
The single domain which is easiest to compare is doubleclick.net, listed
 as a separate brand in the paper, is shown to have 19% of transactions
 in the 2008 datasets.
 Thesis numbers (11-53%) are higher for most datasets 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Top-domains-Google"

\end_inset

, but the paper datasets also contain repeated and continuous use of services
 -- such as Facebook and client side applications -- which may lower relative
 numbers for other services.
\end_layout

\begin_layout Standard
While a comparison between paper and thesis numbers would be possible for
 HTTP methods, HTTP status codes as well as content types, they would require
 additional, slightly modified analysis of existing requests.
\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
(Can't make the comparison; thesis numbers in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:HTTP-status-codes"

\end_inset

 are for origin requests.)
\end_layout

\begin_layout Plain Layout
Paper data shows a surprising amount of 200 status responses (72-78%), especiall
y in combination with the amount of 304 responses (12-21%), in comparison
 with the thesis (
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:HTTP-status-codes"

\end_inset

: 55-62%, and close to 0%).
 Of course, the thesis never re-requests a website, which would explain
 the lack of 304 responses.
 The difference is instead a lot of 3xx redirect responses, as more than
 50% of top sites redirect to their preferred, canonical URL.
\end_layout

\end_inset


\end_layout

\begin_layout Section

\emph on
Challenges in Measuring Online Advertising Systems
\end_layout

\begin_layout Standard
The paper 
\emph on
Challenges in Measuring Online Advertising Systems
\emph default
 
\begin_inset CommandInset citation
LatexCommand cite
key "Guha:2010:CMO:1879141.1879152"

\end_inset

 shows that identifying ads and how data collected from trackers affect
 ads has several challenges.
 This thesis does not look at 
\emph on
which
\emph default
 ads are shown to a user, but rather where ads are served from.
 Potentially relevant to this thesis would be for example DNS load-balancing
 by ad networks, cookies differing between browser instances and local proxies
 affecting the HTTP request.
 This is how they were considered and dealt with:
\end_layout

\begin_layout Itemize
Final dataset downloads were performed by a single machine 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Computer-machines"

\end_inset

 so there should not be any proxy partially affecting the results 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Network-connection"

\end_inset

.
\end_layout

\begin_layout Itemize
Load-balancing such as using multiple (round-robin) DNS records might lead
 to varying results, depending on the remote system setup.
 Browser instances themselves are short-lived and share the same system-level
 DNS cache, so requests made within the DNS records' time to live (TTL)
 should act, and thus vary, uniformly.
\end_layout

\begin_layout Itemize
Cookies might affect which ad network is used by an ad network aggregator;
 in this case each request is made by a new browser instance without any
 cookies, so results should be random -- at least from the client-side point
 of view 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Software-considerations-cookies"

\end_inset

.
 As domains/websites are not reloaded, but rather requested four separate
 times 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Dataset-variations"

\end_inset

, results may differ but in a way unaffected by browser history and cache
 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Software-considerations-cached-content"

\end_inset

.
\end_layout

\begin_layout Section
.SE Domain Check
\end_layout

\begin_layout Standard
In order to facilitate repeatable and improvable analysis for this thesis,
 tools have been developed to perform the collection and aggregation steps
 automatically.
 .SE already has a set of tools that run monthly; integration and interoperabilit
y will smooth the process and continuous usage.
 There is also a public .SE tool to allow website owners to test their own
 sites, 
\emph on
Domänkollen
\emph default

\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset Quotes eld
\end_inset


\emph on
Domain Check
\emph default
.
\begin_inset Quotes erd
\end_inset

 Domänkollen was not publicly released at the time of writing.
\end_layout

\end_inset

, which might benefit from some of the code developed within the scope of
 this thesis.
\end_layout

\begin_layout Section
Cookie syncing
\end_layout

\begin_layout Standard
A recent large-scale study by Acar 
\emph on
et al.

\emph default
 
\begin_inset CommandInset citation
LatexCommand cite
key "Acar:2014:WNF:2660267.2660347"

\end_inset

 included a cookie syncing privacy analysis.
 It was shown that unique user identifiers were shared between different
 third parties.
 IDs can be shared in different ways.
 If both third parties exist on the same page, they can be shared through
 scripts or by looking for any IDs in the location URL.
 They can also be shared by one third-party sending requests to a second
 third-party (known as a fourth-party), either by leaking the location URL
 as an HTTP referrer or by embedding it in the request URL.
 In crawls of Alexa's top 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{3000}
\end_layout

\end_inset

 domains, one third-party script in particular sends requests with synced
 IDs to 25 domains; the IDs were eventually shared with 43 domains.
 They also showed that a user's browsing history reconstruction rate rose
 from 1.4% to 11% when backend/server-to-server overlaps were modeled.
\end_layout

\begin_layout Itemize
The study used a modified Firefox browser to look at values stored in primarily
 cookies.
 As all HTTP requests are recorded in this thesis, including HTTP cookie
 headers, a limited version of the same study could be performed.
\end_layout

\begin_layout Itemize
Acar 
\emph on
et al.

\emph default
 looks at in-browser scripting utilizing for example 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
localStorage
\end_layout

\end_inset

, 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
canvas
\end_layout

\end_inset

 fingerprinting and ID storage in external plugins such as Flash.
 While that might be possible, the modifications that would need to be made
 to phantomjs are non-trivial, and my current scope does not allow for that.
 With their research as a base, cookie respawning and sharing could possibly
 be confirmed using this thesis' code as a external tool using a different
 browser platform.
\end_layout

\begin_layout Section
\begin_inset Argument 1
status open

\begin_layout Plain Layout
HTTP Archive
\end_layout

\end_inset

HTTP Archive
\begin_inset CommandInset label
LatexCommand label
name "sub:HTTP-Archive"

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://httparchive.org/"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
In an effort to measure web page speed on the internet, initially developed
 in October 2010, the HTTP Archive collects HAR data and runs analyses on
 them.
 Unfortunately, their official data dumps are in a custom format, not the
 original HAR files, but there are some direct comparisons to be made with
 their 
\emph on
Interesting stats
\emph default

\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://httparchive.org/interesting.php"

\end_inset


\end_layout

\end_inset

 aggregate data.
\end_layout

\begin_layout Itemize
Pages Using Google Libraries API
\end_layout

\begin_layout Itemize
HTTPS Requests
\end_layout

\begin_layout Itemize
Total Requests per Page
\end_layout

\begin_layout Standard
It seems there are unofficial, not yet fully developed, exports of HAR data.
 Unfortunately they weren't made available until late in the thesis process,
 and could not be used for software validation and comparison.
\end_layout

\begin_layout Chapter
Conclusions and future work
\begin_inset CommandInset label
LatexCommand label
name "chap:Conclusions-and-future-work"

\end_inset


\end_layout

\begin_layout Standard
In this chapter we first summarize our main conclusions, list unanswered
 questions, and then we discuss promising directions for future work.
 There are many potential improvements which could help other researchers,
 as well as refine the analysis of data already collected for this thesis.
\end_layout

\begin_layout Section
Conclusions
\end_layout

\begin_layout Standard
The use of external resources and known trackers is very high.
 While it has been a trend to outsource resource hosting and to use third-party
 services, it was previously unknown to what extent.
 It has now been shown that most websites use external resources in some
 form -- almost 80% of the 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{123000}
\end_layout

\end_inset

 responding domains looking at the most common variation, HTTP-www 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Domain-and-request-counts"

\end_inset

.
 This broad non-governmental tracking should be a concern for privacy minded
 individuals much as government controlled surveillance is.
\end_layout

\begin_layout Standard
This concern should be even higher on HTTPS enabled websites.
 Such sites have made an active choice to install encryption to avoid passive
 surveillance and stave off potential attacks -- but 94% of HTTPS-www variation
 domains use external resources 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Domain-and-request-counts"

\end_inset

.
\end_layout

\begin_layout Standard
It seems using a blacklist to stop trackers is the wrong way to go about
 it.
 Even with the crowdsourced list used by popular privacy tool Disconnect,
 the blocking list 
\emph on
only detects 10%
\emph default
 of external primary domains as trackers for top website datasets 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Tracker-detection-effectiveness"

\end_inset

.
 Looking at the sheer number of external domains in use, it is easy to understan
d why blocking high-profile targets seems like a good option -- but if 90%
 of external domains aren't listed even as known, 
\emph on
desirable
\emph default
 content, the blacklisting effort seems futile.
 Further research could use other blacklists and compare effectiveness 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Ad-and-privacy-blocking-lists"

\end_inset

.
\end_layout

\begin_layout Section
Open questions
\end_layout

\begin_layout Standard
There are further questions in line with current results which could potentially
 be answered with additional research.
\end_layout

\begin_layout Itemize
Could any external resources actually be considered internal, despite being
 loaded from external domains?
\end_layout

\begin_layout Itemize
Could internal resources also be seen as external, if another organization
 manage the servers?
\end_layout

\begin_layout Itemize
If a resource whitelist is used, how large does it have to be to get a functiona
l website -- and how to determine functionality?
\end_layout

\begin_layout Itemize
How can more domains be connected to organizations, in terms of ownership,
 as in Disconnect's blocking list?
\end_layout

\begin_layout Itemize
How to determine if a resource
\end_layout

\begin_deeper
\begin_layout Itemize
Crosses Sweden's borders in transit?
\end_layout

\begin_layout Itemize
Is handled by an organization with base or ownership outside of Sweden?
\end_layout

\end_deeper
\begin_layout Itemize
What user data could potentially be collected, and subsequently inferred?
\end_layout

\begin_layout Itemize
To what extent can the average Swedish internet user's browsing habits be
 correlated across the most commonly visited webpages?
\end_layout

\begin_layout Itemize
Can the same techniques be applied to data from countries other than Sweden?
\end_layout

\begin_layout Section
Improving information sharing
\end_layout

\begin_layout Subsection
Creating an information website
\begin_inset CommandInset label
LatexCommand label
name "sec:Creating-an-information-web-site"

\end_inset


\end_layout

\begin_layout Standard
Despite thesis code being open source, much of the thesis data is hard to
 retrieve, analyze and process for individuals.
 A separate tool performing the work for anyone should be created.
 Apart from presenting data already collected as a part of the thesis, it
 could accept user input to analyze individual domains.
 With several domains as input, any overlap can be detected and presented
 to the user as an information sharing graph.
 One of the inspirations for this thesis was Collusion
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://collusion.toolness.org/"

\end_inset


\end_layout

\end_inset

, which is a tool to dynamically display from which external domains a page
 retrieves resources right in the browser.
 A version of the same tool could be built, where instead of letting the
 user's browser retrieve sites the server would do it.
 This way a non-technical user does not have to 
\begin_inset Quotes eld
\end_inset

risk
\begin_inset Quotes erd
\end_inset

 anything by visiting web pages, and their relationship could be displayed
 anyways.
 Collecting data server-side also allows for cached lookups and a grander
 scope, where further relationships apart from the first hand ones could
 be suggested.
 
\begin_inset Quotes eld
\end_inset

If you frequently visit these sites, you might also be visiting theses sites
 -- click to display their relationships as well.
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Standard
Over time and with user input, the dataset collected on the server would
 increase, and a historical graph relating to both results shown in this
 thesis and the relationships between sites can be created.
 This is similar to what both the HTTP Archive 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:HTTP-Archive"

\end_inset

 is doing on a large scale but with slightly different focus, and what the
 
\emph on
.SE Health Status
\emph default
 is doing but on a less continuous basis and with a shifting focus.
\end_layout

\begin_layout Subsection
Package publicly available data
\end_layout

\begin_layout Standard
Datasets based on publicly available datasets can be packaged for other
 researchers to analyze.
 While fresh data would be better, a larger dataset can take time to download
 on a slow connection or computer and all software may not be available
 to the researcher.
 It lowers the step in for others who might be interested in the same kind
 of research, which might lead to the software used in this thesis being
 improved.
\end_layout

\begin_layout Subsection
Code documentation
\end_layout

\begin_layout Standard
With some 75 scripts written and released as open source, the need for documenta
tion has gradually increased.
 The reason for not writing proper documentation -- not having direct collaborat
ors writing code -- is a hinderance for future collaborators or users to
 get started.
 While code documentation has not been an explicit part of the thesis plan,
 it can be seen as an important step for future usage.
 The code is not magic in any way, but if understanding the functionality
 of a file required reading over a hundred lines of code instead of two
 or three lines of comments, it means a rather steep learning curve for
 something that is supposed to be simple.
\end_layout

\begin_layout Section
Improving domain retrieval
\end_layout

\begin_layout Subsection
Automated testing
\end_layout

\begin_layout Standard
So far all testing of har-heedless and phantomjs has been done manually.
 It has proven to be a working setup, as thesis results are based on these
 tools, but the features are to be considered fragile as there are no regression
 tests.
 Automated tests of the different levels (shell scripts, 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
netsniff.js
\end_layout

\end_inset

 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:get/netsniff.js"

\end_inset

, screenshots, error handling) might help achieve stability in case of for
 example future improvements of phantomjs.
 Tests might include setting up a web server with test pages serving different
 kinds of content, as well as different kinds of errors.
 During mass downloading of domains phantomjs has been observed outputting
 error messages, such as failed JPEG image decoding and unspecified crashes.
 The extent of these errors have so far not been examined, as they have
 ended up being clumped together with external errors such as network or
 remote server failures.
\end_layout

\begin_layout Subsection
Investigating failed domains
\end_layout

\begin_layout Standard
There are many reasons domain retrieval could fail, but for top or curated
 domain lists the chances of the site being down are considerably lower
 than for randomly selected domains.
 Each website has been requested up to three times, in order to avoid intermitte
nt problems 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Failed-domains"

\end_inset

.
 Despite this, certain sites do not respond to requests from the automated
 software.
 There are several ways for a remote system to detect requests from automation
 software, with the simplest one being looking at the HTTP 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
User-Agent
\end_layout

\end_inset

 browser make/model identifier string.
\end_layout

\begin_layout Standard
Automated downloading of webpages, especially downloading several in short
 succession, can be seen by site and service owners as disruptive by using
 system resources and skewing statistical data.
 Traversing different pages on a single website can also be detected by
 looking at for example navigational patterns 
\begin_inset CommandInset citation
LatexCommand cite
key "Tan:2002:DWR:593432.593521,Lourenco:2006:CWC:1145581.1145634"

\end_inset

.
 By only downloading the domain root page and associated resources this
 tool might not fall into that category of detection.
\end_layout

\begin_layout Standard
As some sites respond to desktop browser requests, but not har-heedless'
 requests, it is believed they have implemented certain 
\begin_inset Quotes eld
\end_inset

protection
\begin_inset Quotes erd
\end_inset

 from this kind of software.
 In respect of their wish not to serve automated requests, har-heedless'
 browser has not been modified, for example by using a different 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
User-Agent
\end_layout

\end_inset

 string, to try to avoid these measures.
\end_layout

\begin_layout Subsection
Browser plugins
\end_layout

\begin_layout Standard
If possible, a set of common browser plugins could be installed into phantomjs.
 The first that comes into mind is Adobe Flash, which is sometimes used
 to display dynamic ads.
 Flash also has the ability to request resources from other domains, so
 it might affect results to not render them.
 An additional problem might be that Flash has its own cookie system, which
 used storage external to the browser.
 This brings a new set of potential problems, as Flash cookies are a big
 part of evercookies and cookie respawning 
\begin_inset CommandInset citation
LatexCommand cite
key "Acar:2014:WNF:2660267.2660347"

\end_inset

.
 This means that a headless browser without persistent storage might end
 up having identifier cookies set in Flash storage, thus being easily and
 uniquely identified on subsequent visits.
 While this might not affect this thesis much, as external plugins have
 not been installed, it might affect other kinds of research being conducted
 based on the same tools.
\end_layout

\begin_layout Subsection
System language
\end_layout

\begin_layout Standard
Tests were run on English language systems, without making any customizations
 to phantomjs' settings or HTTP 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
Accept-Language
\end_layout

\end_inset

 headers.
 While sites have been downloaded from around the world, localized domains
 might behave differently depending on user language.
 Google has a recommendation saying that they will prioritize TLDs specific
 to a region with a certain language (such as .se and Sweden) for users sending
 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
Accept-Language
\end_layout

\end_inset

 prioritizing Swedish
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://googlewebmastercentral.blogspot.se/2010/03/working-with-multi-regional-websites.html"

\end_inset


\end_layout

\end_inset

.
 This stems from them seeing that localized results have a higher usage
 rate.
\end_layout

\begin_layout Subsection
System fonts
\end_layout

\begin_layout Standard
Some of the difference between site screenshots and manually browsing to
 a site is in the fonts displayed.
 Most of the domains have been downloaded on a headless server, where fonts
 have not mattered to the system owner.
 Installing additional fonts commonly available on average user systems
 might reduce perceived difference.
\end_layout

\begin_layout Subsection
Do Not Track
\end_layout

\begin_layout Standard
While the HTTP header 
\emph on
Do Not Track
\emph default
 (
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
DNT
\end_layout

\end_inset

) has not been set, it would have been interesting to look at the difference
 in response from remote services.
 Detecting usage of the server-response header 
\emph on
Tracking Status Value
\emph default
 (
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
TSV
\end_layout

\end_inset

) would be a good start
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.w3.org/2011/tracking-protection/drafts/tracking-dnt.html"

\end_inset


\end_layout

\end_inset

.
 As cookie headers can be analyzed, the difference could have been detected
 both per origin domain and per connected service.
 See also the P3P analysis 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Platform-for-Privacy-(P3P)-Project"

\end_inset

 for a related header.
\end_layout

\begin_layout Subsection
Using more scalable software
\end_layout

\begin_layout Standard
While invoking phantomjs on a single machine is often enough (
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Computer-machines"

\end_inset

, 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:System-load-during-downloads"

\end_inset

), that level of computing power is not always enough to download large,
 or continuously monitor, domain lists in a timely manor.
 While downloaded HAR file output is easy enough to combine from different
 machines, it might be worth investigating already parallelized software,
 such as spookystuff
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://github.com/tribbloid/spookystuff"

\end_inset


\end_layout

\end_inset

.
 Built to spider and extract data from websites using multiple -- even thousands
 -- of machines on Amazon's cloud computing platform, it could enable analysis
 of for example entire TLD zones.
\end_layout

\begin_layout Subsection
Domain lists
\end_layout

\begin_layout Standard
There are other domain lists that might have been suitable in this thesis.
 One curated top list is the KIA index, a list of top sites in Sweden aggregatin
g statistics from different curated sites' underlying analytics tools.
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.kiaindex.net/"

\end_inset


\end_layout

\end_inset

 Other TLD zone files, both from other countries and more generic ones,
 could be used as well.
 For example the new generic TLDs could be compared to older ones.
\end_layout

\begin_layout Section
Improved data analysis and accuracy
\end_layout

\begin_layout Standard
Improvements to the data transformation and analysis steps.
\end_layout

\begin_layout Subsection
Refined ad and privacy blocking lists
\begin_inset CommandInset label
LatexCommand label
name "sec:Ad-and-privacy-blocking-lists"

\end_inset


\end_layout

\begin_layout Standard
There are several lists of known ads and privacy invading trackers in use
 in blocking software than Disconnect 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect's-blocking-list"

\end_inset

.
 One of the most popular ones is EasyList
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://easylist.adblockplus.org/"

\end_inset


\end_layout

\end_inset

, which exists in several varieties -- privacy blocking, country specific,
 social media content blocking and others.
 They were considered, but in the end not incorporated because of the filter
 list format.
 It is a mixture of HTML element and URL blocking, and it lacks the connection
 between blocks and corresponding organization
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://easylist-downloads.adblockplus.org/easylist.txt"

\end_inset


\end_layout

\end_inset

.
 There is also Ghostery
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.ghostery.com/"

\end_inset


\end_layout

\end_inset

, which uses a proprietary list that also contains organizations, but it
 has not been used because of licensing issues
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.ghostery.com/eula"

\end_inset


\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
In another approach, future research could use 
\emph on
whitelisting
\emph default
 to try to determine challenges in detecting and recording 
\emph on
desirable
\emph default
 and 
\emph on
functional
\emph default
 external resources.
 An example of whitelisting already exists in Disconnect's content category,
 which might be a good start 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Trackers-which-deliver-content"

\end_inset

.
\end_layout

\begin_layout Standard
On a technical level, some blocking rule formats have also posed a problem
 in terms of implementation into the current data processing framework that
 is har-dulcify.
 It relies heavily on jq 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:jq"

\end_inset

, which does not have a public release that implements in regular expressions
 support, a major part of some blocking lists.
 The idea is that ads and related resources are filtered matching requests'
 complete URL against the blocking rules, which are a mixture of both more
 coarse and more fine-grained than Disconnect's domain based rules.
 One example is 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
/ads/
\end_layout

\end_inset

, matching a folder name that suggests that all URLs containing this particular
 path substring is serving advertisements.
 The thought of using a single path substring to block advertisements served
 from any domain is more coarse than pinpointing a single domain, but it
 is also more specific as it would not block legitimate content from another
 subfolder on the same domain.
 This way general ad serving systems can be blocked, while domains that
 serve both ads and content is still allowed serve the content without interferi
ng with the blocking of ads.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
At the time of writing, jq is released as version 1.4.
 Support for regular expressions is planned for version 1.5.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Automated testing
\end_layout

\begin_layout Standard
Data transformations have been written in a semi-structured manner, with
 separate files for most separate tasks, often executed in serial stages.
 Each task accepts a certain kind of data as input for the transformation
 to work correctly -- but as both input and output from separate stages
 looks very similar, it is hard to tell which kind of data it accepts and
 what the expected output is -- and if a change in one stage will affect
 later stages.
 Writing automated tests for each stage would have helped during both adding
 functionality and refactoring the structure.
 At times, there have been rather time-consuming problems with unexpected
 or illegal input from real world sites -- extracting that kind of input
 to create a test suite would have sped up fixes and raised confidence in
 that the input would be handled appropriately and output would still be
 correct.
 So far that has not been done, and much of the opportunity to gain from
 tests have been lost as work has progressed past each problem.
\end_layout

\begin_layout Standard
One solution to validating both input and output would have been to create
 JSON schemas
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://json-schema.org/"

\end_inset


\end_layout

\end_inset

 for each transformation.
 This kind of verification can easily be automated, and it will help any
 future changes.
\end_layout

\begin_layout Subsection
Code reuse
\end_layout

\begin_layout Standard
Much of the code written in shell scripts, both Bash and jq code, is duplicated
 between files.
 While common functionality suitable for pipelining have been broken out,
 shared functions have not.
 Bash provides the 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
source
\end_layout

\end_inset

 command for sharing functionality.
 Code sharing in jq through the use of modules and packages is still under
 development, but there is a way to load a single external command file.
 This file can be precomposed externally by concatenating files with function
 definitions first, and the actual usage of those functions second.
 The improvement was postponed due to the relative little reuse in early
 scripting and bright outlook on modules and packages support.
 As the number of scripts grew, code sharing/composition possibilities grew
 as well -- and with them possible improvements in development speed, consistenc
y and correctness.
 At this stage, software stability is more important for the final dataset
 download and analysis, and code refactoring can only be postponed.
 Foreseeing a greater reuse of JSON and jq tools, a separate open source
 project has been started -- jq-hopkok 
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://github.com/joelpurra/jq-hopkok"

\end_inset


\end_layout

\end_inset

 -- where some scripts have been collected.
 Many functions and utilities local to har-dulcify are project-agnostic,
 and thus suitable objects to move to jq-hopkok for ease composition.
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
At the time of writing, jq is released as version 1.4.
 Support for modules is planned for a version after 1.5.
 Packages/package managers are external to the jq core, and do not follow
 the same planning.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Ignore domains without content
\begin_inset CommandInset label
LatexCommand label
name "sub:Ignore-domains-without-content"

\end_inset


\end_layout

\begin_layout Standard
Many domains do not contain any actual content.
 Examples include web server placeholder pages (
\begin_inset Quotes eld
\end_inset

Installation succeeded
\begin_inset Quotes erd
\end_inset

), domain listings (
\begin_inset Quotes eld
\end_inset

Index of /
\begin_inset Quotes erd
\end_inset

), parked domains (
\begin_inset Quotes eld
\end_inset

This domain was purchased from ...
\begin_inset Quotes erd
\end_inset

) and advertisement domains (such as Google Adsense for Domains
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.google.com/domainpark/index.html"

\end_inset


\end_layout

\end_inset

, now retired, or similar Adsense usage).
 There is a Sweden-centric list of site titles for recognized non-content
 pages available internally at .SE, but it has not been incorporated.
\end_layout

\begin_layout Subsection
Implement public suffix rules, use non-ICANN suffixes
\begin_inset CommandInset label
LatexCommand label
name "sub:Implement-public-suffix-rules-use-non-ICANN-suffixes"

\end_inset


\end_layout

\begin_layout Standard
As datasets have been analyzed, public suffix rules have proven to work
 in general, with co.uk and similar second level domains being properly grouped
 and primary domains extracted.
 There are still traces of the wildcard rules 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Public-suffix-list"

\end_inset

 in the data though, which means that while numbers are low, there are domains
 for which the public suffix rules have not been properly applied.
\end_layout

\begin_layout Standard
Other potential improvements would be implementing the non-ICANN, private
 suffixes.
 This would for example lower the aggregate numbers for cloudfront.net and
 amazonaws.com as primary domains in the aggregates, focusing on the fact
 that subdomains belongs to different organizations.
 Disconnect's dataset, which lists cloudfront.net as a single tracker entity
 would still present Amazon as a the single tracking organization behind
 the domain though, which might be a bit misleading.
 It is true that they can read traffic data in the same way other web hosting
 and cloud services host can read traffic data to their customers, but customers
' common domain name suffix has little to do with it.
\end_layout

\begin_layout Subsection
Separating analysis steps
\begin_inset CommandInset label
LatexCommand label
name "sub:Separating-analysis-steps"

\end_inset


\end_layout

\begin_layout Standard
As some of the analysis relies on aggregate numbers, such as domain and
 requests counts, they expect the entire dataset to be available at the
 start of the analysis.
 Saving these numbers in an intermediate step would allow further dataset
 refinement without having to perform the same filtering multiple times,
 and thus ease second-level filtering.
 Custom data questions 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Questions"

\end_inset

 are one example, as they need to carry the number of (non-failed) domains
 throughout the calculations, even though only a small subset of the data
 is interesting, in order to present them as part of the output.
\end_layout

\begin_layout Standard
Another example is the current analysis split into unfiltered and non-failed
 domains, which then is further split into unfiltered, internal and external
 resources 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:aggregate/analysis.sh"

\end_inset

.
 If the first step had been made as a separate filtering step instead of
 an integrated part, further analysis would have been clearer as well as
 easier to modularize.
\end_layout

\begin_layout Standard
Saving the intermediate filtering results would simplify selecting for example
 non-failed domains which only use secure resources 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Insecure-versus-secure-resources"

\end_inset

, to look at their usage of internal/external/tracker usage compared to
 insecure domains 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Internal-versus-external"

\end_inset

.
 While redirects have been analyzed to some extent 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:HTTP,-HTTPS-and-redirects"

\end_inset

, another interesting idea would be to select domains with redirects 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:HTTP-status-codes"

\end_inset

 and perhaps consume the redirects -- especially from secure domain variations
 looking at secure redirects -- before performing further analysis.
\end_layout

\begin_layout Subsection
Dynamic grouping, domain selection
\end_layout

\begin_layout Standard
The har-heedless software was built to download domains based on a simple
 list, put them in folders per list and list variation 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Dataset-variations"

\end_inset

 and then har-dulcify use the most recent HAR data to perform the aggregate
 analysis for the entire dataset.
 The overlap between different domain lists have been downloaded multiple
 times, and each round of downloads have started from zero to be sure that
 the domain list results represent a specific point in time.
 It would be beneficial to download each unique domain once then select
 domains as belonging to a specific analysis group, currently represented
 by domain lists, after they have been downloaded.
 This would allow a more dynamic grouping, and possibly re-arranging of
 domains to enable more interesting second-level analysis.
\end_layout

\begin_layout Itemize
All curated or top lists grouped together.
\end_layout

\begin_layout Itemize
All random TLD zone selections grouped together.
\end_layout

\begin_layout Itemize
All sites from, or popular in, Sweden grouped together.
\end_layout

\begin_layout Itemize
Use classifications from one dataset variation as the basis of selection
 in another, for example looking at how many domains which respond to HTTPS
 requests also redirect their HTTP redirects to use HTTPS.
\end_layout

\begin_layout Itemize
Exclude domains which are deemed to be have no content, such as parked domains
 and other placeholders 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Ignore-domains-without-content"

\end_inset

.
\end_layout

\begin_layout Itemize
Use of external tools to classify domains based on, for example, web server
 IP-addresses mapped to a geographical locations
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://en.wikipedia.org/wiki/Geolocation_software"

\end_inset


\end_layout

\end_inset

, domain registrar or HTTPS certificate properties such as validity.
\end_layout

\begin_layout Itemize
Similarity selection -- allowing a selection of domains to be the basis
 of finding similar domains.
 Similarities could be based on number of HTTP requests, specific external
 service usage or even individual unique IDs in query strings for services
 such as Google Analytics and Google AdWords.
\end_layout

\begin_layout Subsection
Incremental adding and updating of domains
\end_layout

\begin_layout Standard
Another improvement would be to ensure that all data mapping steps are built
 in such a way that a single domain can be excluded or included from the
 results.
 This would enable single domains to be updated, perhaps as part of continuous
 analysis or from user input 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Creating-an-information-web-site"

\end_inset

, without having to recalculate all steps for the entire dataset results.
 While most incremental updates are a matter of easy addition and subtraction,
 some late analysis steps introduce coverage calculations and other arithmetical
 divisions, which may cause some data/precision loss if reversed.
 If these data reductions can be deferred to a separate mapping step, computing
 time might be acceptable.
\end_layout

\begin_layout Standard
\begin_inset Newpage clearpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset bibtex
LatexCommand bibtex
bibfiles "../references/thesis,../references/rfc-selection"
options "bibtotoc,plain"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage cleardoublepage
\end_inset


\end_layout

\begin_layout Chapter
\start_of_appendix
Methodology details
\begin_inset CommandInset label
LatexCommand label
name "chap:Methodology-details"

\end_inset


\end_layout

\begin_layout Section
Domains
\begin_inset CommandInset label
LatexCommand label
name "sec:Domains"

\end_inset


\end_layout

\begin_layout Standard
Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Domain-lists-in-use"

\end_inset

 has the details of the final domain lists in use, including full dataset
 size
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.iis.se/domaner/statistik/tillvaxt/?chart=active"

\end_inset


\end_layout

\end_inset


\begin_inset space \thinspace{}
\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://stats.dk-hostmaster.dk/domains/total_domains/"

\end_inset


\end_layout

\end_inset

 and selection method.
 Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:TLDs-in-dataset-in-use"

\end_inset

 shows the top TLDs in the list of unique domains; while random TLD samples
 of course come from a single TLD, top lists are mixed.
 This list can be compared to the per-TLD (or technically public suffix)
 results in Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Public-suffix-coverage"

\end_inset

, which shows the coverage of TLDs for external requests per dataset.
\end_layout

\begin_layout Standard

\end_layout

\begin_layout Subsection

\emph on
.SE Health Status
\emph default
 domains
\begin_inset CommandInset label
LatexCommand label
name "sub:.SE-Health-Status-domains"

\end_inset


\end_layout

\begin_layout Standard
When .SE performs their annual 
\emph on
.SE Health Status
\emph default
 report measurements, they use an in-house curated list of domains of national
 interest.
 These domains are mostly from the .se zone and cover government, county,
 municipality, higher education, government-owned corporations, financial
 service, internet service provider (ISP), domain registrar, and media domains
 -- see Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:.SE-Health-Status-categories"

\end_inset

 for category domain counts and descriptions.
 Some domains overlap both within and between categories; domains have been
 deduplicated.
\end_layout

\begin_layout Standard

\end_layout

\begin_layout Subsection
Random .se domains
\begin_inset CommandInset label
LatexCommand label
name "sub:Random-.se-domains"

\end_inset


\end_layout

\begin_layout Standard
The thesis was written in collaboration with .SE, which runs the .se TLD,
 and the work focusing on the state of Swedish domains.
 Early script development was done using a sample of 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{10000}
\end_layout

\end_inset

 random domains, most often tested in groups of 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{100}
\end_layout

\end_inset

.
 A final sample of 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{100000}
\end_layout

\end_inset

 domains was also provided.
 The .se TLD is to be considered Sweden-centric.
\end_layout

\begin_layout Subsection
Random .dk domains
\begin_inset CommandInset label
LatexCommand label
name "sub:Random-.dk-domains"

\end_inset


\end_layout

\begin_layout Standard
The Danish .dk TLD organization, DK Hostmaster A/S
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.dk-hostmaster.dk/"

\end_inset


\end_layout

\end_inset

, helped out with a sample of 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{10000}
\end_layout

\end_inset

 domains, chosen at random from the database of active domains in the zone.
 The .dk TLD is to be considered Denmark-centric.
\end_layout

\begin_layout Subsection
Random .com, .net domains
\begin_inset CommandInset label
LatexCommand label
name "sub:Random-.com,-.net-domains"

\end_inset


\end_layout

\begin_layout Standard
The maintainers of the .com, .net and .name TLDs, Verisign, allow downloading
 of the complete zone file under an agreement.
 The .com zone is the largest one by far, and the .net zone is in the top
 4.
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.keepalert.com/top-extension-ranking-july-2014-newgtlds"

\end_inset


\end_layout

\end_inset

 This allows for a random selection of sites from around the world, even
 though usage is not geographically uniform -- both in terms of registrations
 and actual usage.
\end_layout

\begin_layout Subsection
Alexa Top 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{1000000}
\end_layout

\end_inset

 sites
\begin_inset CommandInset label
LatexCommand label
name "sub:Alexa-Top-1000000-sites"

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.alexa.com/topsites"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Alexa, owned by Amazon, is a well-known source of top sites in the world.
 It is used in many research papers, and can be seen as the standard dataset.
 
\begin_inset Note Note
status open

\begin_layout Plain Layout
List referenced research papers using it.
\end_layout

\end_inset

 Their daily 1-month average traffic rank top 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{1000000}
\end_layout

\end_inset

 list is freely available for download.
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://alexa.zendesk.com/hc/en-us/articles/200449834-Does-Alexa-have-a-list-of-its-top-ranked-websites-"

\end_inset


\end_layout

\end_inset

 As Alexa distinguishes between a site and a domain, some domains with several
 popular sites are listed more than once.
 URL paths have been stripped and domains have been deduplicated before
 downloading.
\end_layout

\begin_layout Subsection
Reach50 domains
\begin_inset CommandInset label
LatexCommand label
name "sub:Reach50-domains"

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://reach50.com/"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
The top 50 sites in Sweden are presented by Webmie
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://webmie.com/"

\end_inset


\end_layout

\end_inset

, who base their list on data from a user panel.
 The panelists have installed an extension into their browser, tracking
 their browsing habits by automated means.
 They also have results grouped by panelists categories: women, men, age
 16-34, 35-54, 55+ but only the unfiltered top list is publicly available.
\end_layout

\begin_layout Section
\begin_inset Argument 1
status open

\begin_layout Plain Layout
Public suffix list
\end_layout

\end_inset

Public suffix list
\begin_inset CommandInset label
LatexCommand label
name "sub:Public-suffix-list"

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://publicsuffix.org/"

\end_inset


\end_layout

\end_inset


\begin_inset space \thinspace{}
\end_inset

 
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://en.wikipedia.org/wiki/Public_Suffix_List"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
In the domain name system, it is not always obvious what parts of a domain
 name are a public suffix and which are open for registration by Internet
 users.
 The main example is 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
example.co.uk
\end_layout

\end_inset

, where the 
\emph on
public suffix
\emph default
 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
.co.uk
\end_layout

\end_inset

 is different from the TLD 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
.uk
\end_layout

\end_inset

.
 Because HTTP cookies are based on domains names, it is important to browser
 vendors to be able to recognize which parts are public suffixes to be able
 to protect users against supercookies
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://en.wikipedia.org/wiki/HTTP_cookie#Supercookie"

\end_inset


\end_layout

\end_inset

; cookies which are scoped to a public suffix, and therefore readable across
 all websites under that public suffix.
 It should be noted that all subdomains do not have to point to servers
 owned by the same organization -- it can be used as a way to allow tracking
 cookies for server-to-server tracking behind the scenes (external linkage)
 
\begin_inset CommandInset citation
LatexCommand cite
key "Krishnamurthy:2013:POS:2498345.2498600"

\end_inset

.
\end_layout

\begin_layout Standard
The same dataset is also useful for grouping domains without improperly
 counting 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
example.co.uk
\end_layout

\end_inset

 as a 
\emph on
user-owned subdomain
\emph default
 of 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
.co.uk
\end_layout

\end_inset

, which would then render 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
.co.uk
\end_layout

\end_inset

 as the most popular domain under the 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
.uk
\end_layout

\end_inset

 TLD.
 Swedish examples include second level domains 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
.pp.se
\end_layout

\end_inset

 for privately owned domains and 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
.tm.se
\end_layout

\end_inset

 for trademarks
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.iis.se/data/barred_domains_list.txt"

\end_inset


\end_layout

\end_inset

.
 These second level domains were more important before April 2003
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://en.wikipedia.org/wiki/.se#Pre_2003_system"

\end_inset


\end_layout

\end_inset

, when first level domain registration rules restricted registration to
 nation-wide companies, associations and authorities.
\end_layout

\begin_layout Standard
The public suffix list (2014-07-24) contains 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{6278}
\end_layout

\end_inset

 rules, against which domains are checked in one of the classification steps
 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:classification/effective-tld/add.sh"

\end_inset

.
 It becomes the basis for the domain's division into public suffix and primary
 domain (first non-public suffix match), and subsequent grouping.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
There is also an algorithm for wildcard rules which can have exceptions;
 this thesis has not implemented wildcards and exceptions in the classification
 step.
 There are 24 TLDs with wildcard public suffixes, and 8 non-TLD wildcards.
 Out of these 8 non-TLD wildcards, 1 is 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
*.sch.uk
\end_layout

\end_inset

 and 7 are Japanese geographic areas.
 The 24 wildcards have 10 exception rules; 7 of them are Japanese cities
 grouped by the previously mentioned geographic areas and the remaining
 3 seem to belong to ccTLD owner organizations.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Apart from ICANN domains, which have been implemented, there are also private
 domains considered public suffixes listed as rules.
 They are domains which have subdomains controlled by users/customers, for
 example joelpurra.github.io which is controlled by me but hosted by the code
 hosting service github.com.
 Other examples include cloud hosting/CDN services such as cloudfront.net,
 amazonaws.com, azurewebsites.net, fastly.net, herokuapp.com, blogs from several
 blogspot.TLD domains and dyndns.com's wide choice of dynamic domains.
 One example that looks like a technical choice in order to hinder accidental
 or malicious setting of cookies is googleapis.com, which is listed despite
 being (presumably) completely under Google's control.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Section
Disconnect.me's blocking list
\begin_inset CommandInset label
LatexCommand label
name "sub:Disconnect's-blocking-list"

\end_inset


\end_layout

\begin_layout Standard
One of the most popular privacy tools is Disconnect.me, which blocks tracking
 sites by running as a browser plugin.
 Disconnect was started by ex-Google engineers, and still seems to have
 close ties to Google as the own domain disconnect.me is listed as a Google
 content domain in the blocking list.
\end_layout

\begin_layout Standard
The Disconnect software lets users block/unblock loading resources from
 specific third-party domains and domain categories.
 The dataset (2014-09-08) has a list of 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{2149}
\end_layout

\end_inset

 domains used as the basis for the blocking.
 Each entry belongs to one of 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{980}
\end_layout

\end_inset

 organizations, which come with a link to their webpage.
 There is also a grouping into categories -- see description and examples
 later in this chapter.
 Worth noting is that the content category is 
\emph on
not
\emph default
 blocked by default.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
There are other open source alternatives to Disconnect's blocking list,
 but they use data formats that are not as easy to parse.
 The most popular ones also do not contain information about which organization
 each blocking rule belongs to.
 See Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Ad-and-privacy-blocking-lists"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Categories
\begin_inset CommandInset label
LatexCommand label
name "sub:Disconnect-Categories"

\end_inset


\end_layout

\begin_layout Standard
Most domains and organizations by far are in the advertisement category.
 The reason the Disconnect category has so few organizations, is that it
 is treated as a special category 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-category"

\end_inset

 with only Google, Facebook and Twitter.
 See Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Disconnect's-categories"

\end_inset

 for domain and organization count per category.
\end_layout

\begin_layout Subsection
Domains per organization
\begin_inset CommandInset label
LatexCommand label
name "sub:Disconnect-Domains-per-organization"

\end_inset


\end_layout

\begin_layout Standard
The dataset shows 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{459}
\end_layout

\end_inset

 of the 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{980}
\end_layout

\end_inset

 organizations have more than one domain.
 One organization stands out, with 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{271}
\end_layout

\end_inset

 domains -- Google.
 The biggest reason is that they own top level domains such as google.se
 and google.ch from over 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{200}
\end_layout

\end_inset

 TLDs.
 Yahoo comes in second with 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{71}
\end_layout

\end_inset

 domains, many of which are service-specific subdomains to yahoo.com, such
 as finance.yahoo.com and travel.yahoo.com.
 See Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Domains-per-organization"

\end_inset

 for the distribution of organizations (y axis) with a certain number of
 associated domains (x axis), where Google is the datapoint to the far right
 on the x axis.
\end_layout

\begin_layout Subsection
Organizations in more than one category
\begin_inset CommandInset label
LatexCommand label
name "sub:Disconnect-Organizations-in-more-than-one-category"

\end_inset


\end_layout

\begin_layout Standard
Some organizations are represented in more than one of the five Disconnect
 categories.
 Organizations represented in the content category may be blocked in part
 -- but by serving content, they can achieve at least partial tracking.
 Yahoo has several ad services, several social services, several content
 services and a single analytics service, putting them in four categories.
 At least one organization, Google, is misrepresented in the categories;
 the special Disconnect category contains both their advertisement and analytics
 service domains 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-category"

\end_inset

.
 See Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Organizations-in-more-than-one-category"

\end_inset

 for organizations in more than one category, and which categories they
 are represented in.
\end_layout

\begin_layout Standard

\end_layout

\begin_layout Subsection
Advertising
\end_layout

\begin_layout Standard
While this category has the most domains and organizations by far (see Table
 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Disconnect's-categories"

\end_inset

), many of the actors are unknown to the general public making it harder
 to know how information is collected and used.
 Several recognizable companies -- such as AT&T, Deutsche Post DHL, eBay,
 Forbes, HP, IDG, Match.com, Monster, Opera, Salesforce.com, Telstra and Tinder
 -- are listed with their primary domains.
 This suggests that they can follow their own customers across sites where
 their trackers are installed, without the use of more advanced techniques,
 such as cookie-sharing 
\begin_inset CommandInset citation
LatexCommand cite
key "Acar:2014:WNF:2660267.2660347"

\end_inset

.
\end_layout

\begin_layout Description
amazon-adsystem.com Amazon's ad delivery network.
 Several amazon.tld domains, such as 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
ca
\end_layout

\end_inset

, 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
co.uk
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
de
\end_layout

\end_inset

 are also listed here -- but amazon.com is not.
\end_layout

\begin_layout Description
appnexus.com The AppNexus ad network.
\end_layout

\begin_layout Description
imiclk.com Akamai's ad network Adroit.
\end_layout

\begin_layout Description
overture.com Yahoo's ad network.
\end_layout

\begin_layout Description
omniture.com Adobe's ad network.
\end_layout

\begin_layout Description
tradedoubler.com The TradeDoubler ad network.
\end_layout

\begin_layout Subsection
Analytics
\end_layout

\begin_layout Standard
Analytics services offer a simple way for website owners to gather data
 about their visitors.
 The service is often completely hosted on external servers, and the only
 connection is a javascript file loaded by the website.
 The script collects data, sends it back to the service and then presents
 aggregate numbers and graphs to the website owner.
\end_layout

\begin_layout Description
alexa.com Amazon's web statistics service, considered an authority in web
 measurement.
 Alexa's statistics, in the form of their global top list, is also used
 as input for this thesis 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Alexa-Top-1000000-sites"

\end_inset

.
\end_layout

\begin_layout Description
comscore.com Analytics service that also publishes statistics.
\end_layout

\begin_layout Description
gaug.es GitHub's analytics service.
\end_layout

\begin_layout Description
coremetrics.com Part of IBM's enterprise marketing services.
\end_layout

\begin_layout Description
newrelic.com A suite of systems monitoring and analytics software, up to
 and including browsers.
\end_layout

\begin_layout Description
nielsen.com Consumer studies.
\end_layout

\begin_layout Description
statcounter.com Web statistics tool.
\end_layout

\begin_layout Description
webtrends.com Digital marketing analytics and optimization across channels.
\end_layout

\begin_layout Subsection
Content
\begin_inset CommandInset label
LatexCommand label
name "sub:Disconnect-Content"

\end_inset


\end_layout

\begin_layout Standard
Sites that deliver content.
 There is a wide variety of content, from images and videos to A/B testing,
 comment and help desk services.
 This category is not blocked by default.
\end_layout

\begin_layout Description
apis.google.com One of Google's API domains.
 
\begin_inset Note Note
status open

\begin_layout Plain Layout
Look at which services are hosted.
\end_layout

\end_inset


\end_layout

\begin_layout Description
brightcove.com Video hosting/monetization service.
\end_layout

\begin_layout Description
disqus.com A third-party comment service.
\end_layout

\begin_layout Description
flickr.com Flickr is a photo/video hosting site, owned by Yahoo.
\end_layout

\begin_layout Description
googleapis.com One of Google's API domains, hosting third-party files/services
 such as Google Fonts and Google Hosted Libraries.
\end_layout

\begin_layout Description
instagram.com Facebook's photo/video sharing site.
\end_layout

\begin_layout Description
office.com Microsoft's Office suite online.
\end_layout

\begin_layout Description
optimizely.com An A/B testing service.
\end_layout

\begin_layout Description
truste.com Provides certification and tools for privacy policies in order
 to gain users' trust; “enabling businesses to safely collect and use customer
 data across web, mobile, cloud and advertising channels.” This includes
 ways to selectively opt-out from cookies by feature level; required, functional
 or advertising.
\end_layout

\begin_layout Description
tumblr.com A popular blogging platform.
\end_layout

\begin_layout Description
uservoice.com A customer support service.
\end_layout

\begin_layout Description
vimeo.com A video site.
\end_layout

\begin_layout Description
www.google.com Google's main domain, which also hosts services such as search.
 
\begin_inset Note Note
status open

\begin_layout Plain Layout
Look at which services are hosted.
\end_layout

\end_inset


\end_layout

\begin_layout Description
youtube.com One of Google's video sites.
\end_layout

\begin_layout Subsection
Disconnect
\begin_inset CommandInset label
LatexCommand label
name "sub:Disconnect-category"

\end_inset


\end_layout

\begin_layout Standard
A special category for non-content resources from Facebook, Google and Twitter.
 It seems to initially have been designed to block their respective like/+1/twee
t buttons which seem to belong in the social category.
 As the category now contains many other known tracking domains from the
 same organizations, unblocking the social buttons also lets many other
 types of resources trough.
\end_layout

\begin_layout Standard
It is worth noting that this category includes google-analytics.com plus
 Google ad networks such as adwords.google.com, doubleclick.net and admob.com.
 It might have been more appropriate to have them in the analytics and advertise
ment categories respectively.
\end_layout

\begin_layout Subsection
Social
\begin_inset CommandInset label
LatexCommand label
name "sub:Social"

\end_inset


\end_layout

\begin_layout Standard
Sites with an emphasis on social aspects.
 They often have buttons to vote for, recommend or share with others.
\end_layout

\begin_layout Description
addthis.com A link sharing service aggregator.
\end_layout

\begin_layout Description
digg.com News aggregator.
\end_layout

\begin_layout Description
linkedin.com Professional social network.
\end_layout

\begin_layout Description
reddit.com Social new and link sharing, and discussion.
\end_layout

\begin_layout Section
Retrieving websites and resources
\begin_inset CommandInset label
LatexCommand label
name "sec:Retrieving-websites-and-resources"

\end_inset


\end_layout

\begin_layout Standard
Websites based on lists of domains were downloaded using har-heedless 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:har-heedless"

\end_inset

.
\end_layout

\begin_layout Subsection
Computer machines
\begin_inset CommandInset label
LatexCommand label
name "sec:Computer-machines"

\end_inset


\end_layout

\begin_layout Standard
Two computers were used to download web pages during development -- one
 laptop machine and one server machine -- see Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Machine-specifications"

\end_inset

 for specifications.
 The server is significantly more powerful than the laptop, and they downloaded
 a different number of web pages at a time.
 The final datasets were downloaded on the server.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtable{computer-machines.tsv}{}{display columns/0/.style={string type, column
 type=l}, display columns/1/.style={string type, column type=l}, display
 columns/2/.style={string type, column type=l}}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:Machine-specifications"

\end_inset

Machine specifications
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Network connection
\begin_inset CommandInset label
LatexCommand label
name "sub:Network-connection"

\end_inset


\end_layout

\begin_layout Standard
The laptop machine was connected by ethernet to the .SE office network, which
 is shared with employees' computers.
 The server machine was connected to server co-location network, which is
 shared with other servers.
 The .SE network technicians said load was kept very low, and only a few
 percent of the dedicated 100 Mbps per location was used.
 Both locations are in Stockholm city, and should therefore be well placed
 in regard to websites hosted in Sweden.
\end_layout

\begin_layout Subsection
Software considerations
\begin_inset CommandInset label
LatexCommand label
name "sub:Software-considerations"

\end_inset


\end_layout

\begin_layout Standard
To expedite an automated and repeatable process, a custom set of scripts
 were written as the project har-heedless.
 The scripts are written using standard tools, available as open source
 and on multiple platforms.
\end_layout

\begin_layout Subsubsection
Cookies
\begin_inset CommandInset label
LatexCommand label
name "sub:Software-considerations-cookies"

\end_inset


\end_layout

\begin_layout Standard
Cookies stored by a website may affect content upon requesting subsequent
 resources, and is one of the primary means of keeping track of a browser.
 Each browser instance has been started without any cookies, and while cookie
 usage has not been turned off, none have been stored after finalizing the
 web page request.
 A cookie analysis is still possible by looking at HTTP headers, but they
 have not been considered as an indicator of tracking as other techniques
 can serve the same purpose 
\begin_inset CommandInset citation
LatexCommand cite
key "Acar:2014:WNF:2660267.2660347,Eckersley2009unique"

\end_inset

.
\end_layout

\begin_layout Subsubsection
Dynamic web pages
\end_layout

\begin_layout Standard
Previous efforts to download and analyze web pages by .SE used a static approach,
 analyzing the HTML by means of simple searches for 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
http://
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
https://
\end_layout

\end_inset

 strings in HTML and CSS.
 It had proven hard to maintain, and the software project was abandoned
 before the thesis was started, but had not yet been replaced.
 In order to better handle the dynamic nature of modern web pages, the headless
 browser phantomjs 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:phantomjs"

\end_inset

 was chosen, as it would also download and execute javascript -- a major
 component in both user interfaces as well as active trackers and ads.
\end_layout

\begin_layout Subsubsection
Cached content
\begin_inset CommandInset label
LatexCommand label
name "sub:Software-considerations-cached-content"

\end_inset


\end_layout

\begin_layout Standard
Many of the external resources will be overlapping between websites and
 domains, and downloading them multiple times can be avoided by caching
 the file the first time in a run.
 Keeping cached content would, depending on per-response cache settings
 and timeout, result in a different HTTP request and potentially different
 response.
 A file that has not changed on the server would generate an HTTP response
 status of 304 with no data, saving bandwidth and lowering transfer delays,
 where a changed file would generate a status 200 response with the latest
 version.
\end_layout

\begin_layout Standard
One of the techniques in determining if a locally cached file is the correct/lat
est version includes the HTTP 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
Etag
\end_layout

\end_inset

 header 
\begin_inset CommandInset citation
LatexCommand cite
key "rfc7232"

\end_inset

, which is a string representation of a URL/file at a certain version.
 When content is transferred it may have an 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
Etag
\end_layout

\end_inset

 attached; if the file is cacheable, the 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
Etag
\end_layout

\end_inset

 is saved.
 Subsequent requests for the same, cached URL contain the 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
Etag
\end_layout

\end_inset

 -- and the server uses it to determine if a compact 304 response is enough
 or a full 200 response is necessary.
 It has been found that the 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
Etag
\end_layout

\end_inset

 header can be used for cookieless cross-site tracking by using an arbitrarily
 chosen per-browser value instead of a file-dependent value 
\begin_inset CommandInset citation
LatexCommand cite
key "M.-Ayenson:2011aa"

\end_inset

.
 This means that keeping a local file cache might affect how trackers respond;
 a file cache has not been implemented in har-heedless, making the browser
 amnesiac.
\end_layout

\begin_layout Subsubsection
Flash files
\end_layout

\begin_layout Standard
Flash is a scriptable proprietary cross-platform vector based web technology
 owned by Adobe.
 Several kinds of content, including video players, games and ads, use Flash
 because it has historically been better suited than javascript for in-browser
 moving graphics and video.
 Flash usage has not been considered for this thesis as the technology isn
 not available on all popular web browsing platforms, notably Apple's iPad,
 and is being phased out by HTML 5 features such as 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
<canvas>
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
<video>
\end_layout

\end_inset

 elements.
\end_layout

\begin_layout Subsubsection
Combined javascript
\end_layout

\begin_layout Standard
A common technique for speeding up websites is to reduce the number of resources
 the browser needs to download, by combining or concatenating them in different
 ways depending on the file format.
 Javascript is a good example where there are potential benefits
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://developers.google.com/speed/docs/best-practices/rtt#CombineExternalJS"

\end_inset


\end_layout

\end_inset

 since functionality often is spread across several files, especially after
 the plugin style of frameworks such as jQuery
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://jquery.com/"

\end_inset


\end_layout

\end_inset

 emerged.
 One concern is whether or not script concatenation on a web page would
 affect script analysis at a later stage, by reducing the number of third-party
 requests.
 While it is hard to analyze all scripts, based on their wide spread use,
 third-party scripts stay on their respective home servers as software as
 a service (SaaS) to enable faster update cycles and tracking of HTTP requests.
\end_layout

\begin_layout Subsubsection
Google Tag Manager
\begin_inset CommandInset label
LatexCommand label
name "sub:Google-Tag-Manager"

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.google.com/tagmanager/"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
One of the concerns was Google Tag Manager (GTM), which a script aggregation
 service with asynchronous loading directed specifically to marketers.
 Google provides builtin support for their AdWords, Analytics (GA) and DoubleCli
ck (DC) services.
 While simplifying management with only one 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
<script>
\end_layout

\end_inset

 tag, each part should download separately and perform the same duties,
 including “calling home” to the usual addresses.
 In order to confirm this, a query was run on one of the datasets, se.2014-07-10.r
andom.100000-http-www -- see Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Google-Tag-Manager-versus-Google-Analytics-and-DoubleClick"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtable{google-tag-manager.tsv}{}{display columns/0/.style={string type,
 column type=l}, display columns/2/.style={string type, column type=r}}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:Google-Tag-Manager-versus-Google-Analytics-and-DoubleClick"

\end_inset

Google Tag Manager versus Google Analytics and DoubleClick
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
The numbers point to that every domain that uses Google Tag Manager uses
 at least one of Google Analytics and DoubleClick, and will therefore not
 obscure information regarding which services are called when further analyzed.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
robots.txt
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
<meta name="robots" />
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Automated web spider/bot software can bring a significant load to a web
 server, as the spidering speed can exceed user browsing speed by far --
 a single web spider can potentially request thousands of pages in the span
 of minutes, effectively being a denial of service attack 
\begin_inset Note Note
status open

\begin_layout Plain Layout
Insert link to DoS information.
\end_layout

\end_inset

 on an underpowered server.
 Some sites also have information considered sensitive to being available
 for spiders, or even for certain (kinds) of spiders such as image spiders.
 The choice to not serve spiders can stem from technical reasons (bandwidth,
 server load), to privacy (do not allow information to be indexed in search
 engines) and business (do not allow data to be collected and aggregated).
 In order to instruct web spiders not to get certain kind of material, there
 are two basic mechanisms -- the special 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
robots.txt
\end_layout

\end_inset

 file and the HTML header tag
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
<meta name="robots" />
\end_layout

\end_inset

.
 Both can contain instructions for certain bots not to index certain paths
 or pages, or not to follow further links stemming from a page.
\end_layout

\begin_layout Standard
Commercial software from search engines, information collectors and other
 software vendors take these explicit wishes from webmasters into consideration,
 but har-heedless has not.
 While it is automated software, it is not spidering software requesting
 many pages, following links to explore the site -- it only accesses the
 front page of a domain, and resources explicitly requested by that one
 page.
 Information is not retrieved for indexing as such, as only HTTP request
 metadata is recorded.
 While some information requested to be not indexed might end up in the
 screenshots, they are kept in a format hard to re-parse for machines as
 non-public thesis data used for verification.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Future versions of har-heedless might implement logic that checks 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
robots.txt
\end_layout

\end_inset

 in a domain list preprocessing step, to determine wether or not the request
 should be made.
 The same list can be used to filter further resource requests made by phantomjs
, perhaps considering also other domains' 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
robot.txt
\end_layout

\end_inset

 files.
 The tag 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
<meta name="robots" />
\end_layout

\end_inset

 can also be respected, perhaps in terms of not saving screenshots for 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
noindex
\end_layout

\end_inset

 values.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Parallelizing downloads
\begin_inset CommandInset label
LatexCommand label
name "sub:Parallelizing-downloads"

\end_inset


\end_layout

\begin_layout Standard
A lot of the time spent downloading a web page is spent waiting for network
 resources, especially during timeouts during retrieval.
 To speed up downloading large amounts of web pages, parallelizing was employed
 using simple scripting techniques, starting multiple processes at once
 in batches, waiting for each batch to finish before starting the next.
 This was deemed inefficient, as the download and rendering speed of the
 slowest web page would be a bottle neck.
 In a later script versions, GNU 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
parallel
\end_layout

\end_inset

 was used, with a setting to not start more jobs if the current CPU/system
 load was too high.
\end_layout

\begin_layout Standard
During initial parallelizing tests, the laptop machine was shown to be able
 to handle 100 domain downloads in parallel, but this was later scaled down
 to ensure system overload would not affect results, at the cost of significantl
y longer download times.
\end_layout

\begin_layout Subsubsection
Screen size
\end_layout

\begin_layout Standard
When phantomjs is running, it emulates having a browser window by keeping
 an internal graphics buffer.
 Even if web page is not rendered and shown on screen, it still has a screen
 size, which affects layout.
 With a bit of javascript or responsive CSS, the screen size can affect
 downloaded resources.
 Javascript can be used to delay download of images and other resources
 that are 
\emph on
below the fold
\emph default
, meaning outside of the initial view the user has without scrolling in
 any direction, as a page speed improvement.
 Responsive CSS adapts the page style to the screen size in order to increase
 usability for mobiles and other handheld devices, and might optimize the
 quality of downloaded images to match the screen size.
\end_layout

\begin_layout Standard
By default, phantomjs uses the physical computer's primary screen size.
 In order to reduce differences between the laptop and server machines,
 a fixed emulated window size of 1024x768 pixels was chosen.
 The basis for this is that 1024x768 pixel resolution screens have been
 the recommended screen size to design for
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.nngroup.com/articles/screen-resolution-and-page-layout/"

\end_inset


\end_layout

\end_inset

 for a long time
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.nngroup.com/articles/computer-screens-getting-bigger/"

\end_inset


\end_layout

\end_inset

, and it still is a common screen size
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://gs.statcounter.com/#resolution-ww-monthly-201307-201407"

\end_inset


\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
Scripted browser scrolling (vertically) through the page has not been performed,
 thus javascript scrolling events triggering for example downloading of
 images below the fold are not guaranteed.
\end_layout

\begin_layout Subsubsection
Screenshots
\end_layout

\begin_layout Standard
In order to visually confirm that web pages have been downloaded correctly,
 a PNG screenshot can optionally be taken when the page has finished downloading.
 There is a processing cost associated with taking screenshots; it takes
 time for phantomjs to render the internal buffer as an image, convert it
 to base64 encoding for the augmented HAR data, jq to extract the image
 data, the system to convert the data back to binary and finally write it
 to disk.
 Extra processing is also needed to remove the screenshot from the augmented
 HAR file.
\end_layout

\begin_layout Standard
The emulated browser window size also sets a limit on the screenshot size
 when rendered, but the entire browser canvas is captured.
 This means that screenshots that are saved to disk in most cases extend
 beyond the viewport size, most often vertically; this corresponds to scrolling
 through the entire page.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtable{output-filesize.tsv}{}{display columns/0/.style={string type, column
 type=l}, display columns/3/.style={string type, column type=r}}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:Output-file-size"

\end_inset

Output file size
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
The ratio of PNG to HAR data size on disk points to the compressed PNG files
 being up to 10 times the size of the uncompressed HAR files for certain
 types of pages, for example media domains in the 
\emph on
.SE Health Status
\emph default
 report dataset.
 See Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Output-file-size"

\end_inset

.
\end_layout

\begin_layout Subsection
Dataset variations
\begin_inset CommandInset label
LatexCommand label
name "sec:Dataset-variations"

\end_inset


\end_layout

\begin_layout Standard
Each dataset has been used in four variations, effectively quadrupling the
 number of websites access attempts.
 Each of these variations have been downloaded and analyzed separately,
 then used for both intra- and inter-dataset comparisons.
\end_layout

\begin_layout Itemize
HTTP and HTTPS.
 Enables comparisons between secure and insecure origin website requests.
\end_layout

\begin_layout Itemize
Empty prefix versus www prefix/subdomain.
 The www subdomain has historically been used to denote a web server serving
 websites, and it still seems to have a higher usage than no prefix (
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Failed-versus-non-failed"

\end_inset

, 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:HTTP,-HTTPS-and-redirects"

\end_inset

).
 The 
\emph on
.SE Health Status
\emph default
 reports specifically accesses websites on the www subdomain.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtable{dataset-variations.tsv}{}{display columns/0/.style={string type,
 column type=l}, display columns/1/.style={string type, column type=l}, display
 columns/2/.style={string type, column type=l}}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:Dataset-variations"

\end_inset

Dataset variations
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Each dataset in Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Dataset-variations"

\end_inset

 has the variation appended to the name in the detailed results, Chapter
 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:Detailed-Results"

\end_inset

.
\end_layout

\begin_layout Subsection
System load during downloads
\begin_inset CommandInset label
LatexCommand label
name "sub:System-load-during-downloads"

\end_inset


\end_layout

\begin_layout Standard
System load can affect the end results, if network timeouts occur during
 downloading and processing of domains' front pages.
 Apart from CPU and memory limitations, the other users of the .SE network
 should not be affected by tests.
\end_layout

\begin_layout Standard
System load on *NIX systems can be found using the 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
uptime
\end_layout

\end_inset

 command.
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://en.wikipedia.org/wiki/Load_(computing)"

\end_inset


\end_layout

\end_inset

 Other processes were running at the time of these tests, so the numbers
 are not exclusive to the downloading.
 The complexity of the front pages of the currently processed domains affects
 the load, as well if screenshot generations is enabled.
 Final downloads were done with screenshots enabled.
 Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:System-load"

\end_inset

 show loads for random samples in time.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtable{system-load.tsv}{}{fixed, precision=1, display columns/0/.style={string
 type, column type=l}, display columns/1/.style={string type, column type=l},
 display columns/2/.style={string type, column type=i}}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:System-load"

\end_inset

System load
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
System load has been shown to vary greatly based on the type of request,
 mainly differing by HTTP and HTTPS response rates.
 High failure rates mean a lot of time is spent waiting until a set time
 limit/timeout has been reached.
 Increasing the upper bound on parallelism and instead dynamically adjusting
 the number of concurrent requests emphasizing system load should decrease
 time needed to download a set of domains with a large failure rate 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Failed-versus-non-failed"

\end_inset

.
 Time limits can also be adjusted based on previous dataset results' actual
 reply timings found in HAR data, instead of setting a high and 
\begin_inset Quotes eld
\end_inset

safe
\begin_inset Quotes erd
\end_inset

 upper bound timeout, both for page timeouts and individual resources.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Failed domains
\begin_inset CommandInset label
LatexCommand label
name "sec:Failed-domains"

\end_inset


\end_layout

\begin_layout Standard
Some websites are not downloaded successfully, for different reasons.
 The DNS settings might not be correct, the server may be shut down, there
 might have been a temporary network timeout, there might have been a software
 error -- or the server has been programmed to not respond to automated
 requests from phantomjs 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:phantomjs"

\end_inset

 and similar tools.
 Unfortunately, outside of local software errors which may result in parseable
 error messages, sources of the errors are hard to detect without an extensive
 external analysis of DNS settings and network connectivity -- and even
 so, an automated analysis may include false negatives because of remote
 system automated request countermeasures.
\end_layout

\begin_layout Standard
Each HTTP request has their HTTP status response recorded if it is available;
 absence or numbers outside the RFC7231 
\begin_inset CommandInset citation
LatexCommand cite
key "rfc7231"

\end_inset

 range (100-599) indicates failure.
 Any error output the web page itself has produced, mostly because of javascript
 errors, have also been recorded in the HAR log or individual entry/request
 comment fields.
\end_layout

\begin_layout Standard
A distinction is made between 
\emph on
failed
\emph default
 and 
\emph on
unsuccessful
\emph default
 domains -- unsuccessful domains rendered a complete response with an HTTP
 status that indicated that it was not successful.
 Domains that failed have been re-downloaded; it relieved some, but not
 all, failures.
\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Insert re-downloading table for at least one dataset, for example se.2014-07-10.ra
ndom.100000-http-www.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The first round of retries rendered the greatest results, and subsequent
 retries are less successful.
 This seem to point to some intermittent failures being recoverable, and
 that some domains will not respond.
 Due to diminishing returns in the number of additional successful domains
 in each retry cycle, the number of retries was limited to two 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:har-portent"

\end_inset

.
\end_layout

\begin_layout Section
Analyzing resources
\begin_inset CommandInset label
LatexCommand label
name "sec:Analyzing-resources"

\end_inset


\end_layout

\begin_layout Standard
After downloading HAR files, they are processed using har-dulcify 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:har-dulcify"

\end_inset

.
\end_layout

\begin_layout Subsection
Screenshots
\end_layout

\begin_layout Standard
Screenshots were mainly used for verification during development, to see
 that the pages were loaded properly.
 While they have been retained, the manual inspection necessary makes it
 infeasible as a way to verify each and every domain's result.
\end_layout

\begin_layout Subsection
Extracting HAR format parts
\begin_inset CommandInset label
LatexCommand label
name "sub:Extracting-HAR-format-parts"

\end_inset


\end_layout

\begin_layout Standard
The HAR format specification includes fields that have to do with for example
 request/response timings and data sizes.
 Those, and other fields, are not analyzed in this thesis, so the first
 step is to extract the relevant information.
 These properties will be enough to see what kinds of resources are requested,
 if requests are successful and where the request is made to.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
URL The request's URL.
 Recorded whether the request is successful or not.
 Although almost all requests are made to 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
http://
\end_layout

\end_inset

 or 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
https://
\end_layout

\end_inset

 a negligible amount of other and non-standard (sometimes misspelled) protocols
 have been registered.
 Urls starting with 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
data:
\end_layout

\end_inset

 have been ignored, as they are page-internal.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Status The HTTP status code
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://tools.ietf.org/html/rfc2616"

\end_inset


\end_layout

\end_inset

 found in the server's response.
 Defined as a 3-digit integer result, 100-599, grouped into classes by the
 first digit.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Mime-type The HTTP content-type header, which is the body internet media
 type (previously known as Multipurpose Internet Mail Extensions (MIME)
 type) combined with optional parameters, such as character encoding.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Referer The URL of the page that requested the resource.
 Can be used to build a tree of requests, but is limited by the fact that
 it requires HTML 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
<frame>
\end_layout

\end_inset

 or 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
<iframe>
\end_layout

\end_inset

 to differ from the origin page.
 The word referrer was misspelled 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
referer
\end_layout

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://en.wiktionary.org/wiki/referer"

\end_inset


\end_layout

\end_inset

 in the original proposal 
\begin_inset CommandInset citation
LatexCommand cite
key "rfc1945"

\end_inset

.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Redirect The URL of the new location of the requested resource, if defined
 by a 3xx 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Status"

\end_inset

 HTTP status.
\end_layout

\begin_layout Subsection
Expanding parts
\begin_inset CommandInset label
LatexCommand label
name "sub:Expanding-parts"

\end_inset


\end_layout

\begin_layout Subsubsection
URL, referer, redirect
\end_layout

\begin_layout Standard
The URL format has several components 
\begin_inset CommandInset citation
LatexCommand cite
key "rfc3986"

\end_inset

, with interesting ones for standard web requests listed and/or split up
 further to get a more fine-grained analysis.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Scheme In this case, 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
http
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
https
\end_layout

\end_inset

 protocols have been the most interesting to look at.
 Other interesting examples that can be found in the wild include 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
ftp
\end_layout

\end_inset

 (for file downloads), 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
data
\end_layout

\end_inset

 (for resources encoded into the URI) and 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
about
\end_layout

\end_inset

 (mostly used for blank placeholder pages).
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Domain For this thesis, the domain part has been of much interest, as it
 signifies the difference between internal and external resources.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Port While custom ports can be used, they usually implicitly default to
 80 for HTTP and 443 for HTTPS.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Path The path specifies a folder or file on the server.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Querystring Most parameters sent back to servers are defined in an RFC compliant
 way, but there are other variants building on for example `/` as a pseudo-path
 separator.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
Fragment The fragment is in the web context a client-only component, and
 is not to be sent back to the server as part of a request.
 The usage affects browsers' presentation, historically only by scrolling
 to a matching named element, but modern usage includes keeping browser
 state using javascript, for example following the web spider crawlable
 hash-bang syntax
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://developers.google.com/webmasters/ajax-crawling/docs/getting-started"

\end_inset


\end_layout

\end_inset

.
\end_layout

\begin_layout Subsubsection
Status
\begin_inset CommandInset label
LatexCommand label
name "sub:Status"

\end_inset


\end_layout

\begin_layout Standard
The status value groups are defined by their first digit 
\begin_inset CommandInset citation
LatexCommand cite
key "rfc7231"

\end_inset

.
 Groups outside of the defined range 100-599 are defined as null.
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
1xx Informational
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
2xx Successful
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
3xx Redirection
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
4xx Client error
\end_layout

\begin_layout Labeling
\labelwidthstring 00.00.0000
5xx Server error
\end_layout

\begin_layout Subsubsection
Mime-type
\begin_inset CommandInset label
LatexCommand label
name "sub:Mime-type"

\end_inset


\end_layout

\begin_layout Standard
The mime-type is grouped by their usage, which usually is the first group
 part.
 Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Mime-type-grouping"

\end_inset

 shows a selection of common types grouped together.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtable{mime-types.tsv}{}{display columns/0/.style={string type, column type=l},
 display columns/1/.style={string type, column type=l}}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "tab:Mime-type-grouping"

\end_inset

Mime-type grouping
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Classification
\begin_inset CommandInset label
LatexCommand label
name "sub:Classification"

\end_inset


\end_layout

\begin_layout Subsubsection
Public Suffix List
\begin_inset CommandInset label
LatexCommand label
name "sub:Public-Suffix-List-classification"

\end_inset


\end_layout

\begin_layout Standard
The public suffix list is prepared for lookups per domain component.
 Each request's domain (including shorter domain components) is checked
 against it, and any matching public suffixes are kept in an array.
 A list of private suffixes, as in domain components not in the public suffix
 list, is also kept.
 The primary domain (first non-public suffix match, or the shortest private
 suffix) is extracted.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
In terms of grouping, it might be good to keep the primary (longest matching)
 public suffix separately.
 The public suffix list also contains special wildcard/exception rules and
 private suffixes 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Public-suffix-list"

\end_inset

.
 They have not been used in the thesis 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Implement-public-suffix-rules-use-non-ICANN-suffixes"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Basic
\begin_inset CommandInset label
LatexCommand label
name "sub:Basic-classification"

\end_inset


\end_layout

\begin_layout Standard
Simple properties in the request are checked, and their valued saved as
 a classification property.
 This property is used for grouping and for further analysis.
\end_layout

\begin_layout Description
Successful
\begin_inset space ~
\end_inset

request The status of the request is 200-299 or 304.
\end_layout

\begin_layout Description
Unsuccessful
\begin_inset space ~
\end_inset

request The status is 100-199 or 300-303 or 305-599.
\end_layout

\begin_layout Description
Failed
\begin_inset space ~
\end_inset

request The log file format is incomplete or the status is null, below 100
 or above 599.
\end_layout

\begin_layout Description
Same
\begin_inset space ~
\end_inset

domain The request is to the same domain that was first visited.
\end_layout

\begin_layout Description
Subdomain The request is to a subdomain of the domain that was first visited.
\end_layout

\begin_layout Description
Superdomain The request is to a domain to which the origin domain is a subdomain.
 This basic superdomain classification is currently not checked against
 the public suffix list for invalid superdomains.
\end_layout

\begin_layout Description
Same
\begin_inset space ~
\end_inset

primary
\begin_inset space ~
\end_inset

domain The request shared the same primary domain with the origin.
\end_layout

\begin_layout Description
Internal
\begin_inset space ~
\end_inset

domain The request is to the same domain, a subdomain or a superdomain of
 the domain that was first visited.
\end_layout

\begin_layout Description
External
\begin_inset space ~
\end_inset

domain The request is not to an internal domain.
\end_layout

\begin_layout Description
Secure
\begin_inset space ~
\end_inset

request The request is using HTTPS.
\end_layout

\begin_layout Description
Insecure
\begin_inset space ~
\end_inset

request The request is not using HTTPS.
\end_layout

\begin_layout Subsubsection
Disconnect.me
\begin_inset CommandInset label
LatexCommand label
name "sub:Disconnect.me-classification"

\end_inset


\end_layout

\begin_layout Standard
The URLs in the extended data contains lists of domain components.
 As the disconnect list of blocked domains is prepared for lookups by domains,
 each of the matching domains (including shorter domain components) are
 extracted with organization, organization URL and domain category.
\end_layout

\begin_layout Subsection
Analysis
\begin_inset CommandInset label
LatexCommand label
name "sub:Analysis"

\end_inset


\end_layout

\begin_layout Standard
An analysis, where request classifications are counted, summed and the coverage
 calculated, is performed as an automated step.
\end_layout

\begin_layout Subsubsection
Origin
\end_layout

\begin_layout Standard
The origin domains are grouped separately from the requests that stemmed
 from them.
\end_layout

\begin_layout Subsubsection
Requested URL counts
\end_layout

\begin_layout Standard
All requests are represented with their domain, and other classifications.
\end_layout

\begin_layout Subsubsection
Distinct requested URLs
\end_layout

\begin_layout Standard
Requested URL counts can skew aggregate results if a single domains makes
 an excessive amount of requests to a certain URL/domain/tracker or in a
 certain classification.
 Reducing counts to boolean values, indicating at least one request matched
 the classification, gives the possibility to calculate coverage per domain
 later on.
\end_layout

\begin_layout Subsubsection
Request/domain counts
\end_layout

\begin_layout Standard
All the numbers from all domains added together.
\end_layout

\begin_layout Subsubsection
Request/domain coverage
\end_layout

\begin_layout Standard
The summed up counts divided by either the total request count (for requested
 URLs) or the number of domains in the current group (for distinct requested
 URLs).
 This gives a coverage percentage -- either for the percentage of the number
 of requests, or domains that has the value.
\end_layout

\begin_layout Subsubsection
Grouping
\end_layout

\begin_layout Standard
In order to not make too broad assumptions, some grouping was performed.
 The analysis was performed the same way on each of these groups 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:aggregate/analysis.sh"

\end_inset

.
 The origin domain's download status was checked, and grouped into both
 unfiltered and non-failed groups.
 The list of requested URLs was grouped into unfiltered, internal and external
 URLs.
\end_layout

\begin_layout Subsection
Questions
\begin_inset CommandInset label
LatexCommand label
name "sub:Questions"

\end_inset


\end_layout

\begin_layout Standard
Where the aggregate analysis is not enough, there are custom questions.
 These questions/queries can be executed against any previous intermediate
 step in the process, as they are saved to disk.
\end_layout

\begin_layout Subsubsection
Google Tag Manager
\end_layout

\begin_layout Standard
One of the questions posed beforehand was if Google Tag Manager would have
 an impact upon results; it has been answered with the help of this data
 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Google-Tag-Manager"

\end_inset

.
\end_layout

\begin_layout Subsubsection
Origins with redirects
\end_layout

\begin_layout Standard
Looking at preliminary results, a large portion of domains yielded a redirect
 as the initial response.
 In order to look at these redirects specifically, and determine if they
 redirect to an internal or external domain, a specific question was written.
\end_layout

\begin_layout Subsection
Multiset queries
\end_layout

\begin_layout Standard
After downloading several datasets, it is often interesting to compare them
 side by side.
 The multiset queries extract pieces of data from several datasets, and
 combine them into a single file.
\end_layout

\begin_layout Chapter
Software
\begin_inset CommandInset label
LatexCommand label
name "chap:Software"

\end_inset


\end_layout

\begin_layout Standard
Development was performed in the Mac OS X operating system while the server
 machine performing most of the downloading and analysis was running the
 Linux distribution Debian 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Computer-machines"

\end_inset

.
 The software is thought to be runnable on other Unix-like platforms with
 relative ease.
\end_layout

\begin_layout Section
Third-party tools
\end_layout

\begin_layout Standard
In order to download and analyze tens of thousands of webpages in an automated
 fashion, a set of suitable tools were sought.
 Tools released as free and open source software have been preferred, found
 and selected; code written specifically for the thesis has also been released
 as such.
\end_layout

\begin_layout Subsection
HTTP Archive (HAR) format
\begin_inset CommandInset label
LatexCommand label
name "sub:HTTP-Archive-(HAR)-format"

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.softwareishard.com/blog/har-12-spec/"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
In an effort to record and analyze network traffic as seen by individual
 browsers, the data/file format HTTP Archive (HAR) was developed.
 Browsers such as Google Chrome implement it as a complement to the network
 graph shown in the Developer Console, from where a HAR file can be exported.
 While constructed to analyze for example web performance, it also contains
 data suitable for this thesis: requested URLs and HTTP request/response
 headers such as referrer and content type.
 HAR files are based upon the JSON
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://json.org/"

\end_inset


\end_layout

\end_inset

 standard 
\begin_inset CommandInset citation
LatexCommand cite
key "rfc7159"

\end_inset

, which is a Javascript object compatible data format commonly used to communica
te dynamic data between client side scripts in browsers and web servers.
 The most recent specification at the time of writing was HAR 1.2.
\end_layout

\begin_layout Subsection
phantomjs
\begin_inset CommandInset label
LatexCommand label
name "sub:phantomjs"

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://phantomjs.org/"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Accessing webpages is normally done by users in a graphical browser; the
 browser downloads then displays images, executes scripts, and plays videos.
 A browser is user friendly but not optimal for batch usage due to the overhead
 in constantly drawing results on screen and the lack of automation without
 external tools such as Selenium Webdriver
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://docs.seleniumhq.org/projects/webdriver/"

\end_inset


\end_layout

\end_inset

.
 While Webdriver can be used to control several kinds of browsers, such
 as Microsoft Internet Explorer, Mozilla Firefox, Google Chrome, they are
 not suitable for usage on a rack server that was not set up with 
\begin_inset Quotes eld
\end_inset

normal
\begin_inset Quotes erd
\end_inset

 browser usage in mind -- that is with desktop software functionalities.
 A good alternative for such servers is phantomjs, which is built as a command
 line tool without any graphical user interface.
 It acts like a browser internally, including rendering the webpage to a
 image buffer that is not displayed, and is controllable through the use
 of scripts.
 One such example script included in the default installation generates
 HAR files from a webpage visit.
 phantomjs has been implemented on top of the web page renderer Webkit library
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.webkit.org/"

\end_inset


\end_layout

\end_inset

, also used in Apple Safari, Opera and previously Google Chrome.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
There are alternatives to phantomjs, but they have not been tested within
 the scope of the thesis.
 Future versions could try alternative automated browsers, such as SlimerJS
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://slimerjs.org/"

\end_inset


\end_layout

\end_inset

 or both with CasperJS
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://casperjs.org/"

\end_inset


\end_layout

\end_inset

, to verify phantomjs' results.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
jq
\begin_inset CommandInset label
LatexCommand label
name "sub:jq"

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://stedolan.github.io/jq/"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
While there are command line tools to transform data in for example plain
 text, CSV and XML files, tools to work with JSON files are not as prevalent.
 One such tool gaining momentum is jq, which is implemented with a domain
 specific language (DSL) suitable for extracting or transforming data.
 The DSL is based around a set of filters, similar to pipes in the Unix
 world, transforming the input and passing it on to the next stage.
 jq performs well with large datasets, as it treats data as a stream where
 each top-level object is treated separately.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
At the time of writing, jq is released as version 1.4.
 Support for regular expressions is planned for version 1.5, which has been
 in the making for the duration of the thesis.
 As the thesis code is run on multiple machines/systems and expected to
 deliver the same results, using standardized packages has been a part of
 ensuring that.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
GNU 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
parallel
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "sub:GNU-parallel"

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.gnu.org/software/parallel/"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
To parallelize task execution, GNU 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
parallel
\end_layout

\end_inset

 
\begin_inset CommandInset citation
LatexCommand cite
key "Tange2011a"

\end_inset

 has been used.
 It allows an input file to be distributed among several processes/CPU cores,
 and the results to be combined into a single file.
 It helps speed up downloading websites to create HAR files, and processing
 of the JSON data through jq, which is single threaded.
\end_layout

\begin_layout Section
Code
\end_layout

\begin_layout Standard
In order to efficiently and repeatably download and analyze web pages, special
 tools have been written.
 Most of the code is written in bash
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.gnu.org/software/bash/"

\end_inset


\end_layout

\end_inset

 scripts utilizing external commands when possible, such as jq.
 The code for the jq commands has been embedded in the bash scripts.
\end_layout

\begin_layout Standard
The source code for the respective projects have been released to the public
 under GNU General Public License version 3.0 (GPL-3.0)
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.gnu.org/licenses/gpl.html"

\end_inset


\end_layout

\end_inset

, so other projects can make use of them as well.
\end_layout

\begin_layout Subsection
har-portent
\begin_inset CommandInset label
LatexCommand label
name "sub:har-portent"

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://github.com/joelpurra/har-portent"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
A set of scripts that both downloads, retries failed downloads and analyzes
 websites in a single run -- see har-heedless 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:har-heedless"

\end_inset

 and har-dulcify 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:har-dulcify"

\end_inset

.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
domains/download-and-analyze-https-www-combos.sh <parallelism> <domainlists>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Uses 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
domains/download-and-analyze.sh
\end_layout

\end_inset

 to download four variations 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Dataset-variations"

\end_inset

 of the same domains, so any differences between secure/insecure and www-prefixe
d domains can be observed.
 This is the true fire-and-forget script you want to run to download and
 analyze multiple large sets.
\end_layout

\begin_layout Itemize
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
http://
\end_layout

\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
http://www.
\end_layout

\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
https://
\end_layout

\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
https://www.
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
domains/download-and-analyze.sh <prefix> <parallelism> <domainlists>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Downloads a list of domains in parallel, with automatic per-prefix/input
 file folder and log file and creation.
 It also performs automatic retries for failed domains two times per dataset,
 with an increased parallelism as retries are mostly expected to yield another
 network timeout or error.
\end_layout

\begin_layout Subsection
har-heedless
\begin_inset CommandInset label
LatexCommand label
name "sub:har-heedless"

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://github.com/joelpurra/har-heedless"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Scriptable batch downloading of webpages to generate HTTP Archive (HAR)
 files, using phantomjs.
 With a simple text file with one domain name per line as input, har-heedless
 downloads all of their front pages.
 Downloads can be made either in serial or in parallel.
 The resulting HAR data is written in a folder structure per domain, with
 a timestamp in the file name.
 The script that extracts HAR data, 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
netsniff.js
\end_layout

\end_inset

, is based on example code shipped with phantomjs, but modified to be more
 stable.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
get/netsniff.js
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "sub:get/netsniff.js"

\end_inset


\end_layout

\begin_layout Standard
A modified version of 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
netsniff.js
\end_layout

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://github.com/ariya/phantomjs/blob/master/examples/netsniff.js"

\end_inset


\end_layout

\end_inset

 from the phantomjs project.
\end_layout

\begin_layout Standard
Some fixes include:
\end_layout

\begin_layout Itemize
Stable, logged output when resources failed to download.
\end_layout

\begin_layout Itemize
Adding error messages as HAR comments.
\end_layout

\begin_layout Itemize
Adding a base64 encoded page screenshot as an extended field.
\end_layout

\begin_layout Itemize
Waiting a period of time after downloading the web page before generating
 output, to let asynchronous downloading, processing and rendering finish.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
These patches have not yet been submitted to the phantomjs project.
 They should be split up into separate parts for the convenience of the
 project maintainers.
 A complete refactoring is also an alternative, but it might be less likely
 to be accepted.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
get/har.sh <url>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Contains logic to run 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
netsniff.js
\end_layout

\end_inset

 through phantomjs.
 If phantomjs crashed or otherwise encountered an error, a fallback HAR
 file is generated with a dummy response explaining that an error occurred.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
url/single.sh <domain> [--screenshot <true|false>]
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Downloads a URL of a single domain, and takes care of writing the HAR output
 to the correct folder and file.
 If a screenshot has been requested, it is extracted (and removed) from
 the extended HAR data and written to a separate file parallel to the resulting
 HAR file.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
url/parallel.sh [parallel-processes [--screenshot <true|false>]]
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Uses GNU 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
parallel
\end_layout

\end_inset

 to download multiple webpages at a time.
 The number of separate processes running is adjusted per machine, depending
 on capacity, with 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
parallel-processes
\end_layout

\end_inset

.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
domain/parallel.sh <prefix> [parallel-processes [--screenshot <true|false>]]
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Download the front pages of a list of domains, in parallel, using a specific
 prefix, such as 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
https://www.
\end_layout

\end_inset

.
 See 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
url/parallel.sh
\end_layout

\end_inset

.
\end_layout

\begin_layout Subsection
har-dulcify
\begin_inset CommandInset label
LatexCommand label
name "sub:har-dulcify"

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://github.com/joelpurra/har-dulcify"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Extracts data from HTTP Archive (HAR) files for an aggregate analysis.
 HAR files by themselves contain too much data, so the relevant parts need
 to be extracted.
 The extracted parts are then broken down into smaller parts that are easier
 to group and analyze, and added to the data alongside the original.
 With the expanded data in place, requests are classified by basic measures
 and matched against external datasets.
 Scripts are written to perform only a limited task and instead be chained
 together by piping the data between them.
 As the scripts generally connect in only one way, the convenience scripts
 in the 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
one-shot/
\end_layout

\end_inset

 folder are used the most.
 These convenience scripts also leave the files from partial executions,
 so they can be used for other kinds of analysis.
\end_layout

\begin_layout Standard
At the time of writing, there are 67 scripts in har-dulcify.
 Here is a selection with explanations.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
one-shot/all.sh [har-folder-path]
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Runs 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
preparations.sh
\end_layout

\end_inset

, 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
data.sh
\end_layout

\end_inset

, 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
aggregate.sh
\end_layout

\end_inset

 and 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
questions.sh
\end_layout

\end_inset

 based on data in the 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
har-folder-path
\end_layout

\end_inset

 (defaulting to the current folder) outputting the results to the current
 folder.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
one-shot/preparations.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Downloads, prepares and analyses third-party datasets, and puts them in
 the current folder for use by subsequent scripts.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
one-shot/data.sh [har-folder-path]
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Processes all HAR files in the 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
har-folder-path
\end_layout

\end_inset

 (defaulting to the current folder), and puts the output in the same folder.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
one-shot/aggregate.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Prepares data for aggregation by counting occurrences in each domain's data,
 then adds them together to a single file containing an aggregate analysis.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
domains/latest/all.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Finds and lists the paths to the most recent HAR files, per domain.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
extract/request/parts.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Extracts url, status, content-type (mime-type) and other individual pieces
 of data from the originating domain front page request and the subsequent
 requests.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
extract/request/expand-parts.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Keeps the original data, but also expands the url and mime-type into their
 respective parts, and adds simple grouping to status and mime-type.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
classification/basic.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Add basic classifications, such as if a request is internal or external
 to the originating domain, and if the request is secured with HTTPS.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
classification/disconnect/prepare-service-list.sh
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "sub:classification/disconnect/prepare-service-list.sh"

\end_inset


\end_layout

\begin_layout Standard
Prepares Disconnect's blocking list from the original format where blocked
 domains are stored deep in the structure, to one where domains are top
 level map keys, prepared for fast lookups.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
classification/disconnect/add.sh <prepared-disconnect-dataset-path>
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "sub:classification/disconnect/add.sh"

\end_inset


\end_layout

\begin_layout Standard
Matches each requested domain against Disconnect's list of domains to block,
 and adds the results to the output.
 Disconnect's original 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
service.json
\end_layout

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://github.com/disconnectme/disconnect/raw/master/firefox/content/disconnect.safariextension/opera/chrome/data/services.json"

\end_inset


\end_layout

\end_inset

 (or 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
disconnect-plaintext.json
\end_layout

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://services.disconnect.me/disconnect-plaintext.json"

\end_inset


\end_layout

\end_inset

) needs to be prepared through 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
classification/disconnect/prepare-service-list.sh
\end_layout

\end_inset

 before being used.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
classification/disconnect/analysis.sh
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "sub:classification/disconnect/analysis.sh"

\end_inset


\end_layout

\begin_layout Standard
Analyses Disconnect's blocking list and collects some aggregate numbers.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
classification/effective-tld/add.sh <prepared-disconnect-dataset-path>
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "sub:classification/effective-tld/add.sh"

\end_inset


\end_layout

\begin_layout Standard
Matches each requested domain against Mozilla's Public Suffix list of effective
 top level domain names, and adds the results to the output.
 The original 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
effective_tld_names.dat
\end_layout

\end_inset


\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://publicsuffix.org/list/effective_tld_names.dat"

\end_inset


\end_layout

\end_inset

 needs to be prepared through 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
classification/effective-tld/prepare-list.sh
\end_layout

\end_inset

 before being used.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
aggregate/prepare*.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Running the aggregation before analysis is currently not possible in a single
 step, as jq requires all data for the reduce step to be in memory.
 The solution is to first map the data to a suitable format, and then reduce
 them in chunks repeatedly.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
aggregate/analysis.sh
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "sub:aggregate/analysis.sh"

\end_inset


\end_layout

\begin_layout Standard
Takes counts and lists of values, and reduces them to easy to present values,
 percentages and top lists.
 Results are also grouped in order to draw separate conclusions regarding
 non-failed domains and internal/external resources.
 Below, a tree representation of the output after grouping is shown.
 The origin represents the original request of the subsequently requested
 URLs.
\end_layout

\begin_layout Itemize
Unfiltered origin domains
\end_layout

\begin_deeper
\begin_layout Itemize
Origin
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\begin_layout Itemize
Unfiltered URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\begin_layout Itemize
Distinct requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
Internal URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\begin_layout Itemize
Distinct requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
External URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\begin_layout Itemize
Distinct requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\end_deeper
\end_deeper
\begin_layout Itemize
Non-failed origin domains
\end_layout

\begin_deeper
\begin_layout Itemize
Origin
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\begin_layout Itemize
Unfiltered URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\begin_layout Itemize
Distinct requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
Internal URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\begin_layout Itemize
Distinct requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize
External URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\begin_layout Itemize
Distinct requested URLs
\end_layout

\begin_deeper
\begin_layout Itemize
Counts
\end_layout

\begin_layout Itemize
Coverage
\end_layout

\end_deeper
\end_deeper
\end_deeper
\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
questions/google-gtm-ga-dc.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Analyze the impact of Google Tag Manager on coverage for other Google services,
 specifically Google Analytics and DoubleClick.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
questions/origin-redirects.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Analyze requests to see if there are redirects from the origin page initially
 requested.
 One of the most interesting things to look at is wether or not domains
 redirect to or from secure https domains.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
questions/ratio-buckets.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Collects occurrences of arbitrary things and ratios of other things per
 domain, puts them into 100+ counter buckets and calculates normalized and
 cumulative versions.
 Used to get the number of Disconnect organizations and ratios of internal
 and secure resources.
\end_layout

\begin_layout Subsubsection
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
multiset/*.sh
\end_layout

\end_inset


\end_layout

\begin_layout Standard
A set of scripts that perform tasks on multiple datasets at once -- an aggregate
 of aggregates usually.
 The scripts were developed late in the process, to extract small pieces
 of data per dataset for the report.
 The small pieces of data are combined to files with tab-separated values,
 which are the source of most data tables and figures in the report.
\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Pages with wide tables start here.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Chapter
Detailed results
\begin_inset CommandInset label
LatexCommand label
name "chap:Detailed-Results"

\end_inset


\end_layout

\begin_layout Section
Differences between datasets
\end_layout

\begin_layout Standard
Domain lists chosen for this thesis come in three major categories -- top
 lists, curated lists and random selection from zone files.
 While the top lists and curated lists are assumed to primarily contain
 sites with staff or enthusiasts to take care of them and make sure they
 are available and functioning, the domain lists randomly extracted from
 TLD zones might not.
 Results below seem to fall into groups of non-random and randomly selected
 domains -- and result discussions often group them as such.
\end_layout

\begin_layout Section
Failed versus non-failed
\begin_inset CommandInset label
LatexCommand label
name "sec:Failed-versus-non-failed"

\end_inset


\end_layout

\begin_layout Standard
HAR data that does not have a parseable HTTP status outcome number (shown
 as 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
(null)
\end_layout

\end_inset

 in 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:HTTP-status-codes"

\end_inset

) is considered a failed request.
 In order to reduce temporary or intermittent problems, all domains that
 failed were retried up to two times 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:har-portent"

\end_inset

.
\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:HTTP-status-codes"

\end_inset

 visualizes the percentage of requests in each HTTP status category and
 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
null
\end_layout

\end_inset

 for no response on the x axis.
 Non-random domains have a failure rate of below 15% for HTTP, and 70-90%
 for HTTPS, meaning that 30-10% implement HTTPS.
 Random zone domains have a failure rate of above 20% for HTTP and above
 99% for HTTPS.
\end_layout

\begin_layout Standard
The very low HTTPS adoption rates among random sites is both surprising
 and not surprising -- while larger sites might have felt the pressure to
 implement them, a non-professional site owner might see it as both an unnecessa
ry technical challenge and an unnecessary additional cost.
 Most X.509 public key infrastructure (PKI) 
\begin_inset CommandInset citation
LatexCommand cite
key "rfc5280"

\end_inset

 certificates cost money to buy and install.
 With public IPv4 addresses running out and legacy browsers requiring one
 IP-address per HTTPS certificate, it can also lead to an additional fee
 for renting an exclusive IP-address.
 The random zone domains responding to HTTPS requests exhibit behavior more
 similar to top and curated sites -- see how dataset variation lines follow
 each other in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Cumulative-distribution-ratio-internal-resources"

\end_inset

 and Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Organizations-per-domain"

\end_inset

 -- suggesting that a similar kind of effort has been put in developing
 them.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtablewidedatasets{datasets.retries.rates.tsv}{Dataset HAR failure rates}{Dataset
,Domains,Successful,Unsuccessful,Non-failed,Failed,Non-failure rate,Failure
 rate}{display columns/2/.style={string type, column type=i}, display columns/3/.s
tyle={string type, column type=i}, display columns/4/.style={string type,
 column type=i}, display columns/5/.style={string type, column type=i}, display
 columns/6/.style={column type=|r}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
During analysis har-dulcify splits results into unfiltered and filtered,
 non-failed origin domains.
 Unless otherwise mentioned, further results are presented based only on
 non-failed domains in each dataset, as failed origin requests add nothing
 to the further resource analysis.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
There might be an overlap between failed HTTP/HTTPS and non-www/www dataset
 variations, but at the moment they are treated separately.
 If domains that failed to respond to HTTP requests are removed from the
 HTTPS set in a filter step, HTTPS failure statistics might be lower --
 and the same goes for www variations.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The difference between the number of domains in the dataset and the number
 of analyzed domains -- for example 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{100000}
\end_layout

\end_inset

 domains in 
\begin_inset Quotes eld
\end_inset

se.2014-07-10.random.100000-http-www
\begin_inset Quotes erd
\end_inset

 but 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{99428}
\end_layout

\end_inset

 HAR files -- is due to software crashes.
 A higher domain response rate means a higher risk of a crash; larger datasets
 have crashes in 0.25-2.5% of domains.
 Most crashes were observed to be caused by malformed image data triggering
 an uncaught software exception in the JPEG image decoder used by phantomjs.
 Looking at the resulting HAR files means that both local software errors
 and remote errors are considered failures.
 The analysis can be improved with additional testing and improvements to
 phantomjs; missing HAR files have been ignored in further analyses.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Section
HTTP status codes
\begin_inset CommandInset label
LatexCommand label
name "sec:HTTP-status-codes"

\end_inset


\end_layout

\begin_layout Standard
Choosing the term non-failed instead of successful when it comes to dividing
 and focusing result discussions has its basis in the HTTP standard, which
 defines a status code.
 Successful requests are generally shown with an HTTP status code of 200
 (actually the entire 2xx group), or a 304 which means that a previously
 cached (presumably successful) result is still valid.
 Many sites respond with a 3xx status, which is not exactly successful as
 it does not contain actual content, but can not be considered a failure
 as it will most likely lead to another resource that is successful.
 While a status response of 4xx or 5xx shows there is a problem of some
 kind, for the purpose of this thesis a response that contains any HTTP
 status number is still considered a non-failure, as the remote system has
 responded with a proper HTTP response parseable by phantomjs and har-heedless.
\end_layout

\begin_layout Standard
The table below details the percentage of domains in each response code
 group, especially for 3xx (redirect) responses, as well as 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
null
\end_layout

\end_inset

 for no response.
 Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:HTTP-status-codes"

\end_inset

 also visualize the results as percentages (x axis) per dataset.
\end_layout

\begin_layout Standard
The majority of domains domains are responding to HTTP requests during domain
 scanning, but many do not either by configuration or chance.
 While most non-failed domains produce 2xx responses, there is a high ratio
 of 3xx redirect class responses.
 With some 20% of random domains and around 50% of top sites redirecting
 their visitors, it begs further research.
 Many of them are 301, considered permanent, redirects; they indicate that
 the information supposedly found at the domain is actually found somewhere
 else.
 The difference between http and http-www datasets seems to suggest that
 redirects lead to the other (above 90%), or a secure variant; this thesis
 has looked at redirects within the same domain and to HTTPS variations
 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:HTTP,-HTTPS-and-redirects"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtablewidedatasets{datasets.request-status.coverage.origin.sorted.tsv}{Dataset
 origin HTTP response code/group coverage}{}{display columns/4/.style={column
 type=|r}, display columns/8/.style={column type=r|}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
A further analysis might disregard 4xx and 5xx responses as well, but current
 numbers suggest the difference would not be significant.
 While this can be because of software problems, they do exist and therefore
 the software seems to work as intended.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{portraitdatapage}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{tikzpicture}
\end_layout

\begin_layout Plain Layout


\backslash
begin{axis}[
\end_layout

\begin_layout Plain Layout

	allDatasetsStackedXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbarFullPage,
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsRequestStatusCoverageOriginSorted}{1xx}{1xx}{orange}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsRequestStatusCoverageOriginSorted}{2xx}{2xx}{green}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsRequestStatusCoverageOriginSorted}{3xx}{3xx}{yellow}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsRequestStatusCoverageOriginSorted}{4xx}{4xx}{orange}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsRequestStatusCoverageOriginSorted}{5xx}{5xx}{orange}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsRequestStatusCoverageOriginSorted}{(null)}{(null)}{red}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
end{axis}
\end_layout

\begin_layout Plain Layout


\backslash
end{tikzpicture}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:HTTP-status-codes"

\end_inset

Distribution of HTTP status codes
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{portraitdatapage}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Section
Internal versus external resources
\begin_inset CommandInset label
LatexCommand label
name "sec:Internal-versus-external"

\end_inset


\end_layout

\begin_layout Standard
The table shows non-failed origin domains having requests strictly to the
 same domain, subdomains, superdomains or same primary domain -- jointly
 known as internal domains -- or external (non-internal) domains.
 Origin domains that are not exclusively loading from either internal or
 external resources are loading from mixed domains.
 See also Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:internal-mixed-external-resources"

\end_inset

 visualizing the proportions (x axis) per dataset.
\end_layout

\begin_layout Standard
More detailed examples of distributions of resources are shown in Figure
 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Cumulative-distribution-ratio-internal-resources"

\end_inset

, with ratio of internal resources per domain (as opposed to external resources)
 on the x axis, and what cumulative ratio of domains exhibit this property
 on the y axis.
 The leftmost marker in each dataset shows the ratio of domains (y axis)
 with 0% internal (strictly external) resources and the right hand marker
 99% internal resources.
 To the right of the 99% marker are domains using strictly internal resources;
 the vertical difference (y axis) between the two markers shows the ratio
 of mixed resource usage.
\end_layout

\begin_layout Standard
Mixing resources from both internal and external domains is the most common
 way to compose a web page for datasets not randomly chosen from zones,
 although it is quite common for random domains as well.
 Random domains show relatively high tendencies to either extreme, with
 only either internal or external resources; in addition the usage of external
 resources is lower in HTTPS variations.
 As can be noted in both Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:internal-mixed-external-resources"

\end_inset

 and 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Cumulative-distribution-ratio-internal-resources"

\end_inset

, the top domains are very similar in terms of resource distribution between
 HTTP and HTTPS datasets.
 This means that active tracking on top sites is as prevalent when surfing
 a website over a secure, encrypted connection as on an insecure.
 Random .dk sites has the highest ratio of internal resources, but even so
 more than two thirds of domains load external resources.
 Strictly external plus mixed resource usage is above 80% in most and 90%
 in many datasets.
 The same is true for for HTTPS, confirming the thesis' hypotheses that
 tracking is installed through the use of external resources, deliberately
 or not, on HTTPS sites as well 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Trackers-are-a-commercial-choice"

\end_inset

.
\end_layout

\begin_layout Standard

\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtablewidedatasets{datasets.non-failed.classification.domain-scope.coverage.sorted.t
sv}{Internal versus external resources coverage}{}{display columns/6/.style={colu
mn type=|r}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
During analysis har-dulcify splits results into unfiltered, internal and
 external resources, each treated the same way in terms of classifications,
 allowing separate conclusions to be drawn.
 Further analysis showing internal/external ratios are generally calculated
 per domain which has at least one internal/external request.
 This makes a rather large difference for random zone domains, which have
 a rather high ratio of domains with no internal or no external resources
 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Requests-per-domain-and-ratios"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Looking at internal versus external domains, with regards to the origin
 domain, is easy to do as it is only a matter of string comparison.
 The next step would be to use organization grouping, as seen in the Disconnect
 classifications 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Disconnect's-blocking-list-matches"

\end_inset

.
 Private CDN domain detection requires more extensive reverse requests'
 domain usage mapping work plus manual classification work.
 While the work put in might only be effective for top organizations with
 many services, it adds to seeing legal entities as information receivers
 rather than the merely technical domain partitioning.
 It also adds more questions -- could for example a private CDN domain hosted
 in another organization's datacenter be seen as both internal and external?
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{portraitdatapage}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{tikzpicture}
\end_layout

\begin_layout Plain Layout


\backslash
begin{axis}[
\end_layout

\begin_layout Plain Layout

	allDatasetsStackedXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbarFullPage,
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationDomainScopeCoverageSorted}{Internal}{Interna
l}{green}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationDomainScopeCoverageSorted}{Mixed}{Mixed}{yel
low}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationDomainScopeCoverageSorted}{External}{Externa
l}{orange}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
end{axis}
\end_layout

\begin_layout Plain Layout


\backslash
end{tikzpicture}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:internal-mixed-external-resources"

\end_inset


\begin_inset Argument 1
status open

\begin_layout Plain Layout
Strictly internal, mixed or strictly external resources
\end_layout

\end_inset

Distribution of domains with strictly internal, mixed or strictly external
 resources
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{tikzpicture}
\end_layout

\begin_layout Plain Layout


\backslash
begin{axis}[
\end_layout

\begin_layout Plain Layout

	datasetsCDF,
\end_layout

\begin_layout Plain Layout

	datasetsCDFFullPage,
\end_layout

\begin_layout Plain Layout

	xlabel=Ratio of internal resources,
\end_layout

\begin_layout Plain Layout

	ylabel=Ratio of domains,
\end_layout

\begin_layout Plain Layout

	legend style={
\end_layout

\begin_layout Plain Layout

		at={(.01,.99)},
\end_layout

\begin_layout Plain Layout

		anchor=north west,
\end_layout

\begin_layout Plain Layout

	},
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

	
\backslash
CDFPlotFromDefaultDatasetsFile{datasets.non-failed.ratio-buckets.is-internal-domain.
normalized.cumulative.sorted.tsv}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
end{axis}
\end_layout

\begin_layout Plain Layout


\backslash
end{tikzpicture}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Cumulative-distribution-ratio-internal-resources"

\end_inset


\begin_inset Argument 1
status open

\begin_layout Plain Layout
Ratio of internal resources per domain
\end_layout

\end_inset

Cumulative distribution of the ratio of internal resources per domain
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{portraitdatapage}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Section
Domain and request counts
\begin_inset CommandInset label
LatexCommand label
name "sec:Domain-and-request-counts"

\end_inset


\end_layout

\begin_layout Standard
The table shows counts of domains and domains which have at least one internal/e
xternal request, and to how many external domains, primary domains or Disconnect
 domains the requests was sent.
 Following that, counts of all requests, internal requests and external
 requests.
 External requests matching Disconnect's blocking lists are also shown.
 This table is mostly interesting to show the scale of the data collection,
 in terms of number of requests made and analyzed.
\end_layout

\begin_layout Standard
If we include all dataset variations 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{252481}
\end_layout

\end_inset

 domains responded to the request; out of those 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{172898}
\end_layout

\end_inset

 made at least one internal request and 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{199358}
\end_layout

\end_inset

 external dittos.
 A total of 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{9877940}
\end_layout

\end_inset

 requests have been analyzed; 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{4498575}
\end_layout

\end_inset

 were internal, 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{5379365}
\end_layout

\end_inset

 external and 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{2389917}
\end_layout

\end_inset

 matched disconnect's blocking list.
\end_layout

\begin_layout Standard
See also 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Requests-per-domain-and-ratios"

\end_inset

 and 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Undetected-external-domains"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtablewidedatasets{datasets.non-failed.requests.counts.sorted.tsv}{Requests
 per domain}{}{display columns/1/.style={string type, column type=i}, display
 columns/2/.style={string type, column type=i}, display columns/3/.style={string
 type, column type=i}, display columns/4/.style={string type, column type=|i},
 display columns/5/.style={string type, column type=i}, display columns/6/.style={
string type, column type=i}, display columns/7/.style={string type, column
 type=|i}, display columns/8/.style={string type, column type=i}, display
 columns/9/.style={string type, column type=i}, display columns/10/.style={string
 type, column type=i}}
\end_layout

\end_inset


\end_layout

\begin_layout Section
Requests per domain and ratios
\begin_inset CommandInset label
LatexCommand label
name "sec:Requests-per-domain-and-ratios"

\end_inset


\end_layout

\begin_layout Standard
Shown in the table below are ratios based on the request counts in Section
 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Domain-and-request-counts"

\end_inset

.
 First the ratio of domains with at least one internal/external request.
 Requests are then shown as average count per domain, internal per domain
 with internal requests and external per domain with external requests.
 External Disconnect requests are shown per domain with external requests.
 After that comes ratios of requests; internal/external/Disconnect out of
 all requests, external over internal and Disconnect request ratio out of
 the external requests.
\end_layout

\begin_layout Standard
It is interesting to look at the number of requests, as they differ between
 datasets.
 Random TLD domains have a low average of 26-29 requests per domain, random
 Alexa top sites an average 71-76 -- but the very top of the Alexa top list
 comes in at 83-105.
 The smaller datasets Reach50 reaches 87, and the even smaller dataset 
\emph on
.SE Health Status
\emph default
' media sets the record at 197 requests per domain!
\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Write about internal per domain.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Write about external per domain.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Write about disconnect per domain.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Write about internal ratio.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Write about external ratio.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Write about disconnect ratio.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Write about external over internal ratio.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Write about disconnect over external ratio.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtablewidedatasets{datasets.non-failed.requests.ratios.sorted.tsv}{Requests
 per domain and ratios}{}{display columns/1/.style={string type, column type=i},
 display columns/4/.style={precision=0, column type=|r}, display columns/5/.style=
{precision=0}, display columns/6/.style={precision=0}, display columns/7/.style={p
recision=0}, display columns/8/.style={column type=|r}, display columns/11/.style=
{column type=|r}}
\end_layout

\end_inset


\end_layout

\begin_layout Section
Insecure versus secure resources
\begin_inset CommandInset label
LatexCommand label
name "sec:Insecure-versus-secure-resources"

\end_inset


\end_layout

\begin_layout Standard
Using HTTPS to secure the connection between site and site users is considered
 an effective way to avoid prying eyes on the otherwise technically quite
 open and insecure internet.
 Sites which handle sensitive information, such as e-commerce shops, online
 payment providers and of course banks often tout being secure to use --
 and they have strong financial incentives to provide a service that is
 (or at least comes across as) trustworthy.
 
\begin_inset Note Note
status open

\begin_layout Plain Layout
Reference for strong financial incentives for security?
\end_layout

\end_inset

 As browsers will warn users if a site secured with HTTPS loads resources
 over non-HTTPS connections, site developers will have to make sure each
 and every request is secure to avoid being labeled not trustworthy.
 This also applies to third-party services, which have to make sure to provide
 HTTPS in order to be able to continue providing services to sites making
 the switch to a fully secured experience.
\end_layout

\begin_layout Standard
One of the concerns with mixing in HTTP on an HTTPS site is that an attacker
 can use traffic sniffers to get a hold of sensitive information leaking
 out through HTTP, or man in the middle attacks on several kinds of resources
 to insert malicious code, even though the site is supposed to be protected.
\end_layout

\begin_layout Standard
The following table shows to what extent sites manage to take full advantage
 of HTTPS, and to which extent they fail in requesting either internal or
 external resources.
 Note that HTTP domains that redirect to HTTPS 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:HTTP,-HTTPS-and-redirects"

\end_inset

 right away and/or only load HTTPS resources are shown as fully secure,
 as the analysis excludes the origin request -- although in general an initial
 request to HTTP can potentially nullify all subsequent security measures.
\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:secure-mixed-insecure-resources"

\end_inset

 shows an overview of ratio of domains with strictly secure requests, mixed
 security or strictly insecure requests (x axis) per dataset.
\end_layout

\begin_layout Standard
While the technology has been around a long time, it does not seem as if
 very many sites actually use HTTPS.
 Even origin sites that respond to HTTPS requests seem to either redirect
 to an HTTP site 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:HTTP,-HTTPS-and-redirects"

\end_inset

, or load at least some of its resources over non-HTTPS connections.
 Typing in an HTTPS address into the browser's address bar will actually
 only give full HTTPS security on 27-58% of the domains -- a number where
 the random domains surprisingly beat the non-random ones.
\end_layout

\begin_layout Standard
The cumulative distribution of domains (y axis) with a certain ratio of
 secure resources (out of all requested resources) per domain (x axis) is
 shown on in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Cumulative-distribution-ratio-secure-resources"

\end_inset

.
 The first marker in each dataset shows the ratio of domains with no secure
 resources at all.
 The second marker shows 99% secure resources, which marks the start of
 fully secure domains.
 The vertical differences between the two markers for each dataset shows
 the range of sites with mixed security.
\end_layout

\begin_layout Standard
We can see that HTTPS datasets have much better security than their HTTP
 counterparts.
 Looking at se.2014-07-10.random.100000-http-www which has over 60% completely
 insecure domains, 30% mixed security and less than 10% domains with only
 secure resources.
 Comparing it with se.2014-07-10.random.100000-https-www, we see that it has
 less than 10% completely insecure domains, a bit more than 30% mixed security
 and over 55% domains with only secure resources.
 The ratios of completely insecure and completely secure domains have almost
 been reversed.
 We can also see that many domains in the HTTPS datasets have between 90%
 and 99% secure resources -- around 25% of municipalities for example --
 which seems like a relatively small gap to close to get a completely secure
 site.
\end_layout

\begin_layout Standard
Why is adoption lower for top sites? As high-traffic sites they might have
 a high system load, and since HTTPS require some extra processing and data
 exchange, they might have deferred it until the security is 
\emph on
really
\emph default
 needed -- such as when passwords of financial information is entered.
 Strict HTTPS performance concerns were dismissed by Google engineers in
 2010
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.imperialviolet.org/2010/06/25/overclocking-ssl.html"

\end_inset


\end_layout

\end_inset

 -- and Google has since implemented HTTPS as an alternative for most and
 the default for some services
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://gmailblog.blogspot.se/2010/01/default-https-access-for-gmail.html"

\end_inset


\end_layout

\end_inset

.
 HTTPS is also a positive 
\begin_inset Quotes eld
\end_inset

signal
\begin_inset Quotes erd
\end_inset

 in Google's PageRank algorithm, meaning the use of HTTPS will lead to a
 better position in Google's search results
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://googleonlinesecurity.blogspot.in/2014/08/https-as-ranking-signal_6.html"

\end_inset


\end_layout

\end_inset

.
 There are other effects on network services though, such as reduced ability
 for ISPs to cache results closer to network edges or companies to easily
 inspect filter traffic 
\begin_inset CommandInset citation
LatexCommand cite
key "Naylor:2014:CSH:2674005.2674991"

\end_inset

.
\end_layout

\begin_layout Standard
Another concern is that curated domain lists seem to exhibit an even lower
 HTTPS adoption than both random and top domains -- the domains have been
 selected as they are deemed important to the public in some way.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtablewidedatasets{datasets.non-failed.classification.secure.coverage.sorted.tsv}{Se
cure versus insecure resources coverage}{}{display columns/5/.style={column
 type=|r}, display columns/8/.style={column type=|r}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{portraitdatapage}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{tikzpicture}
\end_layout

\begin_layout Plain Layout


\backslash
begin{axis}[
\end_layout

\begin_layout Plain Layout

	allDatasetsStackedXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbarFullPage,
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationSecureCoverageSorted}{All sec}{Secure}{green
}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationSecureCoverageSorted}{Mix sec}{Mixed}{yellow
}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationSecureCoverageSorted}{All insec}{Insecure}{o
range}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
end{axis}
\end_layout

\begin_layout Plain Layout


\backslash
end{tikzpicture}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:secure-mixed-insecure-resources"

\end_inset


\begin_inset Argument 1
status open

\begin_layout Plain Layout
Strictly secure, mixed or strictly insecure resources
\end_layout

\end_inset

Distribution of domains with strictly secure, mixed or strictly insecure
 resources
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{tikzpicture}
\end_layout

\begin_layout Plain Layout


\backslash
begin{axis}[
\end_layout

\begin_layout Plain Layout

	datasetsCDF,
\end_layout

\begin_layout Plain Layout

	datasetsCDFFullPage,
\end_layout

\begin_layout Plain Layout

	xlabel=Ratio of secure resources,
\end_layout

\begin_layout Plain Layout

	ylabel=Ratio of domains,
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

	
\backslash
CDFPlotFromDefaultDatasetsFile{datasets.non-failed.ratio-buckets.is-secure.normalize
d.cumulative.sorted.tsv}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
end{axis}
\end_layout

\begin_layout Plain Layout


\backslash
end{tikzpicture}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Cumulative-distribution-ratio-secure-resources"

\end_inset


\begin_inset Argument 1
status open

\begin_layout Plain Layout
Ratio of secure resources per domain
\end_layout

\end_inset

Cumulative distribution of the ratio of secure resources per domain
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{portraitdatapage}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Section
HTTP, HTTPS and redirects
\begin_inset CommandInset label
LatexCommand label
name "sec:HTTP,-HTTPS-and-redirects"

\end_inset


\end_layout

\begin_layout Standard
The table shows domains, domains with redirect responses to the origin request,
 the ratio of domains with redirects and the average length of the redirect
 chain per domain with redirects.
 Shown next is the ratio of redirected domains making strictly internal,
 domains mixing internal and external, and strictly external redirect URLs.
 The same goes for insecure, mixed security and strictly secure redirects
 -- plus a column with the ratio of domains where the final redirect is
 to a secure URL.
 The last column shows the ratio of domains with mismatched redirect URLs
 without a subsequently requested URL.
\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:secure-mixed-insecure-redirects"

\end_inset

 shows the distribution of strictly secure, mixed security and strictly
 insecure redirects (x axis) per dataset.
 The percentage of mismatched URLs is also shown.
 An additional mark shows the percentage of final secure redirects with
 an 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
x
\end_layout

\end_inset

, as not all mixed redirects lead to secure sites -- sometimes they lead
 back to an insecure site.
\end_layout

\begin_layout Standard
Most domains that redirect make a single redirect, but every few sites make
 more than one; the average is around 1.23 redirects.
 With 49-71% of top sites in the HTTP variations redirecting, but only 30-36%
 of HTTP-www variations redirecting, it seems that the www subdomain still
 is in use, rather than not using any subdomain.
 For random domains numbers are a bit more even, with 24-31% of both HTTP
 and HTTP-www variations redirecting.
 More detailed data than in the below table clearly shows that domains generally
 pick either www or no subdomain, and redirect from one to the other; the
 www subdomain is most common as the final destination, especially for HTTPS
 variations.
\end_layout

\begin_layout Standard
A difference between top and random domains, is that top domains keep their
 redirects mostly internal, while random domains redirect elsewhere.
 Curated sites are in between, with a portion of HTTP-www variations redirecting
 externally.
 This seems to suggest that top sites has contents, while random domains
 to a larger extent do not -- 39-60% of redirected domains end up being
 aliases for another domain than a user would have typed in.
\end_layout

\begin_layout Standard
When it comes to security, it is no surprise to see HTTP variations redirect
 mostly to other insecure URLs.
 The extent of domains implementing HTTPS but then redirecting to HTTP is
 more surprising -- only in 23-35% of top sites will let you stay on a fully
 secure connection -- and that number excludes mixed resource security in
 later stages of the browsing experience 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Insecure-versus-secure-resources"

\end_inset

.
 An additional few percent of HTTPS domains even mix security usage during
 redirects and take a 
\emph on
detour
\emph default
 over an insecure URL in the process of redirecting the user to the final,
 secure destination -- meaning that even if you type in a secure address
 
\emph on
and
\emph default
 end up on a secure address, you may have passed through something completely
 insecure along the way.
 While this might be considered a corner case, it nullifies some of the
 security measures put in place by HTTPS, and could leak for example a carelessl
y set session identifier.
\end_layout

\begin_layout Standard
Here it is a surprise to see that financial institutions in the 
\emph on
.SE Health Status
\emph default
 domain lists do not take advantage of HTTPS, by redirecting users entering
 through HTTP -- at less than 20% fully secured redirects and a surprising
 ratio of mixed redirects, they are at about the same level as general Swedish
 top sites.
 Even more surprising is that they even elect to redirect users away from
 HTTPS enabled pages to insecure variants in 60% of HTTPS-www domains.
 Counties, higher education and media are worse yet -- all make no effort
 in redirecting users from HTTP to HTTPS.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtablewidedatasets{datasets.non-failed.origin-redirects.coverage.sorted.tsv}{Origin
 domains with redirects}{}{display columns/1/.style={string type, column
 type=i}, display columns/2/.style={string type, column type=i|}, display
 columns/5/.style={column type=|r}, display columns/8/.style={column type=|r},
 display columns/12/.style={column type=|r}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Analyzing domains redirecting to secure URLs would be a good candidate for
 a refined selection 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Separating-analysis-steps"

\end_inset

.
 Do the redirects help, or is the net result that insecure resources are
 loaded anyways?
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The mismatched redirect and request URLs are in part due to the HAR standard
 not defining recorded redirect URLs as strictly absolute, and phantomjs
 returning unparsed/unresolved URLs when a redirect is initially detected
 in an HTTP response 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:The-HAR-specification"

\end_inset

.
 Resolving redirect URLs outside of the browser means not all contexts and
 rules are considered, thus leading to errors.
 Both the thesis code, phantomjs software and HAR standard can be improved
 upon.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{portraitdatapage}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{tikzpicture}
\end_layout

\begin_layout Plain Layout


\backslash
begin{axis}[
\end_layout

\begin_layout Plain Layout

	allDatasetsStackedXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbarFullPage,
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationOriginRedirectsCoverageSorted}{Sec}{Secure}{
green}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationOriginRedirectsCoverageSorted}{Mix sec}{Mixe
d}{yellow}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationOriginRedirectsCoverageSorted}{Insec}{Insecu
re}{orange}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedClassificationOriginRedirectsCoverageSorted}{Mism}{Mismatc
h}{lightgray}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
addplot+[
\end_layout

\begin_layout Plain Layout

		stack plots=false,
\end_layout

\begin_layout Plain Layout

		only marks,
\end_layout

\begin_layout Plain Layout

		mark=x,
\end_layout

\begin_layout Plain Layout

		mark size=3pt,
\end_layout

\begin_layout Plain Layout

		fill=white,
\end_layout

\begin_layout Plain Layout

		draw=black,
\end_layout

\begin_layout Plain Layout

		thick,
\end_layout

\begin_layout Plain Layout

		fill opacity=1,
\end_layout

\begin_layout Plain Layout

		update limits=false,
\end_layout

\begin_layout Plain Layout

		line legend,
\end_layout

\begin_layout Plain Layout

	]
\end_layout

\begin_layout Plain Layout

	table[y=Dataset,x=Final sec]
\end_layout

\begin_layout Plain Layout

	
\backslash
tableDatasetsNonFailedClassificationOriginRedirectsCoverageSorted;
\end_layout

\begin_layout Plain Layout


\backslash
addlegendentry{Final redirect secure}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
end{axis}
\end_layout

\begin_layout Plain Layout


\backslash
end{tikzpicture}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:secure-mixed-insecure-redirects"

\end_inset


\begin_inset Argument 1
status open

\begin_layout Plain Layout
Strictly secure, mixed or strictly insecure redirects
\end_layout

\end_inset

Distribution of domains with strictly secure, mixed or strictly insecure
 redirects
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{portraitdatapage}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Section
Content type group coverage
\begin_inset CommandInset label
LatexCommand label
name "sec:Content-type-group-coverage"

\end_inset


\end_layout

\begin_layout Standard
Bytes sent from the server to the browser generally has an associated type,
 so the browser can parse and use them properly.
 The types can be grouped 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Mime-type"

\end_inset

; incorrect or unknown types that did not match a group is shown as 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
(null)
\end_layout

\end_inset

 below.
 The difference between what can be achieved between different types of
 resources makes the distribution interesting.
 Images 
\begin_inset Foot
status open

\begin_layout Plain Layout
Scalable Vector Graphics (SVG) images can load resources.
\begin_inset CommandInset href
LatexCommand href
target "http://www.w3.org/TR/SVG/"

\end_inset


\end_layout

\end_inset

 and text
\begin_inset Foot
status open

\begin_layout Plain Layout
Unless improperly labeled during transfer and parsed as another format.
\end_layout

\end_inset

 loaded by a browser generally provide no additional way to load further
 resources, while html, scripts and styles do.
 While data resources can trigger downloading additional resources based
 on the logic that consumes the data, it still requires another type of
 resource present to do that.
\end_layout

\begin_layout Standard
Objects and external documents can also access additional resources, but
 the use of those types of resources has been very low in the extracted
 data.
 There might be several reasons, but the fact that the tests were run on
 a headless browser without additional plugins installed is probably the
 biggest in this case.
 An additional reason might be adoption of HTML5 and client side javascript
 instead of Flash for visual, dynamic material and animations.
 This evolution has been fueled by Apple's resistance towards supporting
 Flash on their handheld devices
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "https://www.apple.com/hotnews/thoughts-on-flash/"

\end_inset


\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
Note that web fonts have fairly low numbers here, but that they can also
 be served as styles which dynamically load additional fonts URLs.
 This is how Google Fonts do it, using the fonts.googleapis.com domain 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Trackers-which-deliver-content"

\end_inset

 to serve styles and gstatic.com to serve fonts dynamically selected to match
 to browser web font compatibility level, which could then be factored into
 these numbers 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Top-domains-Google"

\end_inset

.
 
\begin_inset Note Note
status open

\begin_layout Plain Layout
Break out numbers specifically for font mime (group) and fonts.googleapis.com
 and gstatic.com?
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Origin
\end_layout

\begin_layout Standard
Practically all successful origin requests result in a html response.
 The range is 84-100% html, with the difference being seemingly misconfigured
 responses, part of which are redirects without actual content 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:HTTP,-HTTPS-and-redirects"

\end_inset

.
\end_layout

\begin_layout Subsection
Internal
\end_layout

\begin_layout Standard
The table below shows internal request ratios for domains with at least
 one internal request, excluding the origin request.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtablewidedatasets{datasets.non-failed.mime-types.groups.coverage.internal.sorted.tsv
}{Content type group coverage (internal)}{}{}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
External
\end_layout

\begin_layout Standard
The table below shows external resources from each group enjoy almost the
 same coverage as their internal counterparts.
 Among non-zone datasets scripts often reach above 90% coverage, showing
 that active and popular web pages contain a lot of external dynamic material.
 Images, while not dynamic, as well as styles and html are also popular
 to load externally.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtablewidedatasets{datasets.non-failed.mime-types.groups.coverage.external.sorted.tsv
}{Content type group coverage (external)}{}{}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
As some external file types can trigger further HTTP requests, it might
 be possible to build a hierarchy of requests.
 The easiest way is to look at resources loaded in HTML 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
<iframe>
\end_layout

\end_inset

 (or the now less popular 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
<frame>
\end_layout

\end_inset

) as they will have an HTTP 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
referer
\end_layout

\end_inset

 header set to the URL of the frame.
 Scripts and styles requesting other resources directly, without the use
 of frames, cannot be detected as a strict hierarchy.
 With the large number of requests made from different sites, URLs can be
 cleaned up (for example removing unique identifiers or looking at domain
 parts only) and connected in a graph and analyzed for similarities.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Section
Public suffix coverage
\begin_inset CommandInset label
LatexCommand label
name "sec:Public-suffix-coverage"

\end_inset


\end_layout

\begin_layout Standard
Resources served from external URLs may well come from other public suffixes;
 here they have been grouped by TLD.
 The connections between datasets and TLDs is interesting; .se datasets load
 more from .se domains than others, and the equivalent is valid for .dk datasets.
 We can also see that despite Alexa's top 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{10000}
\end_layout

\end_inset

 being an international list, nearly 19% of them use resources are loaded
 from .se domains.
 This points towards those sites being aware of the country of origin for
 the request, leading to localized content being served.
 It is also evident that the .com TLD is the most widespread for external
 resources -- it beats same-TLD coverage.
\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Compare to TLD counts in Table 
\begin_inset CommandInset ref
LatexCommand eqref
reference "tab:TLDs-in-dataset-in-use"

\end_inset

.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtablewidedatasets{datasets.non-failed.public-suffix.coverage.external.sorted.tsv}{P
ublic suffixes in external resources}{}{}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Future downloads could be performed from other countries to measure location-dep
endent service coverage.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Section
Disconnect's blocking list matches
\begin_inset CommandInset label
LatexCommand label
name "sec:Disconnect's-blocking-list-matches"

\end_inset


\end_layout

\begin_layout Standard
The table below shows coverage for requested URLs' domains matching Disconnect's
 blocking list 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:classification/disconnect/add.sh"

\end_inset

, for internal and external resources separately as well as all resources
 together.
 Coverage per domain for top domains is shown later in this section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Top-domains"

\end_inset

.
 As the blocking list contains details about which category and organization
 each domain belongs to 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect's-blocking-list"

\end_inset

, they have been used grouped to display aggregates per category 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-categories-coverage"

\end_inset

 and organization 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Top-organizations"

\end_inset

 as well.
\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Cumulative-distribution-ratio-disconnect-matches"

\end_inset

 shows the CDF of the percentage of domains (y axis) which have a certain
 ratio of all requests matching Disconnect's blocking list (x axis).
 The leftmost marker for each dataset shows 0% Disconnect matches, and the
 rightmost marker shows 99% matches.
\end_layout

\begin_layout Standard
About 20% of Alexa's top 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{10000}
\end_layout

\end_inset

 sites make more than 50% of their requests to known tracker domains; similarly
 50% of domains from the same datasets load more than 20% of their resources
 form known tracker domains.
 Other datasets rely less on this kind of external resource, at around or
 less than 10% using 50% or more tracker resources -- but again the number
 of requests is less interesting than the number of organizations potentially
 collecting the leaked user traffic data.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtablesuperwidedatasets{datasets.non-failed.classification.disconnect.coverage.sort
ed.tsv}{Disconnect coverage for internal, external and all requests}{}{display
 columns/2/.style={string type, column type=i}, display columns/5/.style={string
 type, column type=|i}, display columns/8/.style={column type=|r}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{portraitdatapage}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{tikzpicture}
\end_layout

\begin_layout Plain Layout


\backslash
begin{axis}[
\end_layout

\begin_layout Plain Layout

	datasetsCDF,
\end_layout

\begin_layout Plain Layout

	datasetsCDFFullPage,
\end_layout

\begin_layout Plain Layout

	xlabel=Ratio of Disconnect matches,
\end_layout

\begin_layout Plain Layout

	ylabel=Ratio of domains,
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

	
\backslash
CDFPlotFromDefaultDatasets{
\backslash
tableTransposedDatasetsNonFailedRatioBucketsIsDisconnectMatchNormalizedCumulativ
eSorted}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

	
\backslash
CDFPlotFromDataset{
\backslash
tableTransposedDatasetsNonFailedRatioBucketsIsDisconnectMatchNormalizedCumulativ
eSorted}{se.healthstatus.2013.media}{teal}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
end{axis}
\end_layout

\begin_layout Plain Layout


\backslash
end{tikzpicture}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Cumulative-distribution-ratio-disconnect-matches"

\end_inset


\begin_inset Argument 1
status open

\begin_layout Plain Layout
Ratio of Disconnect matches per domain
\end_layout

\end_inset

Cumulative distribution of the ratio of Disconnect's blocking list matches
 for all resources per domain
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{portraitdatapage}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Domain and organization counts
\begin_inset CommandInset label
LatexCommand label
name "sub:Domain-and-organization-counts"

\end_inset


\end_layout

\begin_layout Standard
The below table shows the number of domains in the dataset, the number of
 requests classified as trackers in the Disconnect dataset (see also 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Domain-and-request-counts"

\end_inset

 for other types of requests) followed by aggregate counts for domains,
 organizations and categories for these requests.
 Next we see Disconnect requests per domain in the dataset, and the same
 number per Disconnect organization.
 The last section contains the ratios out of the total 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{2149}
\end_layout

\end_inset

 domains and 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{980}
\end_layout

\end_inset

 organizations (see 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Disconnect's-blocking-list"

\end_inset

).
\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Organizations-per-domain"

\end_inset

 shows the cumulative distribution of domains (y axis) with requests to
 between 0 and 99 organizations (x axis).
 Domains with 100 or more organizations are shown in the rightmost segment
 of the graph.
\end_layout

\begin_layout Standard
The 
\emph on
.SE Health Status'
\emph default
 media category has over 40 tracker requests on average -- the highest number
 of tracker requests per domain, much higher than for example public authorities
 and random zone domains at 5-7, with top domains having 17-32 requests
 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Domain-and-request-counts"

\end_inset

.
 What is more interesting than request counts is the number of tracker organizat
ions per domain -- while more information may be leaked as the number of
 requests to an organization increase, the same amount could potentially
 leak through with just one or two carefully composed requests to each organizat
ion.
\end_layout

\begin_layout Standard
While it is hard to compare Disconnect's organizations' coverage across
 datasets as the number of domains increases the chance of additional organizati
ons being represented, it seems global top sites use a broad range of trackers
 -- more than 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{500}
\end_layout

\end_inset

 of the 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{980}
\end_layout

\end_inset

 organizations.
 Looking at Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Organizations-per-domain"

\end_inset

 we see that top sites have requests to more organizations than random domains
 do.
 Over 40% of random .se HTTP-www domains have no known trackers, about as
 many have one tracker and the top 1% have six or more.
 This is compared to 32% of Alexa's top site sharing information with more
 than five organizations, 10% have 13 or more, and 1% share information
 with at least 48 organizations.
 There are even a couple of domains among the Alexa sites which have more
 than 75 recognized tracker organizations just on the front page -- a clear
 example of how it is impossible to tell where your browsing habits can
 end up, and even more so how it is used in a second stage.
 It is also clear that the non-zone domains have as much tracking on when
 using a secure connection as on an insecure connection, while the difference
 for zone domains can be explained by the very low HTTPS usage 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Failed-versus-non-failed"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtablewidedatasets{datasets.non-failed.disconnect.counts.sorted.tsv}{Disconnect
 requests, organizations and categories counts and ratios}{}{display columns/2/.s
tyle={string type, column type=i}, display columns/3/.style={string type,
 column type=i}, display columns/4/.style={string type, column type=i}, display
 columns/5/.style={string type, column type=i}, display columns/6/.style={column
 type=|r}, display columns/8/.style={column type=|r}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{portraitdatapage}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{tikzpicture}
\end_layout

\begin_layout Plain Layout


\backslash
begin{semilogxaxis}[
\end_layout

\begin_layout Plain Layout

	datasetsCDF,
\end_layout

\begin_layout Plain Layout

	datasetsOccurances,
\end_layout

\begin_layout Plain Layout

	datasetsCDFFullPage,
\end_layout

\begin_layout Plain Layout

	xlabel=Number of organizations,
\end_layout

\begin_layout Plain Layout

	ylabel=Ratio of domains,
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

	
\backslash
CDFPlotFromDefaultDatasets{
\backslash
tableTransposedDatasetsNonFailedRatioBucketsDisconnectOrganizationsNormalizedCum
ulativeSorted}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

	
\backslash
CDFPlotFromDataset{
\backslash
tableTransposedDatasetsNonFailedRatioBucketsDisconnectOrganizationsNormalizedCum
ulativeSorted}{se.healthstatus.2013.media}{teal}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
end{semilogxaxis}
\end_layout

\begin_layout Plain Layout


\backslash
end{tikzpicture}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Organizations-per-domain"

\end_inset


\begin_inset Argument 1
status open

\begin_layout Plain Layout
Organizations per domain
\end_layout

\end_inset

Cumulative distribution of the number of organizations per domain
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{portraitdatapage}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Top domains
\begin_inset CommandInset label
LatexCommand label
name "sub:Top-domains"

\end_inset


\end_layout

\begin_layout Standard
A selection of domains, and their coverage across different datasets.
 Worth noting is that many recognizable domains belong to organization which
 have multiple domains 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-Organizations-in-more-than-one-category"

\end_inset

, so their total organization coverage is higher.
 This first table excludes top Google domains, which dominate the top list
 for all datasets.
\end_layout

\begin_layout Subsubsection
General
\begin_inset CommandInset label
LatexCommand label
name "sub:Top-domains-General"

\end_inset


\end_layout

\begin_layout Standard
Facebook and Twitter have their like and tweet buttons which often are talked
 about in terms of social sharing, but it seems that their coverage is comparati
vely low except for the 
\emph on
.SE Health Status
\emph default
' media category.
 AddThis' service includes some of Facebook's and Twitter's buttons' functionali
ty, among other social sharing sites but they do not have quite the same
 coverage.
 Unfortunately, Facebook and Twitter are both in Disconnect's special Disconnect
 category 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-category"

\end_inset

, and are not reflected in the social category aggregates 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-categories-coverage"

\end_inset

.
\end_layout

\begin_layout Standard
The domain cloudfront.net belonging to Amazon, is hosting services, file
 and data on behalf of other organizations on subdomains 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Public-suffix-list"

\end_inset

.
 While it is clear that Amazon can analyze and use traffic information from
 hosted services, the data itself can be assumed to belong to the hosted
 organizations.
 This is a strong reason why the domain is listed as content in Disconnect's
 blocking list -- because of the variety of services being hosted on subdomains,
 it cannot be blocked as for example advertisement even if it is being hosted
 there.
 It can be seen as a flaw in the Disconnect way of blocking, even though
 listing individual subdomains in other categories might be a way to override
 the content bypass -- but as these non-branded domains can be seen as throw-awa
y domains, it can become a game of cat and mouse 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Cat-and-Mouse"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtablesuperwidedatasets{datasets.non-failed.disconnect.domains.coverage.external.sor
ted.tsv}{Top Disconnect domain match coverage}{}{}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "note:cloudfront.net-cdn-subdomains"

\end_inset


\end_layout

\begin_layout Standard
One thing to look closer at is cloudfront.net's subdomains, to analyze their
 content and which sites use them.
 Are they used as CDNs local to a single domain, or do third-party services
 host content there? If so, what kind of content? Are there similar patterns
 for Amazon AWS and other cloud services? See also public suffixes owned
 by private companies 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Public-suffix-list"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Google
\begin_inset CommandInset label
LatexCommand label
name "sub:Top-domains-Google"

\end_inset


\end_layout

\begin_layout Standard
Google has many domains in Disconnect's blocking list 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-Domains-per-organization"

\end_inset

, and many in the top results.
 One of the reasons is that they have several popular services with content
 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Trackers-which-deliver-content"

\end_inset

, but the top Disconnect-recognized domain in most datasets is google-analytics.c
om, with googleapis.com and www.google.com as the top result in the others.
\end_layout

\begin_layout Standard
Here we see DoubleClick's, one of Google's ad services, coverage.
 Unfortunately it has not been included in Disconnect's advertisement category,
 and it skews the numbers for the advertisement category 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-categories-coverage"

\end_inset

, nor has Google Analytics been put in the analytics category.
 Google Analytics is served from its own domain, but Google is making a
 push to move site owners to the DoubleClick domain, where they have replicated
 the Google Analytics engine
\begin_inset Foot
status open

\begin_layout Plain Layout

\emph on
Update your Analytics tracking code to support Display Advertising
\emph default
 
\begin_inset CommandInset href
LatexCommand href
target "https://support.google.com/analytics/answer/2444872"

\end_inset


\end_layout

\end_inset

.
 The reason given to site owners using Google Analytics is that the DoubleClick
 tracker offers implementors additional rich audience information such as
 age, gender and interests on top of their current technical analysis from
 Google Analytics.
 The underlying reason is possibly that Google wants DoubleClick, which
 brings a lot of income, to have greater coverage across websites -- greater
 coverage meaning more and higher quality visitor information.
 While Google owns both services, site owner/visitor/usage policies
\begin_inset Foot
status open

\begin_layout Plain Layout

\emph on
Policy requirements for Google Analytics Advertising Features
\emph default
 
\begin_inset CommandInset href
LatexCommand href
target "https://support.google.com/analytics/answer/2700409"

\end_inset


\end_layout

\end_inset

 might prevent Google from crossmatching information between them without
 site owner consent.
 Cookies set to the doubleclick.net domain should be more valuable to Google
 than those set to google-analytics.com, as they translate to more directed
 ads 
\begin_inset CommandInset citation
LatexCommand cite
key "Gill:2013:BPF:2504730.2504768"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtablesuperwidedatasets{datasets.non-failed.disconnect.domains.coverage.external.goo
gle.sorted.tsv}{Top Disconnect Google domain match coverage}{}{}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Tracker categories
\begin_inset CommandInset label
LatexCommand label
name "sub:Disconnect-categories-coverage"

\end_inset


\end_layout

\begin_layout Standard
Disconnect's categories and their coverage across different datasets are
 shown in the table below, as well as the coverage of domains where any
 (at least one) external resource matches Disconnect's blocking list.
 As mentioned earlier, the special Disconnect category contains major Facebook,
 Google and Twitter domains -- domains which could also have been listed
 as advertising, analytics or social domains 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-category"

\end_inset

.
 The content category, which bypasses Disconnect's blocking by default,
 can for this reason be seen as the most accurate in terms of coverage,
 as domains have presumably been added as content in a manual process of
 whitelisting 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-Content"

\end_inset

.
\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:top-categories"

\end_inset

 shows each category's coverage (x axis) per dataset.
 The grey bar in the background shows ratio of domains with any (at least
 one) external request matching Disconnect's blocking list for each dataset;
 it effectively shows the union of the coverage of all categories per domain.
 In some cases a single category has the same coverage as the union.
\end_layout

\begin_layout Standard
The highest coverage being connected with the Disconnect category explains
 the low coverage of advertising, analytics and social.
 If, for example, the two domains facebook.com and twitter.com would be included
 in the social category, coverage would be 35-56% percentage points higher
 for top domains and 9-11% percentage points higher for random domains 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Top-domains-General"

\end_inset

 -- and more accurate.
 The same goes for advertising and doubleclick.net (30-50%, 7-36%) and analytics
 and google-analytics.com (63-76%, 24-32%) 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Top-domains-Google"

\end_inset

.
\end_layout

\begin_layout Standard
What is surprising is the high coverage of content from known trackers.
 While the Disconnect category has the highest coverage overall, the content
 category is the second largest -- significantly larger than the advertising,
 analytics and social categories in most datasets.
 While a large portion of this is due to extensive usage of Google's hosted
 services 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Top-domains-Google"

\end_inset

, all organizations with only content domains as well as those with 
\begin_inset Quotes eld
\end_inset

mixed
\begin_inset Quotes erd
\end_inset

 domains (Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Organizations-in-more-than-one-category"

\end_inset

) are let through to 67-78% of top domains and 38-56% or random domains.
 Mixing advertisement, or in this case tracking in general, with content
 has previously been discussed as a way for organizations to avoid in-browser
 blocking 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Cat-and-Mouse"

\end_inset

 -- and it seems prevalent.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtablewidedatasets{datasets.non-failed.disconnect.categories.coverage.external.sorte
d.tsv}{Disconnect category match coverage}{}{display columns/2/.style={column
 type=r|}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The current analysis performed for this thesis is built in such a way that
 the Disconnect blocking list used for matching can easily be replaced with
 an updated version.
 This also opens up the possibility of using a locally modified blocking
 list, re-categorizing each of the Disconnect category's domains as either
 advertising, analytics or social.
 The per-organization aggregate analysis would still produce the same numbers
 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Top-organizations"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{portraitdatapage}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{tikzpicture}
\end_layout

\begin_layout Plain Layout


\backslash
begin{axis}[
\end_layout

\begin_layout Plain Layout

	allDatasetsMultiXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbarFullPage,
\end_layout

\begin_layout Plain Layout

	allDatasetsMultiXbarPart2,
\end_layout

\begin_layout Plain Layout

	bar width=2.5pt,
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSorted}{Any}{Any}{blac
k!20!white}{bar shift=0pt, bar width=8.5pt}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSorted}{Disconnect}{Di
sconnect}{orange!80!white}{ultra thin, bar shift=3pt,}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSorted}{Content}{Conte
nt}{olive!80!white}{ultra thin, bar shift=1.5pt,}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSorted}{Advertising}{A
dvertising}{teal!80!white}{ultra thin, bar shift=0pt,}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSorted}{Analytics}{Ana
lytics}{purple!80!white}{ultra thin, bar shift=-1.5pt,}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSorted}{Social}{Social
}{brown!80!white}{ultra thin, bar shift=-3pt,}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
end{axis}
\end_layout

\begin_layout Plain Layout


\backslash
end{tikzpicture}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:top-categories"

\end_inset


\begin_inset Argument 1
status open

\begin_layout Plain Layout
Tracker categories
\end_layout

\end_inset

Ratio of domains with requests to Disconnect's categories
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{portraitdatapage}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Top organizations
\begin_inset CommandInset label
LatexCommand label
name "sub:Top-organizations"

\end_inset


\end_layout

\begin_layout Standard
A selection of organizations, and their coverage across different datasets.
 Facebook and Twitter are often touted as the big social network sites,
 but in terms of domain coverage they are far behind Google.
\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:google-facebook-twitter-coverage"

\end_inset

 shows the coverage of these three organizations (x axis) per dataset.
 As these organizations, and most of their domains, are included in the
 Disconnect category of Disconnect's blocking list 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-category"

\end_inset

, an 
\begin_inset Flex Code
status collapsed

\begin_layout Plain Layout
x
\end_layout

\end_inset

 has been added to show their collective Disconnect category coverage 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-categories-coverage"

\end_inset

.
\end_layout

\begin_layout Standard
Google is very popular with all Alexa and most Swedish curated datasets
 have a coverage above 80% -- and many closer to 90%.
 Random domains have a lower reliance on Google at 47-62% -- still about
 half of all domains.
 Apart from the .SE Health Status list of Swedish media domains, Facebook
 doesn't reach 40% in top or curated domains.
 Facebook coverage on random zone domains is 6-10%, which is also much lower
 than Google's numbers.
 Twitter generally has even lower coverage, at about half of that of Facebook
 on average.
 As can be seen, Google alone oftentimes has a coverage higher than the
 domains in the Disconnect category -- it shows that Google's content domains
 are in use 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Disconnect-Organizations-in-more-than-one-category"

\end_inset

.
 In fact, at around 90% of the total tracker coverage, Google's coverage
 approaches that of the union of 
\emph on
all other
\emph default
 known trackers.
\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Write about other organizations.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtablesuperwidedatasets{datasets.non-failed.disconnect.organizations.coverage.exter
nal.sorted.tsv}{Top Disconnect organization match coverage}{}{}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{portraitdatapage}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{tikzpicture}
\end_layout

\begin_layout Plain Layout


\backslash
begin{axis}[
\end_layout

\begin_layout Plain Layout

	allDatasetsMultiXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbarFullPage,
\end_layout

\begin_layout Plain Layout

	allDatasetsMultiXbarPart2,
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSorted}{Any}{Any}{blac
k!20!white}{bar shift=0pt, bar width=8.5pt}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectOrganizationsCoverageExternalSorted}{Google}{Goo
gle}{red!90!white}{ultra thin, bar shift=2pt,}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectOrganizationsCoverageExternalSorted}{Facebook}{F
acebook}{blue!90!white}{ultra thin, bar shift=0pt,}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDisconnectOrganizationsCoverageExternalSorted}{Twitter}{Tw
itter}{cyan!70!white}{ultra thin, bar shift=-2pt,}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
addplot+[
\end_layout

\begin_layout Plain Layout

		stack plots=false,
\end_layout

\begin_layout Plain Layout

		only marks,
\end_layout

\begin_layout Plain Layout

		mark=x,
\end_layout

\begin_layout Plain Layout

		mark size=3pt,
\end_layout

\begin_layout Plain Layout

		fill=white,
\end_layout

\begin_layout Plain Layout

		draw=black,
\end_layout

\begin_layout Plain Layout

		semithick,
\end_layout

\begin_layout Plain Layout

		fill opacity=1,
\end_layout

\begin_layout Plain Layout

		update limits=false,
\end_layout

\begin_layout Plain Layout

		line legend,
\end_layout

\begin_layout Plain Layout

	]
\end_layout

\begin_layout Plain Layout

	table[y=Dataset,x=Disconnect]
\end_layout

\begin_layout Plain Layout

	
\backslash
tableDatasetsNonFailedDisconnectCategoriesCoverageExternalSorted;
\end_layout

\begin_layout Plain Layout


\backslash
addlegendentry{Disconnect}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
end{axis}
\end_layout

\begin_layout Plain Layout


\backslash
end{tikzpicture}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:google-facebook-twitter-coverage"

\end_inset


\begin_inset Argument 1
status open

\begin_layout Plain Layout
Google, Facebook and Twitter coverage
\end_layout

\end_inset

Ratio of domains with requests to Google, Facebook and Twitter
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{portraitdatapage}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Section
Undetected external domains
\begin_inset CommandInset label
LatexCommand label
name "sec:Undetected-external-domains"

\end_inset


\end_layout

\begin_layout Standard
While all external resources are considered trackers, parts of this thesis
 has concentrated on using Disconnect.me's blocking list for tracker verification.
 But how effective is that list of 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{2149}
\end_layout

\end_inset

 
\emph on
known
\emph default
 and 
\emph on
recognized
\emph default
 tracker domains across the datasets? Below is a comparison with the unique
 external primary domain count in each dataset; while the count is lower
 than the total number of external domains as it excludes subdomains 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sub:Public-suffix-list"

\end_inset

, it matches the blocking style of Disconnect better.
\end_layout

\begin_layout Standard
The table below shows the number of unique external domains requested in
 each dataset, unique external primary domains and unique domains marked
 as trackers in Disconnect's blocking list.
 The difference between the number of Disconnect's detected tracker domains
 and external and primary domains respectively is shown next.
 The next column group shows the ratio of detected Disconnect domains over
 all external domains.
 Lastly, the ratio of domains detected as well as domains undetected by
 Disconnect, over the number of primary domains.
\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Undetected-external-domains"

\end_inset

 shows the ratio of detected and undetected primary domains (x axis) per
 dataset.
\end_layout

\begin_layout Standard
While some of the domains which have not been matched by Disconnect are
 private/internal CDNs, the fact that less than 10% of external domains
 are blocked in top website HTTP datasets is notable.
 The blocking results are also around 10% or lower for random domain HTTP
 datasets, but it seems it might be connected to the number of domains in
 the dataset.
 Only 3% of the 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
numprint{15746}
\end_layout

\end_inset

 external primary domains in .se 100k random domain HTTP dataset were detected.
 Smaller datasets, including HTTPS datasets with few reachable websites,
 have a higher detection rate at 30% and more.
\end_layout

\begin_layout Standard
Can a privacy tool using a 
\emph on
fixed blacklist
\emph default
 of domains to block be 
\emph on
trusted
\emph default
 -- or can it only be trusted to be 10% effective? Regular expression based
 blocking, such as EasyList used by AdBlock, might be more effective, as
 it can block resources by URL path separate from the URL domain name 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Ad-and-privacy-blocking-lists"

\end_inset

 -- but it's no cure-all.
 It does seem as if the blacklist model needs to be improved -- perhaps
 by using whitelisting instead of blacklisting.
 The question then becomes an issue of either 
\emph on
cat and mouse
\emph default
 
\begin_inset CommandInset ref
LatexCommand eqref
reference "sec:Cat-and-Mouse"

\end_inset

 -- if the whitelist is shared by many users -- or 
\emph on
convenience
\emph default
 -- if each user maintains their own whitelist.
 At the moment it seems convenience and blacklists are winning, at the cost
 of playing cat and mouse with third parties who end up being blocked.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
tsvtablewidedatasets{datasets.non-failed.domains.ratios.sorted.tsv}{Requests
 per domain and ratios}{}{display columns/2/.style={string type, column type=i},
 display columns/3/.style={string type, column type=i}, display columns/4/.style={
string type, column type=i}, display columns/5/.style={string type, column
 type=|i}, display columns/6/.style={string type, column type=i}, display
 columns/7/.style={column type=|r|}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
While only aggregate numbers per dataset have been presented here, it would
 be interesting to use the full list of undetected primary domains to improve
 Disconnect's blocking list.
 While it is an endless endeavor, sorting by number of occurrences would
 at least give a hint as to which domains might be useful to block.
 The same list could be used to classify some of the domains as private/internal
 CDNs.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{futurework}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{portraitdatapage}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
placement t
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{tikzpicture}
\end_layout

\begin_layout Plain Layout


\backslash
begin{axis}[
\end_layout

\begin_layout Plain Layout

	allDatasetsStackedXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbar,
\end_layout

\begin_layout Plain Layout

	allDatasetsXbarFullPage,
\end_layout

\begin_layout Plain Layout

]
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDomainsRatiosSorted}{Prim.
 det.}{Detected}{green}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
XBarPlotFromDataset{
\backslash
tableDatasetsNonFailedDomainsRatiosSorted}{Undet.}{Undetected}{orange}{}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
end{axis}
\end_layout

\begin_layout Plain Layout


\backslash
end{tikzpicture}
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Undetected-external-domains"

\end_inset


\begin_inset Argument 1
status open

\begin_layout Plain Layout
Undetected external primary domains
\end_layout

\end_inset

Distribution of external primary domains detected/undetected by Disconnect
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{portraitdatapage}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Couldn't find another way to force the above graph to render properly, without
 having a wide page afterwards.
 Could be debugged and fixed.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{wide}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
Pages with wide tables end here.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage cleardoublepage
\end_inset


\end_layout

\begin_layout Chapter*
The end
\end_layout

\begin_layout Standard
You can find updated document versions, as well as source code and datasets
 online
\begin_inset Foot
status open

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://joelpurra.com/projects/masters-thesis/"

\end_inset


\end_layout

\end_inset

.
 Thank you for reading this far -- feedback would be very much appreciated!
\end_layout

\end_body
\end_document
